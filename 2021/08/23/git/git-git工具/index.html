<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chenpeng.pages.dev","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="æ¥ä¸‹æ¥ä½ å°†é¢†ç•¥åˆ°ä¸€äº› Git å¯ä»¥å®ç°çš„éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä½ å¯èƒ½å¹¶ä¸ä¼šåœ¨æ—¥å¸¸æ“ä½œä¸­ä½¿ç”¨ï¼Œä½†åœ¨æŸäº›æ—¶å€™ä½ ä¹Ÿè®¸ä¼šéœ€è¦ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="git-gitå·¥å…·">
<meta property="og:url" content="https://chenpeng.pages.dev/2021/08/23/git/git-git%E5%B7%A5%E5%85%B7/index.html">
<meta property="og:site_name" content="é™ˆé¹çš„åšå®¢">
<meta property="og:description" content="æ¥ä¸‹æ¥ä½ å°†é¢†ç•¥åˆ°ä¸€äº› Git å¯ä»¥å®ç°çš„éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä½ å¯èƒ½å¹¶ä¸ä¼šåœ¨æ—¥å¸¸æ“ä½œä¸­ä½¿ç”¨ï¼Œä½†åœ¨æŸäº›æ—¶å€™ä½ ä¹Ÿè®¸ä¼šéœ€è¦ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chenpeng.pages.dev/2021/08/23/git/git-git%E5%B7%A5%E5%85%B7/18333fig0601-tn.png">
<meta property="article:published_time" content="2021-08-22T16:01:41.000Z">
<meta property="article:modified_time" content="2022-04-14T04:23:47.236Z">
<meta property="article:author" content="CHENPENGBLOG">
<meta property="article:tag" content="git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chenpeng.pages.dev/2021/08/23/git/git-git%E5%B7%A5%E5%85%B7/18333fig0601-tn.png">

<link rel="canonical" href="https://chenpeng.pages.dev/2021/08/23/git/git-git%E5%B7%A5%E5%85%B7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>git-gitå·¥å…· | é™ˆé¹çš„åšå®¢</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">é™ˆé¹çš„åšå®¢</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ğŸ˜‰</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://chenpeng.pages.dev/2021/08/23/git/git-git%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="CHENPENGBLOG">
      <meta itemprop="description" content="è®°å½•ï¼">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆé¹çš„åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          git-gitå·¥å…·
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-23 00:01:41" itemprop="dateCreated datePublished" datetime="2021-08-23T00:01:41+08:00">2021-08-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-04-14 12:23:47" itemprop="dateModified" datetime="2022-04-14T12:23:47+08:00">2022-04-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>æ¥ä¸‹æ¥ä½ å°†é¢†ç•¥åˆ°ä¸€äº› Git å¯ä»¥å®ç°çš„éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä½ å¯èƒ½å¹¶ä¸ä¼šåœ¨æ—¥å¸¸æ“ä½œä¸­ä½¿ç”¨ï¼Œä½†åœ¨æŸäº›æ—¶å€™ä½ ä¹Ÿè®¸ä¼šéœ€è¦ã€‚</p>
<span id="more"></span>

<h2 id="ä¿®è®¢ç‰ˆæœ¬ï¼ˆRevisionï¼‰é€‰æ‹©"><a href="#ä¿®è®¢ç‰ˆæœ¬ï¼ˆRevisionï¼‰é€‰æ‹©" class="headerlink" title="ä¿®è®¢ç‰ˆæœ¬ï¼ˆRevisionï¼‰é€‰æ‹©"></a>ä¿®è®¢ç‰ˆæœ¬ï¼ˆRevisionï¼‰é€‰æ‹©</h2><p>Git å…è®¸ä½ é€šè¿‡å‡ ç§æ–¹æ³•æ¥æŒ‡æ˜ç‰¹å®šçš„æˆ–è€…ä¸€å®šèŒƒå›´å†…çš„æäº¤ã€‚äº†è§£å®ƒä»¬å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯äº†è§£ä¸€ä¸‹æ€»æ²¡åå¤„ã€‚</p>
<h3 id="å•ä¸ªä¿®è®¢ç‰ˆæœ¬"><a href="#å•ä¸ªä¿®è®¢ç‰ˆæœ¬" class="headerlink" title="å•ä¸ªä¿®è®¢ç‰ˆæœ¬"></a>å•ä¸ªä¿®è®¢ç‰ˆæœ¬</h3><p>æ˜¾ç„¶ä½ å¯ä»¥ä½¿ç”¨ç»™å‡ºçš„ SHA-1 å€¼æ¥æŒ‡æ˜ä¸€æ¬¡æäº¤ï¼Œä¸è¿‡ä¹Ÿæœ‰æ›´åŠ äººæ€§åŒ–çš„æ–¹æ³•æ¥åšåŒæ ·çš„äº‹ã€‚æœ¬èŠ‚æ¦‚è¿°äº†æŒ‡æ˜å•ä¸ªæäº¤çš„è¯¸å¤šæ–¹æ³•ã€‚</p>
<h3 id="ç®€çŸ­çš„SHA"><a href="#ç®€çŸ­çš„SHA" class="headerlink" title="ç®€çŸ­çš„SHA"></a>ç®€çŸ­çš„SHA</h3><p>Git å¾ˆèªæ˜ï¼Œå®ƒèƒ½å¤Ÿé€šè¿‡ä½ æä¾›çš„å‰å‡ ä¸ªå­—ç¬¦æ¥è¯†åˆ«ä½ æƒ³è¦çš„é‚£æ¬¡æäº¤ï¼Œåªè¦ä½ æä¾›çš„é‚£éƒ¨åˆ† SHA-1 ä¸çŸ­äºå››ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”æ²¡æœ‰æ­§ä¹‰â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‰ä»“åº“ä¸­åªæœ‰ä¸€ä¸ªå¯¹è±¡ä»¥è¿™æ®µ SHA-1 å¼€å¤´ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæƒ³è¦æŸ¥çœ‹ä¸€æ¬¡æŒ‡å®šçš„æäº¤ï¼Œå‡è®¾ä½ è¿è¡Œ <code>git log</code> å‘½ä»¤å¹¶æ‰¾åˆ°ä½ å¢åŠ äº†åŠŸèƒ½çš„é‚£æ¬¡æäº¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit 734713bc047d87bf7eac9674765ae793478c50d3</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Fri Jan 2 18:32:33 2009 -0800</span><br><span class="line"></span><br><span class="line">    fixed refs handling, added gc auto, updated tests</span><br><span class="line"></span><br><span class="line">commit d921970aadf03b3cf0e71becdaab3147ba71cdef</span><br><span class="line">Merge: 1c002dd... 35cfb2b...</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 15:08:43 2008 -0800</span><br><span class="line"></span><br><span class="line">    Merge commit &#x27;phedders/rdocs&#x27;</span><br><span class="line"></span><br><span class="line">commit 1c002dd4b536e7479fe34593e72e6c6c1819e53b</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 14:58:32 2008 -0800</span><br><span class="line"></span><br><span class="line">    added some blame and merge stuff</span><br></pre></td></tr></table></figure>

<p>å‡è®¾æ˜¯ <code>1c002dd....</code> ã€‚å¦‚æœä½ æƒ³ <code>git show</code> è¿™æ¬¡æäº¤ï¼Œä¸‹é¢çš„å‘½ä»¤æ˜¯ç­‰ä»·çš„ï¼ˆå‡è®¾ç®€çŸ­çš„ç‰ˆæœ¬æ²¡æœ‰æ­§ä¹‰ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git show 1c002dd4b536e7479fe34593e72e6c6c1819e53b</span><br><span class="line">$ git show 1c002dd4b536e7479f</span><br><span class="line">$ git show 1c002d</span><br></pre></td></tr></table></figure>

<p>Git å¯ä»¥ä¸ºä½ çš„ SHA-1 å€¼ç”Ÿæˆå‡ºç®€çŸ­ä¸”å”¯ä¸€çš„ç¼©å†™ã€‚å¦‚æœä½ ä¼ é€’ <code>--abbrev-commit</code> ç»™ <code>git log</code> å‘½ä»¤ï¼Œè¾“å‡ºç»“æœé‡Œå°±ä¼šä½¿ç”¨ç®€çŸ­ä¸”å”¯ä¸€çš„å€¼ï¼›å®ƒé»˜è®¤ä½¿ç”¨ä¸ƒä¸ªå­—ç¬¦æ¥è¡¨ç¤ºï¼Œä¸è¿‡å¿…è¦æ—¶ä¸ºäº†é¿å… SHA-1 çš„æ­§ä¹‰ï¼Œä¼šå¢åŠ å­—ç¬¦æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --abbrev-commit --pretty=oneline</span><br><span class="line">ca82a6d changed the version number</span><br><span class="line">085bb3b removed unnecessary test code</span><br><span class="line">a11bef0 first commit</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä½¿ç”¨å…«åˆ°åä¸ªå­—ç¬¦æ¥é¿å… SHA-1 æ­§ä¹‰å·²ç»è¶³å¤Ÿäº†ã€‚æœ€å¤§çš„ Git é¡¹ç›®ä¹‹ä¸€ï¼ŒLinux å†…æ ¸ï¼Œç›®å‰ä¹Ÿåªéœ€è¦æœ€é•¿ 40 ä¸ªå­—ç¬¦ä¸­çš„ 12 ä¸ªå­—ç¬¦æ¥ä¿æŒå”¯ä¸€æ€§ã€‚</p>
<h3 id="å…³äº-SHA-1-çš„ç®€çŸ­è¯´æ˜"><a href="#å…³äº-SHA-1-çš„ç®€çŸ­è¯´æ˜" class="headerlink" title="å…³äº SHA-1 çš„ç®€çŸ­è¯´æ˜"></a>å…³äº SHA-1 çš„ç®€çŸ­è¯´æ˜</h3><p>è®¸å¤šäººå¯èƒ½ä¼šæ‹…å¿ƒä¸€ä¸ªé—®é¢˜ï¼šåœ¨éšæœºçš„å¶ç„¶æƒ…å†µä¸‹ï¼Œåœ¨ä»–ä»¬çš„ä»“åº“é‡Œä¼šå‡ºç°ä¸¤ä¸ªå…·æœ‰ç›¸åŒ SHA-1 å€¼çš„å¯¹è±¡ã€‚é‚£ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<p>å¦‚æœä½ çœŸçš„å‘ä»“åº“é‡Œæäº¤äº†ä¸€ä¸ªè·Ÿä¹‹å‰çš„æŸä¸ªå¯¹è±¡å…·æœ‰ç›¸åŒ SHA-1 å€¼çš„å¯¹è±¡ï¼ŒGit å°†ä¼šå‘ç°ä¹‹å‰çš„é‚£ä¸ªå¯¹è±¡å·²ç»å­˜åœ¨åœ¨ Git æ•°æ®åº“ä¸­ï¼Œå¹¶è®¤ä¸ºå®ƒå·²ç»è¢«å†™å…¥äº†ã€‚å¦‚æœä»€ä¹ˆæ—¶å€™ä½ æƒ³å†æ¬¡æ£€å‡ºé‚£ä¸ªå¯¹è±¡æ—¶ï¼Œä½ ä¼šæ€»æ˜¯å¾—åˆ°å…ˆå‰çš„é‚£ä¸ªå¯¹è±¡çš„æ•°æ®ã€‚</p>
<p>ä¸è¿‡ï¼Œä½ åº”è¯¥äº†è§£åˆ°ï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡æ˜¯å¤šä¹ˆå¾®å°ã€‚SHA-1 æ‘˜è¦é•¿åº¦æ˜¯ 20 å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ 160 ä½ã€‚ä¸ºäº†ä¿è¯æœ‰ 50% çš„æ¦‚ç‡å‡ºç°ä¸€æ¬¡å†²çªï¼Œéœ€è¦ 2^80 ä¸ªéšæœºå“ˆå¸Œçš„å¯¹è±¡ï¼ˆè®¡ç®—å†²çªæœºç‡çš„å…¬å¼æ˜¯ <code>p = (n(n-1)/2) * (1/2^160)</code>)ã€‚2^80 æ˜¯ 1.2 x 10^24ï¼Œä¹Ÿå°±æ˜¯ä¸€äº¿äº¿äº¿ï¼Œé‚£æ˜¯åœ°çƒä¸Šæ²™ç²’æ€»æ•°çš„ 1200 å€ã€‚</p>
<p>ç°åœ¨ä¸¾ä¾‹è¯´ä¸€ä¸‹æ€æ ·æ‰èƒ½äº§ç”Ÿä¸€æ¬¡ SHA-1 å†²çªã€‚å¦‚æœåœ°çƒä¸Š 65 äº¿çš„äººç±»éƒ½åœ¨ç¼–ç¨‹ï¼Œæ¯äººæ¯ç§’éƒ½åœ¨äº§ç”Ÿç­‰ä»·äºæ•´ä¸ª Linux å†…æ ¸å†å²ï¼ˆä¸€ç™¾ä¸‡ä¸ª Git å¯¹è±¡ï¼‰çš„ä»£ç ï¼Œå¹¶å°†ä¹‹æäº¤åˆ°ä¸€ä¸ªå·¨å¤§çš„ Git ä»“åº“é‡Œé¢ï¼Œé‚£å°†èŠ±è´¹ 5 å¹´çš„æ—¶é—´æ‰ä¼šäº§ç”Ÿè¶³å¤Ÿçš„å¯¹è±¡ï¼Œä½¿å…¶æ‹¥æœ‰ 50% çš„æ¦‚ç‡äº§ç”Ÿä¸€æ¬¡ SHA-1 å¯¹è±¡å†²çªã€‚è¿™è¦æ¯”ä½ ç¼–ç¨‹å›¢é˜Ÿçš„æˆå‘˜åŒä¸€ä¸ªæ™šä¸Šåœ¨äº’ä¸ç›¸å¹²çš„æ„å¤–ä¸­è¢«ç‹¼è¢­å‡»å¹¶æ€æ­»çš„æœºç‡è¿˜è¦å°ã€‚</p>
<h3 id="åˆ†æ”¯å¼•ç”¨"><a href="#åˆ†æ”¯å¼•ç”¨" class="headerlink" title="åˆ†æ”¯å¼•ç”¨"></a>åˆ†æ”¯å¼•ç”¨</h3><p>æŒ‡æ˜ä¸€æ¬¡æäº¤çš„æœ€ç›´æ¥çš„æ–¹æ³•è¦æ±‚æœ‰ä¸€ä¸ªæŒ‡å‘å®ƒçš„åˆ†æ”¯å¼•ç”¨ã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨ä»»ä½•éœ€è¦ä¸€ä¸ªæäº¤å¯¹è±¡æˆ–è€… SHA-1 å€¼çš„ Git å‘½ä»¤ä¸­ä½¿ç”¨è¯¥åˆ†æ”¯åç§°äº†ã€‚å¦‚æœä½ æƒ³è¦æ˜¾ç¤ºä¸€ä¸ªåˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤çš„å¯¹è±¡ï¼Œä¾‹å¦‚å‡è®¾ <code>topic1</code> åˆ†æ”¯æŒ‡å‘ <code>ca82a6d</code>ï¼Œé‚£ä¹ˆä¸‹é¢çš„å‘½ä»¤æ˜¯ç­‰ä»·çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git show ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">$ git show topic1</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æƒ³çŸ¥é“æŸä¸ªåˆ†æ”¯æŒ‡å‘å“ªä¸ªç‰¹å®šçš„ SHAï¼Œæˆ–è€…æƒ³çœ‹ä»»ä½•ä¸€ä¸ªä¾‹å­ä¸­è¢«ç®€å†™çš„ SHA-1ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå«åš <code>rev-parse</code> çš„ Git æ¢æµ‹å·¥å…·ã€‚åœ¨ç¬¬ 9 ç« ä½ å¯ä»¥çœ‹åˆ°å…³äºæ¢æµ‹å·¥å…·çš„æ›´å¤šä¿¡æ¯ï¼›ç®€å•æ¥è¯´ï¼Œ<code>rev-parse</code> æ˜¯ä¸ºäº†åº•å±‚æ“ä½œè€Œä¸æ˜¯æ—¥å¸¸æ“ä½œè®¾è®¡çš„ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶ä½ æƒ³çœ‹ Git ç°åœ¨åˆ°åº•å¤„äºä»€ä¹ˆçŠ¶æ€æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚è¿™é‡Œä½ å¯ä»¥å¯¹ä½ çš„åˆ†æ”¯è¿æ‰§è¡Œ <code>rev-parse</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git rev-parse topic1</span><br><span class="line">ca82a6dff817ec66f44342007202690a93763949</span><br></pre></td></tr></table></figure>

<h3 id="å¼•ç”¨æ—¥å¿—é‡Œçš„ç®€ç§°"><a href="#å¼•ç”¨æ—¥å¿—é‡Œçš„ç®€ç§°" class="headerlink" title="å¼•ç”¨æ—¥å¿—é‡Œçš„ç®€ç§°"></a>å¼•ç”¨æ—¥å¿—é‡Œçš„ç®€ç§°</h3><p>åœ¨ä½ å·¥ä½œçš„åŒæ—¶ï¼ŒGit åœ¨åå°çš„å·¥ä½œä¹‹ä¸€å°±æ˜¯ä¿å­˜ä¸€ä»½å¼•ç”¨æ—¥å¿—â€”â€”ä¸€ä»½è®°å½•æœ€è¿‘å‡ ä¸ªæœˆä½ çš„ HEAD å’Œåˆ†æ”¯å¼•ç”¨çš„æ—¥å¿—ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>git reflog</code> æ¥æŸ¥çœ‹å¼•ç”¨æ—¥å¿—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">734713b HEAD@&#123;0&#125;: commit: fixed refs handling, added gc auto, updated</span><br><span class="line">d921970 HEAD@&#123;1&#125;: merge phedders/rdocs: Merge made by recursive.</span><br><span class="line">1c002dd HEAD@&#123;2&#125;: commit: added some blame and merge stuff</span><br><span class="line">1c36188 HEAD@&#123;3&#125;: rebase -i (squash): updating HEAD</span><br><span class="line">95df984 HEAD@&#123;4&#125;: commit: # This is a combination of two commits.</span><br><span class="line">1c36188 HEAD@&#123;5&#125;: rebase -i (squash): updating HEAD</span><br><span class="line">7e05da5 HEAD@&#123;6&#125;: rebase -i (pick): updating HEAD</span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡ä½ çš„åˆ†æ”¯é¡¶ç«¯å› ä¸ºæŸäº›åŸå› è¢«ä¿®æ”¹æ—¶ï¼ŒGit å°±ä¼šä¸ºä½ å°†ä¿¡æ¯ä¿å­˜åœ¨è¿™ä¸ªä¸´æ—¶å†å²è®°å½•é‡Œé¢ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä»½æ•°æ®æ¥æŒ‡æ˜æ›´æ—©çš„åˆ†æ”¯ã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹ä»“åº“ä¸­ HEAD åœ¨äº”æ¬¡å‰çš„å€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨å¼•ç”¨æ—¥å¿—çš„è¾“å‡ºä¸­çš„ <code>@&#123;n&#125;</code> å¼•ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD@&#123;5&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªè¯­æ³•æ¥æŸ¥çœ‹æŸä¸ªåˆ†æ”¯åœ¨ä¸€å®šæ—¶é—´å‰çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œæƒ³çœ‹ä½ çš„ <code>master</code> åˆ†æ”¯æ˜¨å¤©åœ¨å“ªï¼Œä½ å¯ä»¥è¾“å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show master@&#123;yesterday&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒå°±ä¼šæ˜¾ç¤ºæ˜¨å¤©åˆ†æ”¯çš„é¡¶ç«¯åœ¨å“ªã€‚è¿™é¡¹æŠ€æœ¯åªå¯¹è¿˜åœ¨ä½ å¼•ç”¨æ—¥å¿—é‡Œçš„æ•°æ®æœ‰ç”¨ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥æŸ¥çœ‹æ¯”å‡ ä¸ªæœˆå‰è¿˜æ—©çš„æäº¤ã€‚</p>
<p>æƒ³è¦çœ‹ç±»ä¼¼äº <code>git log</code> è¾“å‡ºæ ¼å¼çš„å¼•ç”¨æ—¥å¿—ä¿¡æ¯ï¼Œä½ å¯ä»¥è¿è¡Œ <code>git log -g</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git log -g master</span><br><span class="line">commit 734713bc047d87bf7eac9674765ae793478c50d3</span><br><span class="line">Reflog: master@&#123;0&#125; (Scott Chacon &lt;schacon@gmail.com&gt;)</span><br><span class="line">Reflog message: commit: fixed refs handling, added gc auto, updated</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Fri Jan 2 18:32:33 2009 -0800</span><br><span class="line"></span><br><span class="line">    fixed refs handling, added gc auto, updated tests</span><br><span class="line"></span><br><span class="line">commit d921970aadf03b3cf0e71becdaab3147ba71cdef</span><br><span class="line">Reflog: master@&#123;1&#125; (Scott Chacon &lt;schacon@gmail.com&gt;)</span><br><span class="line">Reflog message: merge phedders/rdocs: Merge made by recursive.</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 15:08:43 2008 -0800</span><br><span class="line"></span><br><span class="line">    Merge commit &#x27;phedders/rdocs&#x27;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼•ç”¨æ—¥å¿—ä¿¡æ¯åªå­˜åœ¨äºæœ¬åœ°â€”â€”è¿™æ˜¯ä¸€ä¸ªè®°å½•ä½ åœ¨ä½ è‡ªå·±çš„ä»“åº“é‡Œåšè¿‡ä»€ä¹ˆçš„æ—¥å¿—ã€‚å…¶ä»–äººæ‹·è´çš„ä»“åº“é‡Œçš„å¼•ç”¨æ—¥å¿—ä¸ä¼šå’Œä½ çš„ç›¸åŒï¼›è€Œä½ æ–°å…‹éš†ä¸€ä¸ªä»“åº“çš„æ—¶å€™ï¼Œå¼•ç”¨æ—¥å¿—æ˜¯ç©ºçš„ï¼Œå› ä¸ºä½ åœ¨ä»“åº“é‡Œè¿˜æ²¡æœ‰æ“ä½œã€‚<code>git show HEAD@&#123;2.months.ago&#125;</code> è¿™æ¡å‘½ä»¤åªæœ‰åœ¨ä½ å…‹éš†äº†ä¸€ä¸ªé¡¹ç›®è‡³å°‘ä¸¤ä¸ªæœˆæ—¶æ‰ä¼šæœ‰ç”¨â€”â€”å¦‚æœä½ æ˜¯äº”åˆ†é’Ÿå‰å…‹éš†çš„ä»“åº“ï¼Œé‚£ä¹ˆå®ƒå°†ä¸ä¼šæœ‰ç»“æœè¿”å›ã€‚</p>
<h3 id="ç¥–å…ˆå¼•ç”¨"><a href="#ç¥–å…ˆå¼•ç”¨" class="headerlink" title="ç¥–å…ˆå¼•ç”¨"></a>ç¥–å…ˆå¼•ç”¨</h3><p>å¦ä¸€ç§æŒ‡æ˜æŸæ¬¡æäº¤çš„å¸¸ç”¨æ–¹æ³•æ˜¯é€šè¿‡å®ƒçš„ç¥–å…ˆã€‚å¦‚æœä½ åœ¨å¼•ç”¨æœ€ååŠ ä¸Šä¸€ä¸ª <code>^</code>ï¼ŒGit å°†å…¶ç†è§£ä¸ºæ­¤æ¬¡æäº¤çš„çˆ¶æäº¤ã€‚ å‡è®¾ä½ çš„å·¥ç¨‹å†å²æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=format:&#x27;%h %s&#x27; --graph</span><br><span class="line">* 734713b fixed refs handling, added gc auto, updated tests</span><br><span class="line">*   d921970 Merge commit &#x27;phedders/rdocs&#x27;</span><br><span class="line">|\</span><br><span class="line">| * 35cfb2b Some rdoc changes</span><br><span class="line">* | 1c002dd added some blame and merge stuff</span><br><span class="line">|/</span><br><span class="line">* 1c36188 ignore *.gem</span><br><span class="line">* 9b29157 add open3_detach to gemspec file list</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆï¼Œæƒ³çœ‹ä¸Šä¸€æ¬¡æäº¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>HEAD^</code>ï¼Œæ„æ€æ˜¯â€œHEAD çš„çˆ¶æäº¤â€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD^</span><br><span class="line">commit d921970aadf03b3cf0e71becdaab3147ba71cdef</span><br><span class="line">Merge: 1c002dd... 35cfb2b...</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 15:08:43 2008 -0800</span><br><span class="line"></span><br><span class="line">    Merge commit &#x27;phedders/rdocs&#x27;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¹Ÿå¯ä»¥åœ¨ <code>^</code> åæ·»åŠ ä¸€ä¸ªæ•°å­—â€”â€”ä¾‹å¦‚ï¼Œ<code>d921970^2</code> æ„æ€æ˜¯â€œd921970 çš„ç¬¬äºŒçˆ¶æäº¤â€ã€‚è¿™ç§è¯­æ³•åªåœ¨åˆå¹¶æäº¤æ—¶æœ‰ç”¨ï¼Œå› ä¸ºåˆå¹¶æäº¤å¯èƒ½æœ‰å¤šä¸ªçˆ¶æäº¤ã€‚ç¬¬ä¸€çˆ¶æäº¤æ˜¯ä½ åˆå¹¶æ—¶æ‰€åœ¨åˆ†æ”¯ï¼Œè€Œç¬¬äºŒçˆ¶æäº¤æ˜¯ä½ æ‰€åˆå¹¶çš„åˆ†æ”¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git show d921970^</span><br><span class="line">commit 1c002dd4b536e7479fe34593e72e6c6c1819e53b</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Dec 11 14:58:32 2008 -0800</span><br><span class="line"></span><br><span class="line">    added some blame and merge stuff</span><br><span class="line"></span><br><span class="line">$ git show d921970^2</span><br><span class="line">commit 35cfb2b795a55793d7cc56a6cc2060b4bb732548</span><br><span class="line">Author: Paul Hedderly &lt;paul+git@mjr.org&gt;</span><br><span class="line">Date:   Wed Dec 10 22:22:03 2008 +0000</span><br><span class="line"></span><br><span class="line">    Some rdoc changes</span><br></pre></td></tr></table></figure>

<p>å¦å¤–ä¸€ä¸ªæŒ‡æ˜ç¥–å…ˆæäº¤çš„æ–¹æ³•æ˜¯ <code>~</code>ã€‚è¿™ä¹Ÿæ˜¯æŒ‡å‘ç¬¬ä¸€çˆ¶æäº¤ï¼Œæ‰€ä»¥ <code>HEAD~</code> å’Œ <code>HEAD^</code> æ˜¯ç­‰ä»·çš„ã€‚å½“ä½ æŒ‡å®šæ•°å­—çš„æ—¶å€™å°±æ˜æ˜¾ä¸ä¸€æ ·äº†ã€‚<code>HEAD~2</code> æ˜¯æŒ‡â€œç¬¬ä¸€çˆ¶æäº¤çš„ç¬¬ä¸€çˆ¶æäº¤â€ï¼Œä¹Ÿå°±æ˜¯â€œç¥–çˆ¶æäº¤â€â€”â€”å®ƒä¼šæ ¹æ®ä½ æŒ‡å®šçš„æ¬¡æ•°æ£€ç´¢ç¬¬ä¸€çˆ¶æäº¤ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢åˆ—å‡ºçš„å†å²è®°å½•é‡Œé¢ï¼Œ<code>HEAD~3</code> ä¼šæ˜¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD~3</span><br><span class="line">commit 1c3618887afb5fbcbea25b7c013f4e2114448b8d</span><br><span class="line">Author: Tom Preston-Werner &lt;tom@mojombo.com&gt;</span><br><span class="line">Date:   Fri Nov 7 13:47:59 2008 -0500</span><br><span class="line"></span><br><span class="line">    ignore *.gem</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å†™æˆ <code>HEAD^^^</code>ï¼ŒåŒæ ·æ˜¯ç¬¬ä¸€çˆ¶æäº¤çš„ç¬¬ä¸€çˆ¶æäº¤çš„ç¬¬ä¸€çˆ¶æäº¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD^^^</span><br><span class="line">commit 1c3618887afb5fbcbea25b7c013f4e2114448b8d</span><br><span class="line">Author: Tom Preston-Werner &lt;tom@mojombo.com&gt;</span><br><span class="line">Date:   Fri Nov 7 13:47:59 2008 -0500</span><br><span class="line"></span><br><span class="line">    ignore *.gem</span><br></pre></td></tr></table></figure>

<p>ä½ ä¹Ÿå¯ä»¥æ··åˆä½¿ç”¨è¿™äº›è¯­æ³•â€”â€”ä½ å¯ä»¥é€šè¿‡ <code>HEAD~3^2</code> æŒ‡æ˜å…ˆå‰å¼•ç”¨çš„ç¬¬äºŒçˆ¶æäº¤ï¼ˆå‡è®¾å®ƒæ˜¯ä¸€ä¸ªåˆå¹¶æäº¤ï¼‰ã€‚</p>
<h3 id="æäº¤èŒƒå›´"><a href="#æäº¤èŒƒå›´" class="headerlink" title="æäº¤èŒƒå›´"></a>æäº¤èŒƒå›´</h3><p>ç°åœ¨ä½ å·²ç»å¯ä»¥æŒ‡æ˜å•æ¬¡çš„æäº¤ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ€æ ·æŒ‡æ˜ä¸€å®šèŒƒå›´çš„æäº¤ã€‚è¿™åœ¨ä½ ç®¡ç†åˆ†æ”¯çš„æ—¶å€™å°¤æ˜¾é‡è¦â€”â€”å¦‚æœä½ æœ‰å¾ˆå¤šåˆ†æ”¯ï¼Œä½ å¯ä»¥æŒ‡æ˜èŒƒå›´æ¥åœˆå®šä¸€äº›é—®é¢˜çš„ç­”æ¡ˆï¼Œæ¯”å¦‚ï¼šâ€œè¿™ä¸ªåˆ†æ”¯ä¸Šæˆ‘æœ‰å“ªäº›å·¥ä½œè¿˜æ²¡åˆå¹¶åˆ°ä¸»åˆ†æ”¯çš„ï¼Ÿâ€</p>
<h4 id="åŒç‚¹"><a href="#åŒç‚¹" class="headerlink" title="åŒç‚¹"></a>åŒç‚¹</h4><p>æœ€å¸¸ç”¨çš„æŒ‡æ˜èŒƒå›´çš„æ–¹æ³•æ˜¯åŒç‚¹çš„è¯­æ³•ã€‚è¿™ç§è¯­æ³•ä¸»è¦æ˜¯è®© Git åŒºåˆ†å‡ºå¯ä»ä¸€ä¸ªåˆ†æ”¯ä¸­è·å¾—è€Œä¸èƒ½ä»å¦ä¸€ä¸ªåˆ†æ”¯ä¸­è·å¾—çš„æäº¤ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ç±»ä¼¼äºå›¾ 6-1 çš„æäº¤å†å²ã€‚</p>
<p><img src="/2021/08/23/git/git-git%E5%B7%A5%E5%85%B7/18333fig0601-tn.png" alt="img"><br>å›¾ 6-1. èŒƒå›´é€‰æ‹©çš„æäº¤å†å²å®ä¾‹</p>
<p>ä½ æƒ³è¦æŸ¥çœ‹ä½ çš„è¯•éªŒåˆ†æ”¯ä¸Šå“ªäº›æ²¡æœ‰è¢«æäº¤åˆ°ä¸»åˆ†æ”¯ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½¿ç”¨ <code>master..experiment</code> æ¥è®© Git æ˜¾ç¤ºè¿™äº›æäº¤çš„æ—¥å¿—â€”â€”è¿™å¥è¯çš„æ„æ€æ˜¯â€œæ‰€æœ‰å¯ä»experimentåˆ†æ”¯ä¸­è·å¾—è€Œä¸èƒ½ä»masteråˆ†æ”¯ä¸­è·å¾—çš„æäº¤â€ã€‚ä¸ºäº†ä½¿ä¾‹å­ç®€å•æ˜äº†ï¼Œæˆ‘ä½¿ç”¨äº†å›¾æ ‡ä¸­æäº¤å¯¹è±¡çš„å­—æ¯æ¥ä»£æ›¿çœŸå®æ—¥å¿—çš„è¾“å‡ºï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log master..experiment</span><br><span class="line">D</span><br><span class="line">C</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æƒ³çœ‹ç›¸åçš„â€”â€”æ‰€æœ‰åœ¨ <code>master</code> è€Œä¸åœ¨ <code>experiment</code> ä¸­çš„åˆ†æ”¯â€”â€”ä½ å¯ä»¥äº¤æ¢åˆ†æ”¯çš„åå­—ã€‚<code>experiment..master</code> æ˜¾ç¤ºæ‰€æœ‰å¯åœ¨ <code>master</code> è·å¾—è€Œåœ¨ <code>experiment</code> ä¸­ä¸èƒ½çš„æäº¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log experiment..master</span><br><span class="line">F</span><br><span class="line">E</span><br></pre></td></tr></table></figure>

<p>è¿™åœ¨ä½ æƒ³ä¿æŒ <code>experiment</code> åˆ†æ”¯æœ€æ–°å’Œé¢„è§ˆä½ å°†åˆå¹¶çš„æäº¤çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ã€‚è¿™ä¸ªè¯­æ³•çš„å¦ä¸€ç§å¸¸è§ç”¨é€”æ˜¯æŸ¥çœ‹ä½ å°†æŠŠä»€ä¹ˆæ¨é€åˆ°è¿œç¨‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log origin/master..HEAD</span><br></pre></td></tr></table></figure>

<p>è¿™æ¡å‘½ä»¤æ˜¾ç¤ºä»»ä½•åœ¨ä½ å½“å‰åˆ†æ”¯ä¸Šè€Œä¸åœ¨è¿œç¨‹<code>origin</code> ä¸Šçš„æäº¤ã€‚å¦‚æœä½ è¿è¡Œ <code>git push</code> å¹¶ä¸”çš„ä½ çš„å½“å‰åˆ†æ”¯æ­£åœ¨è·Ÿè¸ª <code>origin/master</code>ï¼Œè¢«<code>git log origin/master..HEAD</code> åˆ—å‡ºçš„æäº¤å°±æ˜¯å°†è¢«ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸Šçš„æäº¤ã€‚ ä½ ä¹Ÿå¯ä»¥ç•™ç©ºè¯­æ³•ä¸­çš„ä¸€è¾¹æ¥è®© Git æ¥å‡å®šå®ƒæ˜¯ HEADã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ <code>git log origin/master..</code> å°†å¾—åˆ°å’Œä¸Šé¢çš„ä¾‹å­ä¸€æ ·çš„ç»“æœâ€”â€” Git ä½¿ç”¨ HEAD æ¥ä»£æ›¿ä¸å­˜åœ¨çš„ä¸€è¾¹ã€‚</p>
<h4 id="å¤šç‚¹"><a href="#å¤šç‚¹" class="headerlink" title="å¤šç‚¹"></a>å¤šç‚¹</h4><p>åŒç‚¹è¯­æ³•å°±åƒé€Ÿè®°ä¸€æ ·æœ‰ç”¨ï¼›ä½†æ˜¯ä½ ä¹Ÿè®¸ä¼šæƒ³é’ˆå¯¹ä¸¤ä¸ªä»¥ä¸Šçš„åˆ†æ”¯æ¥æŒ‡æ˜ä¿®è®¢ç‰ˆæœ¬ï¼Œæ¯”å¦‚æŸ¥çœ‹å“ªäº›æäº¤è¢«åŒ…å«åœ¨æŸäº›åˆ†æ”¯ä¸­çš„ä¸€ä¸ªï¼Œä½†æ˜¯ä¸åœ¨ä½ å½“å‰çš„åˆ†æ”¯ä¸Šã€‚Gitå…è®¸ä½ åœ¨å¼•ç”¨å‰ä½¿ç”¨<code>^</code>å­—ç¬¦æˆ–è€…<code>--not</code>æŒ‡æ˜ä½ ä¸å¸Œæœ›æäº¤è¢«åŒ…å«å…¶ä¸­çš„åˆ†æ”¯ã€‚å› æ­¤ä¸‹é¢ä¸‰ä¸ªå‘½ä»¤æ˜¯ç­‰åŒçš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log refA..refB</span><br><span class="line">$ git log ^refA refB</span><br><span class="line">$ git log refB --not refA</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å¾ˆå¥½ï¼Œå› ä¸ºå®ƒå…è®¸ä½ åœ¨æŸ¥è¯¢ä¸­æŒ‡å®šå¤šäºä¸¤ä¸ªçš„å¼•ç”¨ï¼Œè€Œè¿™æ˜¯åŒç‚¹è¯­æ³•æ‰€åšä¸åˆ°çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³æŸ¥æ‰¾æ‰€æœ‰ä»<code>refA</code>æˆ–<code>refB</code>åŒ…å«çš„ä½†æ˜¯ä¸è¢«<code>refC</code>åŒ…å«çš„æäº¤ï¼Œä½ å¯ä»¥è¾“å…¥ä¸‹é¢ä¸­çš„ä¸€ä¸ª</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git log refA refB ^refC</span><br><span class="line">$ git log refA refB --not refC</span><br></pre></td></tr></table></figure>

<p>è¿™å»ºç«‹äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ä¿®è®¢ç‰ˆæœ¬æŸ¥è¯¢ç³»ç»Ÿï¼Œåº”è¯¥å¯ä»¥å¸®åŠ©ä½ è§£å†³åˆ†æ”¯é‡ŒåŒ…å«äº†ä»€ä¹ˆè¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 id="ä¸‰ç‚¹"><a href="#ä¸‰ç‚¹" class="headerlink" title="ä¸‰ç‚¹"></a>ä¸‰ç‚¹</h4><p>æœ€åä¸€ç§ä¸»è¦çš„èŒƒå›´é€‰æ‹©è¯­æ³•æ˜¯ä¸‰ç‚¹è¯­æ³•ï¼Œè¿™ä¸ªå¯ä»¥æŒ‡å®šè¢«ä¸¤ä¸ªå¼•ç”¨ä¸­çš„ä¸€ä¸ªåŒ…å«ä½†åˆä¸è¢«ä¸¤è€…åŒæ—¶åŒ…å«çš„åˆ†æ”¯ã€‚å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹å›¾6-1é‡Œæ‰€åˆ—çš„æäº¤å†å²çš„ä¾‹å­ã€‚ å¦‚æœä½ æƒ³æŸ¥çœ‹<code>master</code>æˆ–è€…<code>experiment</code>ä¸­åŒ…å«çš„ä½†ä¸æ˜¯ä¸¤è€…å…±æœ‰çš„å¼•ç”¨ï¼Œä½ å¯ä»¥è¿è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log master...experiment</span><br><span class="line">F</span><br><span class="line">E</span><br><span class="line">D</span><br><span class="line">C</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå†æ¬¡ç»™å‡ºä½ æ™®é€šçš„<code>log</code>è¾“å‡ºä½†æ˜¯åªæ˜¾ç¤ºé‚£å››æ¬¡æäº¤çš„ä¿¡æ¯ï¼ŒæŒ‰ç…§ä¼ ç»Ÿçš„æäº¤æ—¥æœŸæ’åˆ—ã€‚</p>
<p>è¿™ç§æƒ…å½¢ä¸‹ï¼Œ<code>log</code>å‘½ä»¤çš„ä¸€ä¸ªå¸¸ç”¨å‚æ•°æ˜¯<code>--left-right</code>ï¼Œå®ƒä¼šæ˜¾ç¤ºæ¯ä¸ªæäº¤åˆ°åº•å¤„äºå“ªä¸€ä¾§çš„åˆ†æ”¯ã€‚è¿™ä½¿å¾—æ•°æ®æ›´åŠ æœ‰ç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log --left-right master...experiment</span><br><span class="line">&lt; F</span><br><span class="line">&lt; E</span><br><span class="line">&gt; D</span><br><span class="line">&gt; C</span><br></pre></td></tr></table></figure>

<p>æœ‰äº†ä»¥ä¸Šå·¥å…·ï¼Œè®©GitçŸ¥é“ä½ è¦å¯Ÿçœ‹å“ªäº›æäº¤å°±å®¹æ˜“å¾—å¤šäº†ã€‚</p>
<h2 id="äº¤äº’å¼æš‚å­˜"><a href="#äº¤äº’å¼æš‚å­˜" class="headerlink" title="äº¤äº’å¼æš‚å­˜"></a>äº¤äº’å¼æš‚å­˜</h2><p>Gitæä¾›äº†å¾ˆå¤šè„šæœ¬æ¥è¾…åŠ©æŸäº›å‘½ä»¤è¡Œä»»åŠ¡ã€‚è¿™é‡Œï¼Œä½ å°†çœ‹åˆ°ä¸€äº›äº¤äº’å¼å‘½ä»¤ï¼Œå®ƒä»¬å¸®åŠ©ä½ æ–¹ä¾¿åœ°æ„å»ºåªåŒ…å«ç‰¹å®šç»„åˆå’Œéƒ¨åˆ†æ–‡ä»¶çš„æäº¤ã€‚åœ¨ä½ ä¿®æ”¹äº†ä¸€å¤§æ‰¹æ–‡ä»¶ç„¶åå†³å®šå°†è¿™äº›å˜æ›´åˆ†å¸ƒåœ¨å‡ ä¸ªå„æœ‰ä¾§é‡çš„æäº¤è€Œä¸æ˜¯å•ä¸ªåˆå¤§åˆä¹±çš„æäº¤æ—¶ï¼Œè¿™äº›å·¥å…·éå¸¸æœ‰ç”¨ã€‚ç”¨è¿™ç§æ–¹æ³•ï¼Œä½ å¯ä»¥ç¡®ä¿ä½ çš„æäº¤åœ¨é€»è¾‘ä¸Šåˆ’åˆ†ä¸ºç›¸åº”çš„å˜æ›´é›†ï¼Œä»¥ä¾¿äºä¾›å’Œä½ ä¸€èµ·å·¥ä½œçš„å¼€å‘è€…å®¡é˜…ã€‚å¦‚æœä½ è¿è¡Œ<code>git add</code>æ—¶åŠ ä¸Š<code>-i</code>æˆ–è€…<code>--interactive</code>é€‰é¡¹ï¼ŒGitå°±è¿›å…¥äº†ä¸€ä¸ªäº¤äº’å¼çš„shellæ¨¡å¼ï¼Œæ˜¾ç¤ºä¸€äº›ç±»ä¼¼äºä¸‹é¢çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git add -i</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:    unchanged        +1/-1 index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šçœ‹åˆ°è¿™ä¸ªå‘½ä»¤ä»¥ä¸€ä¸ªå®Œå…¨ä¸åŒçš„è§†å›¾æ˜¾ç¤ºäº†ä½ çš„æš‚å­˜åŒºâ€”â€”ä¸»è¦æ˜¯ä½ é€šè¿‡<code>git status</code>å¾—åˆ°çš„é‚£äº›ä¿¡æ¯ä½†æ˜¯ç¨å¾®ç®€æ´ä½†ä¿¡æ¯æ›´åŠ ä¸°å¯Œä¸€äº›ã€‚å®ƒåœ¨å·¦ä¾§åˆ—å‡ºäº†ä½ æš‚å­˜çš„å˜æ›´ï¼Œåœ¨å³ä¾§åˆ—å‡ºäº†æœªè¢«æš‚å­˜çš„å˜æ›´ã€‚</p>
<p>åœ¨è¿™ä¹‹åæ˜¯ä¸€ä¸ªå‘½ä»¤åŒºã€‚è¿™é‡Œä½ å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼ŒåŒ…æ‹¬æš‚å­˜æ–‡ä»¶ï¼Œæ’¤å›æ–‡ä»¶ï¼Œæš‚å­˜éƒ¨åˆ†æ–‡ä»¶ï¼ŒåŠ å…¥æœªè¢«è¿½è¸ªçš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹æš‚å­˜æ–‡ä»¶çš„å·®åˆ«ã€‚</p>
<h3 id="æš‚å­˜å’Œæ’¤å›æ–‡ä»¶"><a href="#æš‚å­˜å’Œæ’¤å›æ–‡ä»¶" class="headerlink" title="æš‚å­˜å’Œæ’¤å›æ–‡ä»¶"></a>æš‚å­˜å’Œæ’¤å›æ–‡ä»¶</h3><p>å¦‚æœä½ åœ¨<code>What now&gt;</code>çš„æç¤ºåè¾“å…¥<code>2</code>æˆ–è€…<code>u</code>ï¼Œè¿™ä¸ªè„šæœ¬ä¼šæç¤ºä½ é‚£äº›æ–‡ä»¶ä½ æƒ³è¦æš‚å­˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">What now&gt; 2</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:    unchanged        +1/-1 index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Update&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³æš‚å­˜TODOå’Œindex.htmlï¼Œä½ å¯ä»¥è¾“å…¥ç›¸åº”çš„ç¼–å·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Update&gt;&gt; 1,2</span><br><span class="line">           staged     unstaged path</span><br><span class="line">* 1:    unchanged        +0/-1 TODO</span><br><span class="line">* 2:    unchanged        +1/-1 index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Update&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸ªæ–‡ä»¶æ—è¾¹çš„<code>*</code>è¡¨ç¤ºé€‰ä¸­çš„æ–‡ä»¶å°†è¢«æš‚å­˜ã€‚å¦‚æœä½ åœ¨<code>update&gt;&gt;</code>æç¤ºåç›´æ¥æ•²å…¥å›è½¦ï¼ŒGitä¼šæ›¿ä½ æŠŠæ‰€æœ‰é€‰ä¸­çš„å†…å®¹æš‚å­˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Update&gt;&gt;</span><br><span class="line">updated 2 paths</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +0/-1      nothing TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ å¯ä»¥çœ‹åˆ°TODOå’Œindex.htmlæ–‡ä»¶è¢«æš‚å­˜äº†åŒæ—¶simplegit.rbæ–‡ä»¶ä»ç„¶æœªè¢«æš‚å­˜ã€‚å¦‚æœè¿™æ—¶ä½ æƒ³è¦æ’¤å›TODOæ–‡ä»¶ï¼Œå°±ä½¿ç”¨<code>3</code>æˆ–è€…<code>r</code>ï¼ˆä»£è¡¨revertï¼Œæ¢å¤ï¼‰é€‰é¡¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 3</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +0/-1      nothing TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Revert&gt;&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">* 1:        +0/-1      nothing TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br><span class="line">Revert&gt;&gt; [enter]</span><br><span class="line">reverted one path</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æŸ¥çœ‹Gitçš„çŠ¶æ€ï¼Œä½ ä¼šçœ‹åˆ°ä½ å·²ç»æ’¤å›äº†TODOæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:    unchanged        +5/-1 lib/simplegit.rb</span><br></pre></td></tr></table></figure>

<p>è¦æŸ¥çœ‹ä½ æš‚å­˜å†…å®¹çš„å·®å¼‚ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>6</code>æˆ–è€…<code>d</code>ï¼ˆè¡¨ç¤ºdiffï¼‰å‘½ä»¤ã€‚å®ƒä¼šæ˜¾ç¤ºä½ æš‚å­˜æ–‡ä»¶çš„åˆ—è¡¨ï¼Œä½ å¯ä»¥é€‰æ‹©å…¶ä¸­çš„å‡ ä¸ªï¼Œæ˜¾ç¤ºå…¶è¢«æš‚å­˜çš„å·®å¼‚ã€‚è¿™è·Ÿä½ åœ¨å‘½ä»¤è¡Œä¸‹æŒ‡å®š<code>git diff --cached</code>éå¸¸ç›¸ä¼¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">*** Commands ***</span><br><span class="line">  1: status     2: update      3: revert     4: add untracked</span><br><span class="line">  5: patch      6: diff        7: quit       8: help</span><br><span class="line">What now&gt; 6</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +1/-1      nothing index.html</span><br><span class="line">Review diff&gt;&gt; 1</span><br><span class="line">diff --git a/index.html b/index.html</span><br><span class="line">index 4d07108..4335f49 100644</span><br><span class="line">--- a/index.html</span><br><span class="line">+++ b/index.html</span><br><span class="line">@@ -16,7 +16,7 @@ Date Finder</span><br><span class="line"></span><br><span class="line"> &lt;p id=&quot;out&quot;&gt;...&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">-&lt;div id=&quot;footer&quot;&gt;contact : support@github.com&lt;/div&gt;</span><br><span class="line">+&lt;div id=&quot;footer&quot;&gt;contact : email.support@github.com&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"> &lt;script type=&quot;text/javascript&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¿™äº›åŸºæœ¬å‘½ä»¤ï¼Œä½ å¯ä»¥ä½¿ç”¨äº¤äº’å¼å¢åŠ æ¨¡å¼æ›´åŠ æ–¹ä¾¿åœ°å¤„ç†æš‚å­˜åŒºã€‚</p>
<h3 id="æš‚å­˜è¡¥ä¸"><a href="#æš‚å­˜è¡¥ä¸" class="headerlink" title="æš‚å­˜è¡¥ä¸"></a>æš‚å­˜è¡¥ä¸</h3><p>åªè®©Gitæš‚å­˜æ–‡ä»¶çš„æŸäº›éƒ¨åˆ†è€Œå¿½ç•¥å…¶ä»–ä¹Ÿæ˜¯æœ‰å¯èƒ½çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯¹simplegit.rbæ–‡ä»¶ä½œäº†ä¸¤å¤„ä¿®æ”¹ä½†æ˜¯åªæƒ³æš‚å­˜å…¶ä¸­ä¸€ä¸ªè€Œå¿½ç•¥å¦ä¸€ä¸ªï¼Œåœ¨Gitä¸­å®ç°è¿™ä¸€ç‚¹éå¸¸å®¹æ˜“ã€‚åœ¨äº¤äº’å¼çš„æç¤ºç¬¦ä¸‹ï¼Œè¾“å…¥<code>5</code>æˆ–è€…<code>p</code>ï¼ˆè¡¨ç¤ºpatchï¼Œè¡¥ä¸ï¼‰ã€‚Gitä¼šè¯¢é—®å“ªäº›æ–‡ä»¶ä½ å¸Œæœ›éƒ¨åˆ†æš‚å­˜ï¼›ç„¶åå¯¹äºè¢«é€‰ä¸­æ–‡ä»¶çš„æ¯ä¸€èŠ‚ï¼Œä»–ä¼šé€ä¸ªæ˜¾ç¤ºæ–‡ä»¶çš„å·®å¼‚åŒºå—å¹¶è¯¢é—®ä½ æ˜¯å¦å¸Œæœ›æš‚å­˜ä»–ä»¬ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/lib/simplegit.rb b/lib/simplegit.rb</span><br><span class="line">index dd5ecc4..57399e0 100644</span><br><span class="line">--- a/lib/simplegit.rb</span><br><span class="line">+++ b/lib/simplegit.rb</span><br><span class="line">@@ -22,7 +22,7 @@ class SimpleGit</span><br><span class="line">   end</span><br><span class="line"></span><br><span class="line">   def log(treeish = &#x27;master&#x27;)</span><br><span class="line">-    command(&quot;git log -n 25 #&#123;treeish&#125;&quot;)</span><br><span class="line">+    command(&quot;git log -n 30 #&#123;treeish&#125;&quot;)</span><br><span class="line">   end</span><br><span class="line"></span><br><span class="line">   def blame(path)</span><br><span class="line">Stage this hunk [y,n,a,d,/,j,J,g,e,?]?</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤„ä½ æœ‰å¾ˆå¤šé€‰æ‹©ã€‚è¾“å…¥<code>?</code>å¯ä»¥æ˜¾ç¤ºåˆ—è¡¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Stage this hunk [y,n,a,d,/,j,J,g,e,?]? ?</span><br><span class="line">y - stage this hunk</span><br><span class="line">n - do not stage this hunk</span><br><span class="line">a - stage this and all the remaining hunks in the file</span><br><span class="line">d - do not stage this hunk nor any of the remaining hunks in the file</span><br><span class="line">g - select a hunk to go to</span><br><span class="line">/ - search for a hunk matching the given regex</span><br><span class="line">j - leave this hunk undecided, see next undecided hunk</span><br><span class="line">J - leave this hunk undecided, see next hunk</span><br><span class="line">k - leave this hunk undecided, see previous undecided hunk</span><br><span class="line">K - leave this hunk undecided, see previous hunk</span><br><span class="line">s - split the current hunk into smaller hunks</span><br><span class="line">e - manually edit the current hunk</span><br><span class="line">? - print help</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æƒ³æš‚å­˜å„ä¸ªåŒºå—ï¼Œé€šå¸¸ä½ ä¼šè¾“å…¥<code>y</code>æˆ–è€…<code>n</code>ï¼Œä½†æ˜¯æš‚å­˜ç‰¹å®šæ–‡ä»¶é‡Œçš„å…¨éƒ¨åŒºå—æˆ–è€…æš‚æ—¶è·³è¿‡å¯¹ä¸€ä¸ªåŒºå—çš„å¤„ç†åŒæ ·ä¹Ÿå¾ˆæœ‰ç”¨ã€‚å¦‚æœä½ æš‚å­˜äº†æ–‡ä»¶çš„ä¸€ä¸ªéƒ¨åˆ†è€Œä¿ç•™å¦å¤–ä¸€ä¸ªéƒ¨åˆ†ä¸è¢«æš‚å­˜ï¼Œä½ çš„çŠ¶æ€è¾“å‡ºçœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +0/-1 TODO</span><br><span class="line">  2:        +1/-1      nothing index.html</span><br><span class="line">  3:        +1/-1        +4/-0 lib/simplegit.rb</span><br></pre></td></tr></table></figure>

<p>simplegit.rbçš„çŠ¶æ€éå¸¸æœ‰æ„æ€ã€‚å®ƒæ˜¾ç¤ºæœ‰å‡ è¡Œè¢«æš‚å­˜äº†ï¼Œæœ‰å‡ è¡Œæ²¡æœ‰ã€‚ä½ éƒ¨åˆ†åœ°æš‚å­˜äº†è¿™ä¸ªæ–‡ä»¶ã€‚åœ¨è¿™æ—¶ï¼Œä½ å¯ä»¥é€€å‡ºäº¤äº’å¼è„šæœ¬ç„¶åè¿è¡Œ<code>git commit</code>æ¥æäº¤éƒ¨åˆ†æš‚å­˜çš„æ–‡ä»¶ã€‚</p>
<p>æœ€åä½ ä¹Ÿå¯ä»¥ä¸é€šè¿‡äº¤äº’å¼å¢åŠ çš„æ¨¡å¼æ¥å®ç°éƒ¨åˆ†æ–‡ä»¶æš‚å­˜â€”â€”ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸‹é€šè¿‡<code>git add -p</code>æˆ–è€…<code>git add --patch</code>æ¥å¯åŠ¨åŒæ ·çš„è„šæœ¬ã€‚</p>
<h2 id="å‚¨è—ï¼ˆStashingï¼‰"><a href="#å‚¨è—ï¼ˆStashingï¼‰" class="headerlink" title="å‚¨è—ï¼ˆStashingï¼‰"></a>å‚¨è—ï¼ˆStashingï¼‰</h2><p>ç»å¸¸æœ‰è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿï¼Œå½“ä½ æ­£åœ¨è¿›è¡Œé¡¹ç›®ä¸­æŸä¸€éƒ¨åˆ†çš„å·¥ä½œï¼Œé‡Œé¢çš„ä¸œè¥¿å¤„äºä¸€ä¸ªæ¯”è¾ƒæ‚ä¹±çš„çŠ¶æ€ï¼Œè€Œä½ æƒ³è½¬åˆ°å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œä¸€äº›å·¥ä½œã€‚é—®é¢˜æ˜¯ï¼Œä½ ä¸æƒ³æäº¤è¿›è¡Œäº†ä¸€åŠçš„å·¥ä½œï¼Œå¦åˆ™ä»¥åä½ æ— æ³•å›åˆ°è¿™ä¸ªå·¥ä½œç‚¹ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯<code>git stash</code>å‘½ä»¤ã€‚</p>
<p>â€œâ€˜å‚¨è—â€â€œå¯ä»¥è·å–ä½ å·¥ä½œç›®å½•çš„ä¸­é—´çŠ¶æ€â€”â€”ä¹Ÿå°±æ˜¯ä½ ä¿®æ”¹è¿‡çš„è¢«è¿½è¸ªçš„æ–‡ä»¶å’Œæš‚å­˜çš„å˜æ›´â€”â€”å¹¶å°†å®ƒä¿å­˜åˆ°ä¸€ä¸ªæœªå®Œç»“å˜æ›´çš„å †æ ˆä¸­ï¼Œéšæ—¶å¯ä»¥é‡æ–°åº”ç”¨ã€‚</p>
<h3 id="å‚¨è—ä½ çš„å·¥ä½œ"><a href="#å‚¨è—ä½ çš„å·¥ä½œ" class="headerlink" title="å‚¨è—ä½ çš„å·¥ä½œ"></a>å‚¨è—ä½ çš„å·¥ä½œ</h3><p>ä¸ºäº†æ¼”ç¤ºè¿™ä¸€åŠŸèƒ½ï¼Œä½ å¯ä»¥è¿›å…¥ä½ çš„é¡¹ç›®ï¼Œåœ¨ä¸€äº›æ–‡ä»¶ä¸Šè¿›è¡Œå·¥ä½œï¼Œæœ‰å¯èƒ½è¿˜æš‚å­˜å…¶ä¸­ä¸€ä¸ªå˜æ›´ã€‚å¦‚æœä½ è¿è¡Œ <code>git status</code>ï¼Œä½ å¯ä»¥çœ‹åˆ°ä½ çš„ä¸­é—´çŠ¶æ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">#</span><br><span class="line">#      modified:   index.html</span><br><span class="line">#</span><br><span class="line"># Changes not staged for commit:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#</span><br><span class="line">#      modified:   lib/simplegit.rb</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ æƒ³åˆ‡æ¢åˆ†æ”¯ï¼Œä½†æ˜¯ä½ è¿˜ä¸æƒ³æäº¤ä½ æ­£åœ¨è¿›è¡Œä¸­çš„å·¥ä½œï¼›æ‰€ä»¥ä½ å‚¨è—è¿™äº›å˜æ›´ã€‚ä¸ºäº†å¾€å †æ ˆæ¨é€ä¸€ä¸ªæ–°çš„å‚¨è—ï¼Œåªè¦è¿è¡Œ <code>git stash</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state \</span><br><span class="line">  &quot;WIP on master: 049d078 added the index file&quot;</span><br><span class="line">HEAD is now at 049d078 added the index file</span><br><span class="line">(To restore them type &quot;git stash apply&quot;)</span><br></pre></td></tr></table></figure>

<p>ä½ çš„å·¥ä½œç›®å½•å°±å¹²å‡€äº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶ï¼Œä½ å¯ä»¥æ–¹ä¾¿åœ°åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯å·¥ä½œï¼›ä½ çš„å˜æ›´éƒ½ä¿å­˜åœ¨æ ˆä¸Šã€‚è¦æŸ¥çœ‹ç°æœ‰çš„å‚¨è—ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>git stash list</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on master: 049d078 added the index file</span><br><span class="line">stash@&#123;1&#125;: WIP on master: c264051 Revert &quot;added file_size&quot;</span><br><span class="line">stash@&#123;2&#125;: WIP on master: 21d80a5 added number to log</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œä¹‹å‰å·²ç»è¿›è¡Œäº†ä¸¤æ¬¡å‚¨è—ï¼Œæ‰€ä»¥ä½ å¯ä»¥è®¿é—®åˆ°ä¸‰ä¸ªä¸åŒçš„å‚¨è—ã€‚ä½ å¯ä»¥é‡æ–°åº”ç”¨ä½ åˆšåˆšå®æ–½çš„å‚¨è—ï¼Œæ‰€é‡‡ç”¨çš„å‘½ä»¤å°±æ˜¯ä¹‹å‰åœ¨åŸå§‹çš„ stash å‘½ä»¤çš„å¸®åŠ©è¾“å‡ºé‡Œæç¤ºçš„ï¼š<code>git stash apply</code>ã€‚å¦‚æœä½ æƒ³åº”ç”¨æ›´æ—©çš„å‚¨è—ï¼Œä½ å¯ä»¥é€šè¿‡åå­—æŒ‡å®šå®ƒï¼Œåƒè¿™æ ·ï¼š<code>git stash apply stash@&#123;2&#125;</code>ã€‚å¦‚æœä½ ä¸æŒ‡æ˜ï¼ŒGit é»˜è®¤ä½¿ç”¨æœ€è¿‘çš„å‚¨è—å¹¶å°è¯•åº”ç”¨å®ƒï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply</span><br><span class="line"># On branch master</span><br><span class="line"># Changes not staged for commit:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#</span><br><span class="line">#      modified:   index.html</span><br><span class="line">#      modified:   lib/simplegit.rb</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥çœ‹åˆ° Git é‡æ–°ä¿®æ”¹äº†ä½ æ‰€å‚¨è—çš„é‚£äº›å½“æ—¶å°šæœªæäº¤çš„æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹é‡Œï¼Œä½ å°è¯•åº”ç”¨å‚¨è—çš„å·¥ä½œç›®å½•æ˜¯å¹²å‡€çš„ï¼Œå¹¶ä¸”å±äºåŒä¸€åˆ†æ”¯ï¼›ä½†æ˜¯ä¸€ä¸ªå¹²å‡€çš„å·¥ä½œç›®å½•å’Œåº”ç”¨åˆ°ç›¸åŒçš„åˆ†æ”¯ä¸Šå¹¶ä¸æ˜¯åº”ç”¨å‚¨è—çš„å¿…è¦æ¡ä»¶ã€‚ä½ å¯ä»¥åœ¨å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¸Šä¿ç•™ä¸€ä»½å‚¨è—ï¼Œéšååˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªåˆ†æ”¯ï¼Œå†é‡æ–°åº”ç”¨è¿™äº›å˜æ›´ã€‚åœ¨å·¥ä½œç›®å½•é‡ŒåŒ…å«å·²ä¿®æ”¹å’Œæœªæäº¤çš„æ–‡ä»¶æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥åº”ç”¨å‚¨è—â€”â€”Git ä¼šç»™å‡ºå½’å¹¶å†²çªå¦‚æœæœ‰ä»»ä½•å˜æ›´æ— æ³•å¹²å‡€åœ°è¢«åº”ç”¨ã€‚</p>
<p>å¯¹æ–‡ä»¶çš„å˜æ›´è¢«é‡æ–°åº”ç”¨ï¼Œä½†æ˜¯è¢«æš‚å­˜çš„æ–‡ä»¶æ²¡æœ‰é‡æ–°è¢«æš‚å­˜ã€‚æƒ³é‚£æ ·çš„è¯ï¼Œä½ å¿…é¡»åœ¨è¿è¡Œ <code>git stash apply</code> å‘½ä»¤æ—¶å¸¦ä¸Šä¸€ä¸ª <code>--index</code> çš„é€‰é¡¹æ¥å‘Šè¯‰å‘½ä»¤é‡æ–°åº”ç”¨è¢«æš‚å­˜çš„å˜æ›´ã€‚å¦‚æœä½ æ˜¯è¿™ä¹ˆåšçš„ï¼Œä½ åº”è¯¥å·²ç»å›åˆ°ä½ åŸæ¥çš„ä½ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply --index</span><br><span class="line"># On branch master</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">#</span><br><span class="line">#      modified:   index.html</span><br><span class="line">#</span><br><span class="line"># Changes not staged for commit:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#</span><br><span class="line">#      modified:   lib/simplegit.rb</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>apply é€‰é¡¹åªå°è¯•åº”ç”¨å‚¨è—çš„å·¥ä½œâ€”â€”å‚¨è—çš„å†…å®¹ä»ç„¶åœ¨æ ˆä¸Šã€‚è¦ç§»é™¤å®ƒï¼Œä½ å¯ä»¥è¿è¡Œ <code>git stash drop</code>ï¼ŒåŠ ä¸Šä½ å¸Œæœ›ç§»é™¤çš„å‚¨è—çš„åå­—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on master: 049d078 added the index file</span><br><span class="line">stash@&#123;1&#125;: WIP on master: c264051 Revert &quot;added file_size&quot;</span><br><span class="line">stash@&#123;2&#125;: WIP on master: 21d80a5 added number to log</span><br><span class="line">$ git stash drop stash@&#123;0&#125;</span><br><span class="line">Dropped stash@&#123;0&#125; (364e91f3f268f0900bc3ee613f9f733e82aaed43)</span><br></pre></td></tr></table></figure>

<p>ä½ ä¹Ÿå¯ä»¥è¿è¡Œ <code>git stash pop</code> æ¥é‡æ–°åº”ç”¨å‚¨è—ï¼ŒåŒæ—¶ç«‹åˆ»å°†å…¶ä»å †æ ˆä¸­ç§»èµ°ã€‚</p>
<h3 id="å–æ¶ˆå‚¨è—-Un-applying-a-Stash"><a href="#å–æ¶ˆå‚¨è—-Un-applying-a-Stash" class="headerlink" title="å–æ¶ˆå‚¨è—(Un-applying a Stash)"></a>å–æ¶ˆå‚¨è—(Un-applying a Stash)</h3><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³åº”ç”¨å‚¨è—çš„ä¿®æ”¹ï¼Œåœ¨è¿›è¡Œäº†ä¸€äº›å…¶ä»–çš„ä¿®æ”¹åï¼Œåˆè¦å–æ¶ˆä¹‹å‰æ‰€åº”ç”¨å‚¨è—çš„ä¿®æ”¹ã€‚Gitæ²¡æœ‰æä¾›ç±»ä¼¼äº <code>stash unapply</code> çš„å‘½ä»¤ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å–æ¶ˆè¯¥å‚¨è—çš„è¡¥ä¸è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash show -p stash@&#123;0&#125; | git apply -R</span><br></pre></td></tr></table></figure>

<p>åŒæ ·çš„ï¼Œå¦‚æœä½ æ²’æœ‰æŒ‡å®šå…·ä½“çš„æŸä¸ªå‚¨è—ï¼ŒGit ä¼šé€‰æ‹©æœ€è¿‘çš„å‚¨è—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash show -p | git apply -R</span><br></pre></td></tr></table></figure>

<p>ä½ å¯èƒ½ä¼šæƒ³è¦æ–°å»ºä¸€ä¸ªåˆ¥åï¼Œåœ¨ä½ çš„ Git é‡Œå¢åŠ ä¸€ä¸ª <code>stash-unapply</code> å‘½ä»¤ï¼Œè¿™æ ·æ›´æœ‰æ•ˆç‡ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.stash-unapply &#x27;!git stash show -p | git apply -R&#x27;</span><br><span class="line">$ git stash apply</span><br><span class="line">$ #... work work work</span><br><span class="line">$ git stash-unapply</span><br></pre></td></tr></table></figure>

<h3 id="ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯"><a href="#ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯" class="headerlink" title="ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯"></a>ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯</h3><p>å¦‚æœä½ å‚¨è—äº†ä¸€äº›å·¥ä½œï¼Œæš‚æ—¶ä¸å»ç†ä¼šï¼Œç„¶åç»§ç»­åœ¨ä½ å‚¨è—å·¥ä½œçš„åˆ†æ”¯ä¸Šå·¥ä½œï¼Œä½ åœ¨é‡æ–°åº”ç”¨å·¥ä½œæ—¶å¯èƒ½ä¼šç¢°åˆ°ä¸€äº›é—®é¢˜ã€‚å¦‚æœå°è¯•åº”ç”¨çš„å˜æ›´æ˜¯é’ˆå¯¹ä¸€ä¸ªä½ é‚£ä¹‹åä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œä½ ä¼šç¢°åˆ°ä¸€ä¸ªå½’å¹¶å†²çªå¹¶ä¸”å¿…é¡»å»åŒ–è§£å®ƒã€‚å¦‚æœä½ æƒ³ç”¨æ›´æ–¹ä¾¿çš„æ–¹æ³•æ¥é‡æ–°æ£€éªŒä½ å‚¨è—çš„å˜æ›´ï¼Œä½ å¯ä»¥è¿è¡Œ <code>git stash branch</code>ï¼Œè¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œæ£€å‡ºä½ å‚¨è—å·¥ä½œæ—¶çš„æ‰€å¤„çš„æäº¤ï¼Œé‡æ–°åº”ç”¨ä½ çš„å·¥ä½œï¼Œå¦‚æœæˆåŠŸï¼Œå°†ä¼šä¸¢å¼ƒå‚¨è—ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git stash branch testchanges</span><br><span class="line">Switched to a new branch &quot;testchanges&quot;</span><br><span class="line"># On branch testchanges</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">#</span><br><span class="line">#      modified:   index.html</span><br><span class="line">#</span><br><span class="line"># Changes not staged for commit:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#</span><br><span class="line">#      modified:   lib/simplegit.rb</span><br><span class="line">#</span><br><span class="line">Dropped refs/stash@&#123;0&#125; (f0dfc4d5dc332d1cee34a634182e168c4efc3359)</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æ·å¾„æ¥æ¢å¤å‚¨è—çš„å·¥ä½œç„¶ååœ¨æ–°çš„åˆ†æ”¯ä¸Šç»§ç»­å½“æ—¶çš„å·¥ä½œã€‚</p>
<h2 id="é‡å†™å†å²"><a href="#é‡å†™å†å²" class="headerlink" title="é‡å†™å†å²"></a>é‡å†™å†å²</h2><p>å¾ˆå¤šæ—¶å€™ï¼Œåœ¨ Git ä¸Šå·¥ä½œçš„æ—¶å€™ï¼Œä½ ä¹Ÿè®¸ä¼šç”±äºæŸç§åŸå› æƒ³è¦ä¿®è®¢ä½ çš„æäº¤å†å²ã€‚Git çš„ä¸€ä¸ªå“è¶Šä¹‹å¤„å°±æ˜¯å®ƒå…è®¸ä½ åœ¨æœ€åå¯èƒ½çš„æ—¶åˆ»å†ä½œå†³å®šã€‚ä½ å¯ä»¥åœ¨ä½ å³å°†æäº¤æš‚å­˜åŒºæ—¶å†³å®šä»€ä¹ˆæ–‡ä»¶å½’å…¥å“ªä¸€æ¬¡æäº¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ stash å‘½ä»¤æ¥å†³å®šä½ æš‚æ—¶æç½®çš„å·¥ä½œï¼Œä½ å¯ä»¥é‡å†™å·²ç»å‘ç”Ÿçš„æäº¤ä»¥ä½¿å®ƒä»¬çœ‹èµ·æ¥æ˜¯å¦å¤–ä¸€ç§æ ·å­ã€‚è¿™ä¸ªåŒ…æ‹¬æ”¹å˜æäº¤çš„æ¬¡åºã€æ”¹å˜è¯´æ˜æˆ–è€…ä¿®æ”¹æäº¤ä¸­åŒ…å«çš„æ–‡ä»¶ï¼Œå°†æäº¤å½’å¹¶ã€æ‹†åˆ†æˆ–è€…å®Œå…¨åˆ é™¤â€”â€”è¿™ä¸€åˆ‡åœ¨ä½ å°šæœªå¼€å§‹å°†ä½ çš„å·¥ä½œå’Œåˆ«äººå…±äº«å‰éƒ½æ˜¯å¯ä»¥çš„ã€‚</p>
<p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ ä¼šå­¦åˆ°å¦‚ä½•å®Œæˆè¿™äº›å¾ˆæœ‰ç”¨çš„ä»»åŠ¡ä»¥ä½¿ä½ çš„æäº¤å†å²åœ¨ä½ å°†å…¶å…±äº«ç»™åˆ«äººä¹‹å‰å˜æˆä½ æƒ³è¦çš„æ ·å­ã€‚</p>
<h3 id="æ”¹å˜æœ€è¿‘ä¸€æ¬¡æäº¤"><a href="#æ”¹å˜æœ€è¿‘ä¸€æ¬¡æäº¤" class="headerlink" title="æ”¹å˜æœ€è¿‘ä¸€æ¬¡æäº¤"></a>æ”¹å˜æœ€è¿‘ä¸€æ¬¡æäº¤</h3><p>æ”¹å˜æœ€è¿‘ä¸€æ¬¡æäº¤ä¹Ÿè®¸æ˜¯æœ€å¸¸è§çš„é‡å†™å†å²çš„è¡Œä¸ºã€‚å¯¹äºä½ çš„æœ€è¿‘ä¸€æ¬¡æäº¤ï¼Œä½ ç»å¸¸æƒ³åšä¸¤ä»¶åŸºæœ¬äº‹æƒ…ï¼šæ”¹å˜æäº¤è¯´æ˜ï¼Œæˆ–è€…æ”¹å˜ä½ åˆšåˆšé€šè¿‡å¢åŠ ï¼Œæ”¹å˜ï¼Œåˆ é™¤è€Œè®°å½•çš„å¿«ç…§ã€‚</p>
<p>å¦‚æœä½ åªæƒ³ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤è¯´æ˜ï¼Œè¿™éå¸¸ç®€å•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure>

<p>è¿™ä¼šæŠŠä½ å¸¦å…¥æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé‡Œé¢åŒ…å«äº†ä½ æœ€è¿‘ä¸€æ¬¡æäº¤è¯´æ˜ï¼Œä¾›ä½ ä¿®æ”¹ã€‚å½“ä½ ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼Œè¿™ä¸ªç¼–è¾‘å™¨ä¼šå†™å…¥ä¸€ä¸ªæ–°çš„æäº¤ï¼Œé‡Œé¢åŒ…å«äº†é‚£ä¸ªè¯´æ˜ï¼Œå¹¶ä¸”è®©å®ƒæˆä¸ºä½ çš„æ–°çš„æœ€è¿‘ä¸€æ¬¡æäº¤ã€‚</p>
<p>å¦‚æœä½ å®Œæˆæäº¤ååˆæƒ³ä¿®æ”¹è¢«æäº¤çš„å¿«ç…§ï¼Œå¢åŠ æˆ–è€…ä¿®æ”¹å…¶ä¸­çš„æ–‡ä»¶ï¼Œå¯èƒ½å› ä¸ºä½ æœ€åˆæäº¤æ—¶ï¼Œå¿˜äº†æ·»åŠ ä¸€ä¸ªæ–°å»ºçš„æ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹åŸºæœ¬ä¸Šä¸€æ ·ã€‚ä½ é€šè¿‡ä¿®æ”¹æ–‡ä»¶ç„¶åå¯¹å…¶è¿è¡Œ<code>git add</code>æˆ–å¯¹ä¸€ä¸ªå·²è¢«è®°å½•çš„æ–‡ä»¶è¿è¡Œ<code>git rm</code>ï¼Œéšåçš„<code>git commit --amend</code>ä¼šè·å–ä½ å½“å‰çš„æš‚å­˜åŒºå¹¶å°†å®ƒä½œä¸ºæ–°æäº¤å¯¹åº”çš„å¿«ç…§ã€‚</p>
<p>ä½¿ç”¨è¿™é¡¹æŠ€æœ¯çš„æ—¶å€™ä½ å¿…é¡»å°å¿ƒï¼Œå› ä¸ºä¿®æ­£ä¼šæ”¹å˜æäº¤çš„SHA-1å€¼ã€‚è¿™ä¸ªå¾ˆåƒæ˜¯ä¸€æ¬¡éå¸¸å°çš„rebaseâ€”â€”ä¸è¦åœ¨ä½ æœ€è¿‘ä¸€æ¬¡æäº¤è¢«æ¨é€åè¿˜å»ä¿®æ­£å®ƒã€‚</p>
<h3 id="ä¿®æ”¹å¤šä¸ªæäº¤è¯´æ˜"><a href="#ä¿®æ”¹å¤šä¸ªæäº¤è¯´æ˜" class="headerlink" title="ä¿®æ”¹å¤šä¸ªæäº¤è¯´æ˜"></a>ä¿®æ”¹å¤šä¸ªæäº¤è¯´æ˜</h3><p>è¦ä¿®æ”¹å†å²ä¸­æ›´æ—©çš„æäº¤ï¼Œä½ å¿…é¡»é‡‡ç”¨æ›´å¤æ‚çš„å·¥å…·ã€‚Gitæ²¡æœ‰ä¸€ä¸ªä¿®æ”¹å†å²çš„å·¥å…·ï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨rebaseå·¥å…·æ¥è¡åˆä¸€ç³»åˆ—çš„æäº¤åˆ°å®ƒä»¬åŸæ¥æ‰€åœ¨çš„HEADä¸Šè€Œä¸æ˜¯ç§»åˆ°æ–°çš„ä¸Šã€‚ä¾é è¿™ä¸ªäº¤äº’å¼çš„rebaseå·¥å…·ï¼Œä½ å°±å¯ä»¥åœç•™åœ¨æ¯ä¸€æ¬¡æäº¤åï¼Œå¦‚æœä½ æƒ³ä¿®æ”¹æˆ–æ”¹å˜è¯´æ˜ã€å¢åŠ æ–‡ä»¶æˆ–ä»»ä½•å…¶ä»–äº‹æƒ…ã€‚ä½ å¯ä»¥é€šè¿‡ç»™<code>git rebase</code>å¢åŠ <code>-i</code>é€‰é¡¹æ¥ä»¥äº¤äº’æ–¹å¼åœ°è¿è¡Œrebaseã€‚ä½ å¿…é¡»é€šè¿‡å‘Šè¯‰å‘½ä»¤è¡åˆåˆ°å“ªæ¬¡æäº¤ï¼Œæ¥æŒ‡æ˜ä½ éœ€è¦é‡å†™çš„æäº¤çš„å›æº¯æ·±åº¦ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ æƒ³ä¿®æ”¹æœ€è¿‘ä¸‰æ¬¡çš„æäº¤è¯´æ˜ï¼Œæˆ–è€…å…¶ä¸­ä»»æ„ä¸€æ¬¡ï¼Œä½ å¿…é¡»ç»™<code>git rebase -i</code>æä¾›ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡æ˜ä½ æƒ³è¦ä¿®æ”¹çš„æäº¤çš„çˆ¶æäº¤ï¼Œä¾‹å¦‚<code>HEAD~2</code>æˆ–è€…<code>HEAD~3</code>ã€‚å¯èƒ½è®°ä½<code>~3</code>æ›´åŠ å®¹æ˜“ï¼Œå› ä¸ºä½ æƒ³ä¿®æ”¹æœ€è¿‘ä¸‰æ¬¡æäº¤ï¼›ä½†æ˜¯è¯·è®°ä½ä½ äº‹å®ä¸Šæ‰€æŒ‡çš„æ˜¯å››æ¬¡æäº¤ä¹‹å‰ï¼Œå³ä½ æƒ³ä¿®æ”¹çš„æäº¤çš„çˆ¶æäº¤ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i HEAD~3</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æé†’è¿™æ˜¯ä¸€ä¸ªè¡åˆå‘½ä»¤â€”â€”<code>HEAD~3..HEAD</code>èŒƒå›´å†…çš„æ¯ä¸€æ¬¡æäº¤éƒ½ä¼šè¢«é‡å†™ï¼Œæ— è®ºä½ æ˜¯å¦ä¿®æ”¹è¯´æ˜ã€‚ä¸è¦æ¶µç›–ä½ å·²ç»æ¨é€åˆ°ä¸­å¿ƒæœåŠ¡å™¨çš„æäº¤â€”â€”è¿™ä¹ˆåšä¼šä½¿å…¶ä»–å¼€å‘è€…äº§ç”Ÿæ··ä¹±ï¼Œå› ä¸ºä½ æä¾›äº†åŒæ ·å˜æ›´çš„ä¸åŒç‰ˆæœ¬ã€‚</p>
<p>è¿è¡Œè¿™ä¸ªå‘½ä»¤ä¼šä¸ºä½ çš„æ–‡æœ¬ç¼–è¾‘å™¨æä¾›ä¸€ä¸ªæäº¤åˆ—è¡¨ï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br><span class="line"></span><br><span class="line"># Rebase 710f0f8..a5f4a0d onto 710f0f8</span><br><span class="line">#</span><br><span class="line"># Commands:</span><br><span class="line">#  p, pick = use commit</span><br><span class="line">#  e, edit = use commit, but stop for amending</span><br><span class="line">#  s, squash = use commit, but meld into previous commit</span><br><span class="line">#</span><br><span class="line"># If you remove a line here THAT COMMIT WILL BE LOST.</span><br><span class="line"># However, if you remove everything, the rebase will be aborted.</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ä½ å¾—æ³¨æ„è¿™äº›æäº¤çš„é¡ºåºä¸ä½ é€šå¸¸é€šè¿‡<code>log</code>å‘½ä»¤çœ‹åˆ°çš„æ˜¯ç›¸åçš„ã€‚å¦‚æœä½ è¿è¡Œ<code>log</code>ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™æ ·çš„ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=format:&quot;%h %s&quot; HEAD~3..HEAD</span><br><span class="line">a5f4a0d added cat-file</span><br><span class="line">310154e updated README formatting and added blame</span><br><span class="line">f7f3f6d changed my name a bit</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„è¿™é‡Œçš„å€’åºã€‚äº¤äº’å¼çš„rebaseç»™äº†ä½ ä¸€ä¸ªå³å°†è¿è¡Œçš„è„šæœ¬ã€‚å®ƒä¼šä»ä½ åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡æ˜çš„æäº¤å¼€å§‹(<code>HEAD~3</code>)ç„¶åè‡ªä¸Šè‡³ä¸‹é‡æ’­æ¯æ¬¡æäº¤é‡Œå¼•å…¥çš„å˜æ›´ã€‚å®ƒå°†æœ€æ—©çš„åˆ—åœ¨é¡¶ä¸Šè€Œä¸æ˜¯æœ€è¿‘çš„ï¼Œå› ä¸ºè¿™æ˜¯ç¬¬ä¸€ä¸ªéœ€è¦é‡æ’­çš„ã€‚</p>
<p>ä½ éœ€è¦ä¿®æ”¹è¿™ä¸ªè„šæœ¬æ¥è®©å®ƒåœç•™åœ¨ä½ æƒ³ä¿®æ”¹çš„å˜æ›´ä¸Šã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ åªè¦å°†ä½ æƒ³ä¿®æ”¹çš„æ¯ä¸€æ¬¡æäº¤å‰é¢çš„pickæ”¹ä¸ºeditã€‚ä¾‹å¦‚ï¼Œåªæƒ³ä¿®æ”¹ç¬¬ä¸‰æ¬¡æäº¤è¯´æ˜çš„è¯ï¼Œä½ å°±åƒä¸‹é¢è¿™æ ·ä¿®æ”¹æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">edit f7f3f6d changed my name a bit</span><br><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br></pre></td></tr></table></figure>

<p>å½“ä½ ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼ŒGitä¼šå€’å›è‡³åˆ—è¡¨ä¸­çš„æœ€åä¸€æ¬¡æäº¤ï¼Œç„¶åæŠŠä½ é€åˆ°å‘½ä»¤è¡Œä¸­ï¼ŒåŒæ—¶æ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i HEAD~3</span><br><span class="line">Stopped at 7482e0d... updated the gemspec to hopefully work better</span><br><span class="line">You can amend the commit now, with</span><br><span class="line"></span><br><span class="line">       git commit --amend</span><br><span class="line"></span><br><span class="line">Once youâ€™re satisfied with your changes, run</span><br><span class="line"></span><br><span class="line">       git rebase --continue</span><br></pre></td></tr></table></figure>

<p>è¿™äº›æŒ‡ç¤ºå¾ˆæ˜ç¡®åœ°å‘Šè¯‰äº†ä½ è¯¥å¹²ä»€ä¹ˆã€‚è¾“å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹æäº¤è¯´æ˜ï¼Œé€€å‡ºç¼–è¾‘å™¨ã€‚ç„¶åï¼Œè¿è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase --continue</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨åº”ç”¨å…¶ä»–ä¸¤æ¬¡æäº¤ï¼Œä½ å°±å®Œæˆä»»åŠ¡äº†ã€‚å¦‚æœä½ å°†æ›´å¤šè¡Œçš„ pick æ”¹ä¸º edit ï¼Œä½ å°±èƒ½å¯¹ä½ æƒ³ä¿®æ”¹çš„æäº¤é‡å¤è¿™äº›æ­¥éª¤ã€‚Gitæ¯æ¬¡éƒ½ä¼šåœä¸‹ï¼Œè®©ä½ ä¿®æ­£æäº¤ï¼Œå®Œæˆåç»§ç»­è¿è¡Œã€‚</p>
<h3 id="é‡æ’æäº¤"><a href="#é‡æ’æäº¤" class="headerlink" title="é‡æ’æäº¤"></a>é‡æ’æäº¤</h3><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨äº¤äº’å¼çš„è¡åˆæ¥å½»åº•é‡æ’æˆ–åˆ é™¤æäº¤ã€‚å¦‚æœä½ æƒ³åˆ é™¤â€added cat-fileâ€è¿™ä¸ªæäº¤å¹¶ä¸”ä¿®æ”¹å…¶ä»–ä¸¤æ¬¡æäº¤å¼•å…¥çš„é¡ºåºï¼Œä½ å°†rebaseè„šæœ¬ä»è¿™ä¸ª</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br></pre></td></tr></table></figure>

<p>æ”¹ä¸ºè¿™ä¸ªï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pick 310154e updated README formatting and added blame</span><br><span class="line">pick f7f3f6d changed my name a bit</span><br></pre></td></tr></table></figure>

<p>å½“ä½ ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼ŒGit å°†åˆ†æ”¯å€’å›è‡³è¿™äº›æäº¤çš„çˆ¶æäº¤ï¼Œåº”ç”¨<code>310154e</code>ï¼Œç„¶å<code>f7f3f6d</code>ï¼Œæ¥ç€åœæ­¢ã€‚ä½ æœ‰æ•ˆåœ°ä¿®æ”¹äº†è¿™äº›æäº¤çš„é¡ºåºå¹¶ä¸”å½»åº•åˆ é™¤äº†â€added cat-fileâ€è¿™æ¬¡æäº¤ã€‚</p>
<h3 id="å‹åˆ¶-Squashing-æäº¤"><a href="#å‹åˆ¶-Squashing-æäº¤" class="headerlink" title="å‹åˆ¶(Squashing)æäº¤"></a>å‹åˆ¶(Squashing)æäº¤</h3><p>äº¤äº’å¼çš„è¡åˆå·¥å…·è¿˜å¯ä»¥å°†ä¸€ç³»åˆ—æäº¤å‹åˆ¶ä¸ºå•ä¸€æäº¤ã€‚è„šæœ¬åœ¨ rebase çš„ä¿¡æ¯é‡Œæ”¾äº†ä¸€äº›æœ‰ç”¨çš„æŒ‡ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># Commands:</span><br><span class="line">#  p, pick = use commit</span><br><span class="line">#  e, edit = use commit, but stop for amending</span><br><span class="line">#  s, squash = use commit, but meld into previous commit</span><br><span class="line">#</span><br><span class="line"># If you remove a line here THAT COMMIT WILL BE LOST.</span><br><span class="line"># However, if you remove everything, the rebase will be aborted.</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸ç”¨â€pickâ€æˆ–è€…â€editâ€ï¼Œè€Œæ˜¯æŒ‡å®šâ€squashâ€ï¼ŒGit ä¼šåŒæ—¶åº”ç”¨é‚£ä¸ªå˜æ›´å’Œå®ƒä¹‹å‰çš„å˜æ›´å¹¶å°†æäº¤è¯´æ˜å½’å¹¶ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³å°†è¿™ä¸‰ä¸ªæäº¤åˆå¹¶ä¸ºå•ä¸€æäº¤ï¼Œä½ å¯ä»¥å°†è„šæœ¬ä¿®æ”¹æˆè¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">squash 310154e updated README formatting and added blame</span><br><span class="line">squash a5f4a0d added cat-file</span><br></pre></td></tr></table></figure>

<p>å½“ä½ ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼ŒGit ä¼šåº”ç”¨å…¨éƒ¨ä¸‰æ¬¡å˜æ›´ç„¶åå°†ä½ é€å›ç¼–è¾‘å™¨æ¥å½’å¹¶ä¸‰æ¬¡æäº¤è¯´æ˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># This is a combination of 3 commits.</span><br><span class="line"># The first commit&#x27;s message is:</span><br><span class="line">changed my name a bit</span><br><span class="line"></span><br><span class="line"># This is the 2nd commit message:</span><br><span class="line"></span><br><span class="line">updated README formatting and added blame</span><br><span class="line"></span><br><span class="line"># This is the 3rd commit message:</span><br><span class="line"></span><br><span class="line">added cat-file</span><br></pre></td></tr></table></figure>

<p>å½“ä½ ä¿å­˜ä¹‹åï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªåŒ…å«å‰ä¸‰æ¬¡æäº¤çš„å…¨éƒ¨å˜æ›´çš„å•ä¸€æäº¤ã€‚</p>
<h3 id="æ‹†åˆ†æäº¤"><a href="#æ‹†åˆ†æäº¤" class="headerlink" title="æ‹†åˆ†æäº¤"></a>æ‹†åˆ†æäº¤</h3><p>æ‹†åˆ†æäº¤å°±æ˜¯æ’¤é”€ä¸€æ¬¡æäº¤ï¼Œç„¶åå¤šæ¬¡éƒ¨åˆ†åœ°æš‚å­˜æˆ–æäº¤ç›´åˆ°ç»“æŸã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³å°†ä¸‰æ¬¡æäº¤ä¸­çš„ä¸­é—´ä¸€æ¬¡æ‹†åˆ†ã€‚å°†â€updated README formatting and added blameâ€æ‹†åˆ†æˆä¸¤æ¬¡æäº¤ï¼šç¬¬ä¸€æ¬¡ä¸ºâ€updated README formattingâ€ï¼Œç¬¬äºŒæ¬¡ä¸ºâ€added blameâ€ã€‚ä½ å¯ä»¥åœ¨<code>rebase -i</code>è„šæœ¬ä¸­ä¿®æ”¹ä½ æƒ³æ‹†åˆ†çš„æäº¤å‰çš„æŒ‡ä»¤ä¸ºâ€editâ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick f7f3f6d changed my name a bit</span><br><span class="line">edit 310154e updated README formatting and added blame</span><br><span class="line">pick a5f4a0d added cat-file</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œè¿™ä¸ªè„šæœ¬å°±å°†ä½ å¸¦å…¥å‘½ä»¤è¡Œï¼Œä½ é‡ç½®é‚£æ¬¡æäº¤ï¼Œæå–è¢«é‡ç½®çš„å˜æ›´ï¼Œä»ä¸­åˆ›å»ºå¤šæ¬¡æäº¤ã€‚å½“ä½ ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼ŒGit å€’å›åˆ°åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡æäº¤çš„çˆ¶æäº¤ï¼Œåº”ç”¨ç¬¬ä¸€æ¬¡æäº¤ï¼ˆ<code>f7f3f6d</code>ï¼‰ï¼Œåº”ç”¨ç¬¬äºŒæ¬¡æäº¤ï¼ˆ<code>310154e</code>ï¼‰ï¼Œç„¶åå°†ä½ å¸¦åˆ°æ§åˆ¶å°ã€‚é‚£é‡Œä½ å¯ä»¥ç”¨<code>git reset HEAD^</code>å¯¹é‚£æ¬¡æäº¤è¿›è¡Œä¸€æ¬¡æ··åˆçš„é‡ç½®ï¼Œè¿™å°†æ’¤é”€é‚£æ¬¡æäº¤å¹¶ä¸”å°†ä¿®æ”¹çš„æ–‡ä»¶æ’¤å›ã€‚æ­¤æ—¶ä½ å¯ä»¥æš‚å­˜å¹¶æäº¤æ–‡ä»¶ï¼Œç›´åˆ°ä½ æ‹¥æœ‰å¤šæ¬¡æäº¤ï¼Œç»“æŸåï¼Œè¿è¡Œ<code>git rebase --continue</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD^</span><br><span class="line">$ git add README</span><br><span class="line">$ git commit -m &#x27;updated README formatting&#x27;</span><br><span class="line">$ git add lib/simplegit.rb</span><br><span class="line">$ git commit -m &#x27;added blame&#x27;</span><br><span class="line">$ git rebase --continue</span><br></pre></td></tr></table></figure>

<p>Gitåœ¨è„šæœ¬ä¸­åº”ç”¨äº†æœ€åä¸€æ¬¡æäº¤ï¼ˆ<code>a5f4a0d</code>ï¼‰ï¼Œä½ çš„å†å²çœ‹èµ·æ¥å°±åƒè¿™æ ·äº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git log -4 --pretty=format:&quot;%h %s&quot;</span><br><span class="line">1c002dd added cat-file</span><br><span class="line">9b29157 added blame</span><br><span class="line">35cfb2b updated README formatting</span><br><span class="line">f3cc40e changed my name a bit</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æé†’ï¼Œè¿™ä¼šä¿®æ”¹ä½ åˆ—è¡¨ä¸­çš„æäº¤çš„ SHA å€¼ï¼Œæ‰€ä»¥è¯·ç¡®ä¿è¿™ä¸ªåˆ—è¡¨é‡Œä¸åŒ…å«ä½ å·²ç»æ¨é€åˆ°å…±äº«ä»“åº“çš„æäº¤ã€‚</p>
<h3 id="æ ¸å¼¹çº§é€‰é¡¹-filter-branch"><a href="#æ ¸å¼¹çº§é€‰é¡¹-filter-branch" class="headerlink" title="æ ¸å¼¹çº§é€‰é¡¹: filter-branch"></a>æ ¸å¼¹çº§é€‰é¡¹: filter-branch</h3><p>å¦‚æœä½ æƒ³ç”¨è„šæœ¬çš„æ–¹å¼ä¿®æ”¹å¤§é‡çš„æäº¤ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡å†™å†å²çš„é€‰é¡¹å¯ä»¥ç”¨â€”â€”ä¾‹å¦‚ï¼Œå…¨å±€æ€§åœ°ä¿®æ”¹ç”µå­é‚®ä»¶åœ°å€æˆ–è€…å°†ä¸€ä¸ªæ–‡ä»¶ä»æ‰€æœ‰æäº¤ä¸­åˆ é™¤ã€‚è¿™ä¸ªå‘½ä»¤æ˜¯<code>filter-branch</code>ï¼Œè¿™ä¸ªä¼šå¤§é¢ç§¯åœ°ä¿®æ”¹ä½ çš„å†å²ï¼Œæ‰€ä»¥ä½ å¾ˆæœ‰å¯èƒ½ä¸è¯¥å»ç”¨å®ƒï¼Œé™¤éä½ çš„é¡¹ç›®å°šæœªå…¬å¼€ï¼Œæ²¡æœ‰å…¶ä»–äººåœ¨ä½ å‡†å¤‡ä¿®æ”¹çš„æäº¤çš„åŸºç¡€ä¸Šå·¥ä½œã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ä¸ªå¯ä»¥éå¸¸æœ‰ç”¨ã€‚ä½ ä¼šå­¦ä¹ ä¸€äº›å¸¸è§ç”¨æ³•ï¼Œå€Ÿæ­¤å¯¹å®ƒçš„èƒ½åŠ›æœ‰æ‰€è®¤è¯†ã€‚</p>
<h4 id="ä»æ‰€æœ‰æäº¤ä¸­åˆ é™¤ä¸€ä¸ªæ–‡ä»¶"><a href="#ä»æ‰€æœ‰æäº¤ä¸­åˆ é™¤ä¸€ä¸ªæ–‡ä»¶" class="headerlink" title="ä»æ‰€æœ‰æäº¤ä¸­åˆ é™¤ä¸€ä¸ªæ–‡ä»¶"></a>ä»æ‰€æœ‰æäº¤ä¸­åˆ é™¤ä¸€ä¸ªæ–‡ä»¶</h4><p>è¿™ä¸ªç»å¸¸å‘ç”Ÿã€‚æœ‰äº›äººä¸ç»æ€è€ƒä½¿ç”¨<code>git add .</code>ï¼Œæ„å¤–åœ°æäº¤äº†ä¸€ä¸ªå·¨å¤§çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ æƒ³å°†å®ƒä»æ‰€æœ‰åœ°æ–¹åˆ é™¤ã€‚ä¹Ÿè®¸ä½ ä¸å°å¿ƒæäº¤äº†ä¸€ä¸ªåŒ…å«å¯†ç çš„æ–‡ä»¶ï¼Œè€Œä½ æƒ³è®©ä½ çš„é¡¹ç›®å¼€æºã€‚<code>filter-branch</code>å¤§æ¦‚ä¼šæ˜¯ä½ ç”¨æ¥æ¸…ç†æ•´ä¸ªå†å²çš„å·¥å…·ã€‚è¦ä»æ•´ä¸ªå†å²ä¸­åˆ é™¤ä¸€ä¸ªåå«password.txtçš„æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨<code>filter-branch</code>ä¸Šä½¿ç”¨<code>--tree-filter</code>é€‰é¡¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git filter-branch --tree-filter &#x27;rm -f passwords.txt&#x27; HEAD</span><br><span class="line">Rewrite 6b9b3cf04e7c5686a9cb838c3f36a8cb6a0fc2bd (21/21)</span><br><span class="line">Ref &#x27;refs/heads/master&#x27; was rewritten</span><br></pre></td></tr></table></figure>

<p><code>--tree-filter</code>é€‰é¡¹ä¼šåœ¨æ¯æ¬¡æ£€å‡ºé¡¹ç›®æ—¶å…ˆæ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ç„¶åé‡æ–°æäº¤ç»“æœã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ ä¼šåœ¨æ‰€æœ‰å¿«ç…§ä¸­åˆ é™¤ä¸€ä¸ªåå« password.txt çš„æ–‡ä»¶ï¼Œæ— è®ºå®ƒæ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä½ æƒ³åˆ é™¤æ‰€æœ‰ä¸å°å¿ƒæäº¤ä¸Šå»çš„ç¼–è¾‘å™¨å¤‡ä»½æ–‡ä»¶ï¼Œä½ å¯ä»¥è¿è¡Œç±»ä¼¼<code>git filter-branch --tree-filter &quot;find * -type f -name &#39;*~&#39; -delete&quot; HEAD</code>çš„å‘½ä»¤ã€‚</p>
<p>ä½ å¯ä»¥è§‚å¯Ÿåˆ° Git é‡å†™ç›®å½•æ ‘å¹¶ä¸”æäº¤ï¼Œç„¶åå°†åˆ†æ”¯æŒ‡é’ˆç§»åˆ°æœ«å°¾ã€‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åŠæ³•æ˜¯åœ¨ä¸€ä¸ªæµ‹è¯•åˆ†æ”¯ä¸Šåšè¿™äº›ç„¶ååœ¨ä½ ç¡®å®šäº§ç‰©çœŸçš„æ˜¯ä½ æ‰€è¦çš„ä¹‹åï¼Œå† hard-reset ä½ çš„ä¸»åˆ†æ”¯ã€‚è¦åœ¨ä½ æ‰€æœ‰çš„åˆ†æ”¯ä¸Šè¿è¡Œ<code>filter-branch</code>çš„è¯ï¼Œä½ å¯ä»¥ä¼ é€’ä¸€ä¸ª<code>--all</code>ç»™å‘½ä»¤ã€‚</p>
<h4 id="å°†ä¸€ä¸ªå­ç›®å½•è®¾ç½®ä¸ºæ–°çš„æ ¹ç›®å½•"><a href="#å°†ä¸€ä¸ªå­ç›®å½•è®¾ç½®ä¸ºæ–°çš„æ ¹ç›®å½•" class="headerlink" title="å°†ä¸€ä¸ªå­ç›®å½•è®¾ç½®ä¸ºæ–°çš„æ ¹ç›®å½•"></a>å°†ä¸€ä¸ªå­ç›®å½•è®¾ç½®ä¸ºæ–°çš„æ ¹ç›®å½•</h4><p>å‡è®¾ä½ å®Œæˆäº†ä»å¦å¤–ä¸€ä¸ªä»£ç æ§åˆ¶ç³»ç»Ÿçš„å¯¼å…¥å·¥ä½œï¼Œå¾—åˆ°äº†ä¸€äº›æ²¡æœ‰æ„ä¹‰çš„å­ç›®å½•ï¼ˆtrunk, tagsç­‰ç­‰ï¼‰ã€‚å¦‚æœä½ æƒ³è®©<code>trunk</code>å­ç›®å½•æˆä¸ºæ¯ä¸€æ¬¡æäº¤çš„æ–°çš„é¡¹ç›®æ ¹ç›®å½•ï¼Œ<code>filter-branch</code>ä¹Ÿå¯ä»¥å¸®ä½ åšåˆ°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git filter-branch --subdirectory-filter trunk HEAD</span><br><span class="line">Rewrite 856f0bf61e41a27326cdae8f09fe708d679f596f (12/12)</span><br><span class="line">Ref &#x27;refs/heads/master&#x27; was rewritten</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•å°±æ˜¯<code>trunk</code>å­ç›®å½•äº†ã€‚Git ä¼šè‡ªåŠ¨åœ°åˆ é™¤ä¸å¯¹è¿™ä¸ªå­ç›®å½•äº§ç”Ÿå½±å“çš„æäº¤ã€‚</p>
<h4 id="å…¨å±€æ€§åœ°æ›´æ¢ç”µå­é‚®ä»¶åœ°å€"><a href="#å…¨å±€æ€§åœ°æ›´æ¢ç”µå­é‚®ä»¶åœ°å€" class="headerlink" title="å…¨å±€æ€§åœ°æ›´æ¢ç”µå­é‚®ä»¶åœ°å€"></a>å…¨å±€æ€§åœ°æ›´æ¢ç”µå­é‚®ä»¶åœ°å€</h4><p>å¦ä¸€ä¸ªå¸¸è§çš„æ¡ˆä¾‹æ˜¯ä½ åœ¨å¼€å§‹æ—¶å¿˜äº†è¿è¡Œ<code>git config</code>æ¥è®¾ç½®ä½ çš„å§“åå’Œç”µå­é‚®ä»¶åœ°å€ï¼Œä¹Ÿè®¸ä½ æƒ³å¼€æºä¸€ä¸ªé¡¹ç›®ï¼ŒæŠŠä½ æ‰€æœ‰çš„å·¥ä½œç”µå­é‚®ä»¶åœ°å€ä¿®æ”¹ä¸ºä¸ªäººåœ°å€ã€‚æ— è®ºå“ªç§æƒ…å†µä½ éƒ½å¯ä»¥ç”¨<code>filter-branch</code>æ¥æ›´æ¢å¤šæ¬¡æäº¤é‡Œçš„ç”µå­é‚®ä»¶åœ°å€ã€‚ä½ å¿…é¡»å°å¿ƒä¸€äº›ï¼Œåªæ”¹å˜å±äºä½ çš„ç”µå­é‚®ä»¶åœ°å€ï¼Œæ‰€ä»¥ä½ ä½¿ç”¨<code>--commit-filter</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git filter-branch --commit-filter &#x27;</span><br><span class="line">        if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;schacon@localhost&quot; ];</span><br><span class="line">        then</span><br><span class="line">                GIT_AUTHOR_NAME=&quot;Scott Chacon&quot;;</span><br><span class="line">                GIT_AUTHOR_EMAIL=&quot;schacon@example.com&quot;;</span><br><span class="line">                git commit-tree &quot;$@&quot;;</span><br><span class="line">        else</span><br><span class="line">                git commit-tree &quot;$@&quot;;</span><br><span class="line">        fi&#x27; HEAD</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¼šéå†å¹¶é‡å†™æ‰€æœ‰æäº¤ä½¿ä¹‹æ‹¥æœ‰ä½ çš„æ–°åœ°å€ã€‚å› ä¸ºæäº¤é‡ŒåŒ…å«äº†å®ƒä»¬çš„çˆ¶æäº¤çš„SHA-1å€¼ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šä¿®æ”¹ä½ çš„å†å²ä¸­çš„æ‰€æœ‰æäº¤ï¼Œè€Œä¸ä»…ä»…æ˜¯åŒ…å«äº†åŒ¹é…çš„ç”µå­é‚®ä»¶åœ°å€çš„é‚£äº›ã€‚</p>
<h2 id="ä½¿ç”¨-Git-è°ƒè¯•"><a href="#ä½¿ç”¨-Git-è°ƒè¯•" class="headerlink" title="ä½¿ç”¨ Git è°ƒè¯•"></a>ä½¿ç”¨ Git è°ƒè¯•</h2><p>Git åŒæ ·æä¾›äº†ä¸€äº›å·¥å…·æ¥å¸®åŠ©ä½ è°ƒè¯•é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ã€‚ç”±äº Git è¢«è®¾è®¡ä¸ºå¯åº”ç”¨äºå‡ ä¹ä»»ä½•ç±»å‹çš„é¡¹ç›®ï¼Œè¿™äº›å·¥å…·æ˜¯é€šç”¨å‹ï¼Œä½†æ˜¯åœ¨é‡åˆ°é—®é¢˜æ—¶å¯ä»¥ç»å¸¸å¸®åŠ©ä½ æŸ¥æ‰¾ç¼ºé™·æ‰€åœ¨ã€‚</p>
<h3 id="æ–‡ä»¶æ ‡æ³¨"><a href="#æ–‡ä»¶æ ‡æ³¨" class="headerlink" title="æ–‡ä»¶æ ‡æ³¨"></a>æ–‡ä»¶æ ‡æ³¨</h3><p>å¦‚æœä½ åœ¨è¿½è¸ªä»£ç ä¸­çš„ç¼ºé™·æƒ³çŸ¥é“è¿™æ˜¯ä»€ä¹ˆæ—¶å€™ä¸ºä»€ä¹ˆè¢«å¼•è¿›æ¥çš„ï¼Œæ–‡ä»¶æ ‡æ³¨ä¼šæ˜¯ä½ çš„æœ€ä½³å·¥å…·ã€‚å®ƒä¼šæ˜¾ç¤ºæ–‡ä»¶ä¸­å¯¹æ¯ä¸€è¡Œè¿›è¡Œä¿®æ”¹çš„æœ€è¿‘ä¸€æ¬¡æäº¤ã€‚å› æ­¤ï¼Œå¦‚æœä½ å‘ç°è‡ªå·±ä»£ç ä¸­çš„ä¸€ä¸ªæ–¹æ³•å­˜åœ¨ç¼ºé™·ï¼Œä½ å¯ä»¥ç”¨<code>git blame</code>æ¥æ ‡æ³¨æ–‡ä»¶ï¼ŒæŸ¥çœ‹é‚£ä¸ªæ–¹æ³•çš„æ¯ä¸€è¡Œåˆ†åˆ«æ˜¯ç”±è°åœ¨å“ªä¸€å¤©ä¿®æ”¹çš„ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†<code>-L</code>é€‰é¡¹æ¥é™åˆ¶è¾“å‡ºèŒƒå›´åœ¨ç¬¬12è‡³22è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git blame -L 12,22 simplegit.rb</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 12)  def show(tree = &#x27;master&#x27;)</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 13)   command(&quot;git show #&#123;tree&#125;&quot;)</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 14)  end</span><br><span class="line">^4832fe2 (Scott Chacon  2008-03-15 10:31:28 -0700 15)</span><br><span class="line">9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 16)  def log(tree = &#x27;master&#x27;)</span><br><span class="line">79eaf55d (Scott Chacon  2008-04-06 10:15:08 -0700 17)   command(&quot;git log #&#123;tree&#125;&quot;)</span><br><span class="line">9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 18)  end</span><br><span class="line">9f6560e4 (Scott Chacon  2008-03-17 21:52:20 -0700 19)</span><br><span class="line">42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 20)  def blame(path)</span><br><span class="line">42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 21)   command(&quot;git blame #&#123;path&#125;&quot;)</span><br><span class="line">42cf2861 (Magnus Chacon 2008-04-13 10:45:01 -0700 22)  end</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ç¬¬ä¸€ä¸ªåŸŸé‡Œæ˜¯æœ€åä¸€æ¬¡ä¿®æ”¹è¯¥è¡Œçš„é‚£æ¬¡æäº¤çš„ SHA-1 å€¼ã€‚æ¥ä¸‹å»çš„ä¸¤ä¸ªåŸŸæ˜¯ä»é‚£æ¬¡æäº¤ä¸­æŠ½å–çš„å€¼â€”â€”ä½œè€…å§“åå’Œæ—¥æœŸâ€”â€”æ‰€ä»¥ä½ å¯ä»¥æ–¹ä¾¿åœ°è·çŸ¥è°åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹äº†è¿™ä¸€è¡Œã€‚åœ¨è¿™åé¢æ˜¯è¡Œå·å’Œæ–‡ä»¶çš„å†…å®¹ã€‚è¯·æ³¨æ„<code>^4832fe2</code>æäº¤çš„é‚£äº›è¡Œï¼Œè¿™äº›æŒ‡çš„æ˜¯æ–‡ä»¶æœ€åˆæäº¤çš„é‚£äº›è¡Œã€‚é‚£ä¸ªæäº¤æ˜¯æ–‡ä»¶ç¬¬ä¸€æ¬¡è¢«åŠ å…¥è¿™ä¸ªé¡¹ç›®æ—¶å­˜åœ¨çš„ï¼Œè‡ªé‚£ä»¥åæœªè¢«ä¿®æ”¹è¿‡ã€‚è¿™ä¼šå¸¦æ¥å°å°çš„å›°æƒ‘ï¼Œå› ä¸ºä½ å·²ç»è‡³å°‘çœ‹åˆ°äº†Gitä½¿ç”¨<code>^</code>æ¥ä¿®é¥°ä¸€ä¸ªæäº¤çš„SHAå€¼çš„ä¸‰ç§ä¸åŒçš„æ„ä¹‰ï¼Œä½†è¿™é‡Œç¡®å®å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚</p>
<p>å¦ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…æ˜¯åœ¨ Git ä¸­ä½ ä¸éœ€è¦æ˜¾å¼åœ°è®°å½•æ–‡ä»¶çš„é‡å‘½åã€‚å®ƒä¼šè®°å½•å¿«ç…§ç„¶åæ ¹æ®ç°å®å°è¯•æ‰¾å‡ºéšå¼çš„é‡å‘½ååŠ¨ä½œã€‚è¿™å…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ç‰¹æ€§å°±æ˜¯ä½ å¯ä»¥è®©å®ƒæ‰¾å‡ºæ‰€æœ‰çš„ä»£ç ç§»åŠ¨ã€‚å¦‚æœä½ åœ¨<code>git blame</code>ååŠ ä¸Š<code>-C</code>ï¼ŒGitä¼šåˆ†æä½ åœ¨æ ‡æ³¨çš„æ–‡ä»¶ç„¶åå°è¯•æ‰¾å‡ºå…¶ä¸­ä»£ç ç‰‡æ®µçš„åŸå§‹å‡ºå¤„ï¼Œå¦‚æœå®ƒæ˜¯ä»å…¶ä»–åœ°æ–¹æ‹·è´è¿‡æ¥çš„è¯ã€‚æœ€è¿‘ï¼Œæˆ‘åœ¨å°†ä¸€ä¸ªåå«<code>GITServerHandler.m</code>çš„æ–‡ä»¶åˆ†è§£åˆ°å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯<code>GITPackUpload.m</code>ã€‚é€šè¿‡å¯¹<code>GITPackUpload.m</code>æ‰§è¡Œå¸¦<code>-C</code>å‚æ•°çš„blameå‘½ä»¤ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°ä»£ç å—çš„åŸå§‹å‡ºå¤„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git blame -C -L 141,153 GITPackUpload.m</span><br><span class="line">f344f58d GITServerHandler.m (Scott 2009-01-04 141)</span><br><span class="line">f344f58d GITServerHandler.m (Scott 2009-01-04 142) - (void) gatherObjectShasFromC</span><br><span class="line">f344f58d GITServerHandler.m (Scott 2009-01-04 143) &#123;</span><br><span class="line">70befddd GITServerHandler.m (Scott 2009-03-22 144)         //NSLog(@&quot;GATHER COMMI</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 145)</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 146)         NSString *parentSha;</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 147)         GITCommit *commit = [g</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 148)</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 149)         //NSLog(@&quot;GATHER COMMI</span><br><span class="line">ad11ac80 GITPackUpload.m    (Scott 2009-03-24 150)</span><br><span class="line">56ef2caf GITServerHandler.m (Scott 2009-01-05 151)         if(commit) &#123;</span><br><span class="line">56ef2caf GITServerHandler.m (Scott 2009-01-05 152)                 [refDict setOb</span><br><span class="line">56ef2caf GITServerHandler.m (Scott 2009-01-05 153)</span><br></pre></td></tr></table></figure>

<p>è¿™çœŸçš„éå¸¸æœ‰ç”¨ã€‚é€šå¸¸ï¼Œä½ ä¼šæŠŠä½ æ‹·è´ä»£ç çš„é‚£æ¬¡æäº¤ä½œä¸ºåŸå§‹æäº¤ï¼Œå› ä¸ºè¿™æ˜¯ä½ åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°é‚£å‡ è¡Œã€‚Gitå¯ä»¥å‘Šè¯‰ä½ ç¼–å†™é‚£äº›è¡Œçš„åŸå§‹æäº¤ï¼Œå³ä¾¿æ˜¯åœ¨å¦ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚</p>
<h3 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h3><p>æ ‡æ³¨æ–‡ä»¶åœ¨ä½ çŸ¥é“é—®é¢˜æ˜¯å“ªé‡Œå¼•å…¥çš„æ—¶å€™ä¼šæœ‰å¸®åŠ©ã€‚å¦‚æœä½ ä¸çŸ¥é“ï¼Œå¹¶ä¸”è‡ªä¸Šæ¬¡ä»£ç å¯ç”¨çš„çŠ¶æ€å·²ç»ç»å†äº†ä¸Šç™¾æ¬¡çš„æäº¤ï¼Œä½ å¯èƒ½å°±è¦æ±‚åŠ©äº<code>bisect</code>å‘½ä»¤äº†ã€‚<code>bisect</code>ä¼šåœ¨ä½ çš„æäº¤å†å²ä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾æ¥å°½å¿«åœ°ç¡®å®šå“ªä¸€æ¬¡æäº¤å¼•å…¥äº†é”™è¯¯ã€‚</p>
<p>ä¾‹å¦‚ä½ åˆšåˆšæ¨é€äº†ä¸€ä¸ªä»£ç å‘å¸ƒç‰ˆæœ¬åˆ°äº§å“ç¯å¢ƒä¸­ï¼Œå¯¹ä»£ç ä¸ºä»€ä¹ˆä¼šè¡¨ç°æˆé‚£æ ·ç™¾æ€ä¸å¾—å…¶è§£ã€‚ä½ å›åˆ°ä½ çš„ä»£ç ä¸­ï¼Œè¿˜å¥½ä½ å¯ä»¥é‡ç°é‚£ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°åœ¨å“ªé‡Œã€‚ä½ å¯ä»¥å¯¹ä»£ç æ‰§è¡Œbisectæ¥å¯»æ‰¾ã€‚é¦–å…ˆä½ è¿è¡Œ<code>git bisect start</code>å¯åŠ¨ï¼Œç„¶åä½ ç”¨<code>git bisect bad</code>æ¥å‘Šè¯‰ç³»ç»Ÿå½“å‰çš„æäº¤å·²ç»æœ‰é—®é¢˜äº†ã€‚ç„¶åä½ å¿…é¡»å‘Šè¯‰bisectå·²çŸ¥çš„æœ€åä¸€æ¬¡æ­£å¸¸çŠ¶æ€æ˜¯å“ªæ¬¡æäº¤ï¼Œä½¿ç”¨<code>git bisect good [good_commit]</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect start</span><br><span class="line">$ git bisect bad</span><br><span class="line">$ git bisect good v1.0</span><br><span class="line">Bisecting: 6 revisions left to test after this</span><br><span class="line">[ecb6e1bc347ccecc5f9350d878ce677feb13d3b2] error handling on repo</span><br></pre></td></tr></table></figure>

<p>Git å‘ç°åœ¨ä½ æ ‡è®°ä¸ºæ­£å¸¸çš„æäº¤(v1.0)å’Œå½“å‰çš„é”™è¯¯ç‰ˆæœ¬ä¹‹é—´æœ‰å¤§çº¦12æ¬¡æäº¤ï¼Œäºæ˜¯å®ƒæ£€å‡ºä¸­é—´çš„ä¸€ä¸ªã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥è¿è¡Œæµ‹è¯•æ¥æ£€æŸ¥é—®é¢˜æ˜¯å¦å­˜åœ¨äºè¿™æ¬¡æäº¤ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå®ƒæ˜¯åœ¨è¿™ä¸ªä¸­é—´æäº¤ä¹‹å‰çš„æŸä¸€æ¬¡å¼•å…¥çš„ï¼›å¦‚æœå¦ï¼Œé‚£ä¹ˆé—®é¢˜æ˜¯åœ¨ä¸­é—´æäº¤ä¹‹åå¼•å…¥çš„ã€‚å‡è®¾è¿™é‡Œæ˜¯æ²¡æœ‰é”™è¯¯çš„ï¼Œé‚£ä¹ˆä½ å°±é€šè¿‡<code>git bisect good</code>æ¥å‘Šè¯‰ Git ç„¶åç»§ç»­ä½ çš„æ—…ç¨‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect good</span><br><span class="line">Bisecting: 3 revisions left to test after this</span><br><span class="line">[b047b02ea83310a70fd603dc8cd7a6cd13d15c04] secure this thing</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ åœ¨å¦å¤–ä¸€ä¸ªæäº¤ä¸Šäº†ï¼Œåœ¨ä½ åˆšåˆšæµ‹è¯•é€šè¿‡çš„å’Œä¸€ä¸ªé”™è¯¯æäº¤çš„ä¸­ç‚¹å¤„ã€‚ä½ å†æ¬¡è¿è¡Œæµ‹è¯•ç„¶åå‘ç°è¿™æ¬¡æäº¤æ˜¯é”™è¯¯çš„ï¼Œå› æ­¤ä½ é€šè¿‡<code>git bisect bad</code>æ¥å‘Šè¯‰Gitï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect bad</span><br><span class="line">Bisecting: 1 revisions left to test after this</span><br><span class="line">[f71ce38690acf49c1f3c9bea38e09d82a5ce6014] drop exceptions table</span><br></pre></td></tr></table></figure>

<p>è¿™æ¬¡æäº¤æ˜¯å¥½çš„ï¼Œé‚£ä¹ˆ Git å°±è·å¾—äº†ç¡®å®šé—®é¢˜å¼•å…¥ä½ç½®æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚å®ƒå‘Šè¯‰ä½ ç¬¬ä¸€ä¸ªé”™è¯¯æäº¤çš„ SHA-1 å€¼å¹¶ä¸”æ˜¾ç¤ºä¸€äº›æäº¤è¯´æ˜ä»¥åŠå“ªäº›æ–‡ä»¶åœ¨é‚£æ¬¡æäº¤é‡Œä¿®æ”¹è¿‡ï¼Œè¿™æ ·ä½ å¯ä»¥æ‰¾å‡ºç¼ºé™·è¢«å¼•å…¥çš„æ ¹æºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect good</span><br><span class="line">b047b02ea83310a70fd603dc8cd7a6cd13d15c04 is first bad commit</span><br><span class="line">commit b047b02ea83310a70fd603dc8cd7a6cd13d15c04</span><br><span class="line">Author: PJ Hyett &lt;pjhyett@example.com&gt;</span><br><span class="line">Date:   Tue Jan 27 14:48:32 2009 -0800</span><br><span class="line"></span><br><span class="line">    secure this thing</span><br><span class="line"></span><br><span class="line">:040000 040000 40ee3e7821b895e52c1695092db9bdc4c61d1730</span><br><span class="line">f24d3c6ebcfc639b1a3814550e62d60b8e68a8e4 M  config</span><br></pre></td></tr></table></figure>

<p>å½“ä½ å®Œæˆä¹‹åï¼Œä½ åº”è¯¥è¿è¡Œ<code>git bisect reset</code>æ¥é‡è®¾ä½ çš„HEADåˆ°ä½ å¼€å§‹å‰çš„åœ°æ–¹ï¼Œå¦åˆ™ä½ ä¼šå¤„äºä¸€ä¸ªè¯¡å¼‚çš„åœ°æ–¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect reset</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥ä¸Šç™¾çš„æäº¤ï¼Œåœ¨å‡ åˆ†é’Ÿå†…æ‰¾å‡ºç¼ºé™·å¼•å…¥çš„ä½ç½®ã€‚äº‹å®ä¸Šï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªè„šæœ¬ä¼šåœ¨å·¥ç¨‹æ­£å¸¸æ—¶è¿”å›0ï¼Œé”™è¯¯æ—¶è¿”å›é0çš„è¯ï¼Œä½ å¯ä»¥å®Œå…¨è‡ªåŠ¨åœ°æ‰§è¡Œ<code>git bisect</code>ã€‚é¦–å…ˆä½ éœ€è¦æä¾›å·²çŸ¥çš„é”™è¯¯å’Œæ­£ç¡®æäº¤æ¥å‘Šè¯‰å®ƒäºŒåˆ†æŸ¥æ‰¾çš„èŒƒå›´ã€‚ä½ å¯ä»¥é€šè¿‡<code>bisect start</code>å‘½ä»¤æ¥åˆ—å‡ºå®ƒä»¬ï¼Œå…ˆåˆ—å‡ºå·²çŸ¥çš„é”™è¯¯æäº¤å†åˆ—å‡ºå·²çŸ¥çš„æ­£ç¡®æäº¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git bisect start HEAD v1.0</span><br><span class="line">$ git bisect run test-error.sh</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¼šè‡ªåŠ¨åœ°åœ¨æ¯ä¸€ä¸ªæ£€å‡ºçš„æäº¤é‡Œè¿è¡Œ<code>test-error.sh</code>ç›´åˆ°Gitæ‰¾å‡ºç¬¬ä¸€ä¸ªç ´æŸçš„æäº¤ã€‚ä½ ä¹Ÿå¯ä»¥è¿è¡Œåƒ<code>make</code>æˆ–è€…<code>make tests</code>æˆ–è€…ä»»ä½•ä½ æ‰€æ‹¥æœ‰çš„æ¥ä¸ºä½ æ‰§è¡Œè‡ªåŠ¨åŒ–çš„æµ‹è¯•ã€‚</p>
<h2 id="å­æ¨¡å—"><a href="#å­æ¨¡å—" class="headerlink" title="å­æ¨¡å—"></a>å­æ¨¡å—</h2><p>ç»å¸¸æœ‰è¿™æ ·çš„äº‹æƒ…ï¼Œå½“ä½ åœ¨ä¸€ä¸ªé¡¹ç›®ä¸Šå·¥ä½œæ—¶ï¼Œä½ éœ€è¦åœ¨å…¶ä¸­ä½¿ç”¨å¦å¤–ä¸€ä¸ªé¡¹ç›®ã€‚ä¹Ÿè®¸å®ƒæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹å¼€å‘çš„åº“æˆ–è€…æ˜¯ä½ ç‹¬ç«‹å¼€å‘å’Œå¹¶åœ¨å¤šä¸ªçˆ¶é¡¹ç›®ä¸­ä½¿ç”¨çš„ã€‚è¿™ä¸ªåœºæ™¯ä¸‹ä¸€ä¸ªå¸¸è§çš„é—®é¢˜äº§ç”Ÿäº†ï¼šä½ æƒ³å°†ä¸¤ä¸ªé¡¹ç›®å•ç‹¬å¤„ç†ä½†æ˜¯åˆéœ€è¦åœ¨å…¶ä¸­ä¸€ä¸ªä¸­ä½¿ç”¨å¦å¤–ä¸€ä¸ªã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ªç½‘ç«™ï¼Œä¸ºä¹‹åˆ›å»ºAtomæºã€‚ä½ ä¸æƒ³ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„Atomç”Ÿæˆä»£ç ï¼Œè€Œæ˜¯å†³å®šä½¿ç”¨ä¸€ä¸ªåº“ã€‚ä½ å¯èƒ½ä¸å¾—ä¸åƒCPAN installæˆ–è€…Ruby gemä¸€æ ·åŒ…å«æ¥è‡ªå…±äº«åº“çš„ä»£ç ï¼Œæˆ–è€…å°†ä»£ç æ‹·è´åˆ°ä½ çš„é¡¹ç›®æ ‘ä¸­ã€‚å¦‚æœé‡‡ç”¨åŒ…å«åº“çš„åŠæ³•ï¼Œé‚£ä¹ˆä¸ç®¡ç”¨ä»€ä¹ˆåŠæ³•éƒ½å¾ˆéš¾å»å®šåˆ¶è¿™ä¸ªåº“ï¼Œéƒ¨ç½²å®ƒå°±æ›´åŠ å›°éš¾äº†ï¼Œå› ä¸ºä½ å¿…é¡»ç¡®ä¿æ¯ä¸ªå®¢æˆ·éƒ½æ‹¥æœ‰é‚£ä¸ªåº“ã€‚æŠŠä»£ç åŒ…å«åˆ°ä½ è‡ªå·±çš„é¡¹ç›®ä¸­å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå½“ä¸Šæ¸¸è¢«ä¿®æ”¹æ—¶ï¼Œä»»ä½•ä½ è¿›è¡Œçš„å®šåˆ¶åŒ–çš„ä¿®æ”¹éƒ½å¾ˆéš¾å½’å¹¶ã€‚</p>
<p>Git é€šè¿‡å­æ¨¡å—å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚å­æ¨¡å—å…è®¸ä½ å°†ä¸€ä¸ª Git ä»“åº“å½“ä½œå¦å¤–ä¸€ä¸ªGitä»“åº“çš„å­ç›®å½•ã€‚è¿™å…è®¸ä½ å…‹éš†å¦å¤–ä¸€ä¸ªä»“åº“åˆ°ä½ çš„é¡¹ç›®ä¸­å¹¶ä¸”ä¿æŒä½ çš„æäº¤ç›¸å¯¹ç‹¬ç«‹ã€‚</p>
<h3 id="å­æ¨¡å—åˆæ­¥"><a href="#å­æ¨¡å—åˆæ­¥" class="headerlink" title="å­æ¨¡å—åˆæ­¥"></a>å­æ¨¡å—åˆæ­¥</h3><p>å‡è®¾ä½ æƒ³æŠŠ Rack åº“ï¼ˆä¸€ä¸ª Ruby çš„ web æœåŠ¡å™¨ç½‘å…³æ¥å£ï¼‰åŠ å…¥åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå¯èƒ½æ—¢è¦ä¿æŒä½ è‡ªå·±çš„å˜æ›´ï¼Œåˆè¦å»¶ç»­ä¸Šæ¸¸çš„å˜æ›´ã€‚é¦–å…ˆä½ è¦æŠŠå¤–éƒ¨çš„ä»“åº“å…‹éš†åˆ°ä½ çš„å­ç›®å½•ä¸­ã€‚ä½ é€šè¿‡<code>git submodule add</code>å°†å¤–éƒ¨é¡¹ç›®åŠ ä¸ºå­æ¨¡å—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule add git://github.com/chneukirchen/rack.git rack</span><br><span class="line">Initialized empty Git repository in /opt/subtest/rack/.git/</span><br><span class="line">remote: Counting objects: 3181, done.</span><br><span class="line">remote: Compressing objects: 100% (1534/1534), done.</span><br><span class="line">remote: Total 3181 (delta 1951), reused 2623 (delta 1603)</span><br><span class="line">Receiving objects: 100% (3181/3181), 675.42 KiB | 422 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1951/1951), done.</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ å°±åœ¨é¡¹ç›®é‡Œçš„<code>rack</code>å­ç›®å½•ä¸‹æœ‰äº†ä¸€ä¸ª Rack é¡¹ç›®ã€‚ä½ å¯ä»¥è¿›å…¥é‚£ä¸ªå­ç›®å½•ï¼Œè¿›è¡Œå˜æ›´ï¼ŒåŠ å…¥ä½ è‡ªå·±çš„è¿œç¨‹å¯å†™ä»“åº“æ¥æ¨é€ä½ çš„å˜æ›´ï¼Œä»åŸå§‹ä»“åº“æ‹‰å–å’Œå½’å¹¶ç­‰ç­‰ã€‚å¦‚æœä½ åœ¨åŠ å…¥å­æ¨¡å—åç«‹åˆ»è¿è¡Œ<code>git status</code>ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢ä¸¤é¡¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">#</span><br><span class="line">#      new file:   .gitmodules</span><br><span class="line">#      new file:   rack</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆä½ æ³¨æ„åˆ°æœ‰ä¸€ä¸ª<code>.gitmodules</code>æ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¿å­˜äº†é¡¹ç›® URL å’Œä½ æ‹‰å–åˆ°çš„æœ¬åœ°å­ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cat .gitmodules</span><br><span class="line">[submodule &quot;rack&quot;]</span><br><span class="line">      path = rack</span><br><span class="line">      url = git://github.com/chneukirchen/rack.git</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æœ‰å¤šä¸ªå­æ¨¡å—ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œä¼šæœ‰å¤šä¸ªæ¡ç›®ã€‚å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯è¿™ä¸ªæ–‡ä»¶è·Ÿå…¶ä»–æ–‡ä»¶ä¸€æ ·ä¹Ÿæ˜¯å¤„äºç‰ˆæœ¬æ§åˆ¶ä¹‹ä¸‹çš„ï¼Œå°±åƒä½ çš„<code>.gitignore</code>æ–‡ä»¶ä¸€æ ·ã€‚å®ƒè·Ÿé¡¹ç›®é‡Œçš„å…¶ä»–æ–‡ä»¶ä¸€æ ·å¯ä»¥è¢«æ¨é€å’Œæ‹‰å–ã€‚è¿™æ˜¯å…¶ä»–å…‹éš†æ­¤é¡¹ç›®çš„äººè·çŸ¥å­æ¨¡å—é¡¹ç›®æ¥æºçš„é€”å¾„ã€‚</p>
<p><code>git status</code>çš„è¾“å‡ºé‡Œæ‰€åˆ—çš„å¦ä¸€é¡¹ç›®æ˜¯ rack ã€‚å¦‚æœä½ è¿è¡Œåœ¨é‚£ä¸Šé¢è¿è¡Œ<code>git diff</code>ï¼Œä¼šå‘ç°ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached rack</span><br><span class="line">diff --git a/rack b/rack</span><br><span class="line">new file mode 160000</span><br><span class="line">index 0000000..08d709f</span><br><span class="line">--- /dev/null</span><br><span class="line">+++ b/rack</span><br><span class="line">@@ -0,0 +1 @@</span><br><span class="line">+Subproject commit 08d709f78b8c5b0fbeb7821e37fa53e69afcf433</span><br></pre></td></tr></table></figure>

<p>å°½ç®¡<code>rack</code>æ˜¯ä½ å·¥ä½œç›®å½•é‡Œçš„å­ç›®å½•ï¼Œä½† Git æŠŠå®ƒè§†ä½œä¸€ä¸ªå­æ¨¡å—ï¼Œå½“ä½ ä¸åœ¨é‚£ä¸ªç›®å½•é‡Œæ—¶å¹¶ä¸è®°å½•å®ƒçš„å†…å®¹ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒGit å°†å®ƒè®°å½•æˆæ¥è‡ªé‚£ä¸ªä»“åº“çš„ä¸€ä¸ªç‰¹æ®Šçš„æäº¤ã€‚å½“ä½ åœ¨é‚£ä¸ªå­ç›®å½•é‡Œä¿®æ”¹å¹¶æäº¤æ—¶ï¼Œå­é¡¹ç›®ä¼šé€šçŸ¥é‚£é‡Œçš„ HEAD å·²ç»å‘ç”Ÿå˜æ›´å¹¶è®°å½•ä½ å½“å‰æ­£åœ¨å·¥ä½œçš„é‚£ä¸ªæäº¤ï¼›é€šè¿‡é‚£æ ·çš„æ–¹æ³•ï¼Œå½“å…¶ä»–äººå…‹éš†æ­¤é¡¹ç›®ï¼Œä»–ä»¬å¯ä»¥é‡æ–°åˆ›å»ºä¸€è‡´çš„ç¯å¢ƒã€‚</p>
<p>è¿™æ˜¯å…³äºå­æ¨¡å—çš„é‡è¦ä¸€ç‚¹ï¼šä½ è®°å½•ä»–ä»¬å½“å‰ç¡®åˆ‡æ‰€å¤„çš„æäº¤ã€‚ä½ ä¸èƒ½è®°å½•ä¸€ä¸ªå­æ¨¡å—çš„<code>master</code>æˆ–è€…å…¶ä»–çš„ç¬¦å·å¼•ç”¨ã€‚</p>
<p>å½“ä½ æäº¤æ—¶ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &#x27;first commit with submodule rack&#x27;</span><br><span class="line">[master 0550271] first commit with submodule rack</span><br><span class="line"> 2 files changed, 4 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 .gitmodules</span><br><span class="line"> create mode 160000 rack</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ rack æ¡ç›®çš„ 160000 æ¨¡å¼ã€‚è¿™åœ¨Gitä¸­æ˜¯ä¸€ä¸ªç‰¹æ®Šæ¨¡å¼ï¼ŒåŸºæœ¬æ„æ€æ˜¯ä½ å°†ä¸€ä¸ªæäº¤è®°å½•ä¸ºä¸€ä¸ªç›®å½•é¡¹è€Œä¸æ˜¯å­ç›®å½•æˆ–è€…æ–‡ä»¶ã€‚</p>
<p>ä½ å¯ä»¥å°†<code>rack</code>ç›®å½•å½“ä½œä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œä¿æŒä¸€ä¸ªæŒ‡å‘å­ç›®å½•çš„æœ€æ–°æäº¤çš„æŒ‡é’ˆç„¶ååå¤åœ°æ›´æ–°ä¸Šå±‚é¡¹ç›®ã€‚æ‰€æœ‰çš„Gitå‘½ä»¤éƒ½åœ¨ä¸¤ä¸ªå­ç›®å½•é‡Œç‹¬ç«‹å·¥ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git log -1</span><br><span class="line">commit 0550271328a0038865aad6331e620cd7238601bb</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Apr 9 09:03:56 2009 -0700</span><br><span class="line"></span><br><span class="line">    first commit with submodule rack</span><br><span class="line">$ cd rack/</span><br><span class="line">$ git log -1</span><br><span class="line">commit 08d709f78b8c5b0fbeb7821e37fa53e69afcf433</span><br><span class="line">Author: Christian Neukirchen &lt;chneukirchen@gmail.com&gt;</span><br><span class="line">Date:   Wed Mar 25 14:49:04 2009 +0100</span><br><span class="line"></span><br><span class="line">    Document version change</span><br></pre></td></tr></table></figure>

<h3 id="å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®"><a href="#å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®" class="headerlink" title="å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®"></a>å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®</h3><p>è¿™é‡Œä½ å°†å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®ã€‚å½“ä½ æ¥æ”¶åˆ°è¿™æ ·ä¸€ä¸ªé¡¹ç›®ï¼Œä½ å°†å¾—åˆ°äº†åŒ…å«å­é¡¹ç›®çš„ç›®å½•ï¼Œä½†é‡Œé¢æ²¡æœ‰æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://github.com/schacon/myproject.git</span><br><span class="line">Initialized empty Git repository in /opt/myproject/.git/</span><br><span class="line">remote: Counting objects: 6, done.</span><br><span class="line">remote: Compressing objects: 100% (4/4), done.</span><br><span class="line">remote: Total 6 (delta 0), reused 0 (delta 0)</span><br><span class="line">Receiving objects: 100% (6/6), done.</span><br><span class="line">$ cd myproject</span><br><span class="line">$ ls -l</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--  1 schacon  admin   3 Apr  9 09:11 README</span><br><span class="line">drwxr-xr-x  2 schacon  admin  68 Apr  9 09:11 rack</span><br><span class="line">$ ls rack/</span><br><span class="line">$</span><br></pre></td></tr></table></figure>

<p><code>rack</code>ç›®å½•å­˜åœ¨äº†ï¼Œä½†æ˜¯æ˜¯ç©ºçš„ã€‚ä½ å¿…é¡»è¿è¡Œä¸¤ä¸ªå‘½ä»¤ï¼š<code>git submodule init</code>æ¥åˆå§‹åŒ–ä½ çš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼Œ<code>git submodule update</code>æ¥ä»é‚£ä¸ªé¡¹ç›®æ‹‰å–æ‰€æœ‰æ•°æ®å¹¶æ£€å‡ºä½ ä¸Šå±‚é¡¹ç›®é‡Œæ‰€åˆ—çš„åˆé€‚çš„æäº¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule init</span><br><span class="line">Submodule &#x27;rack&#x27; (git://github.com/chneukirchen/rack.git) registered for path &#x27;rack&#x27;</span><br><span class="line">$ git submodule update</span><br><span class="line">Initialized empty Git repository in /opt/myproject/rack/.git/</span><br><span class="line">remote: Counting objects: 3181, done.</span><br><span class="line">remote: Compressing objects: 100% (1534/1534), done.</span><br><span class="line">remote: Total 3181 (delta 1951), reused 2623 (delta 1603)</span><br><span class="line">Receiving objects: 100% (3181/3181), 675.42 KiB | 173 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1951/1951), done.</span><br><span class="line">Submodule path &#x27;rack&#x27;: checked out &#x27;08d709f78b8c5b0fbeb7821e37fa53e69afcf433&#x27;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ çš„<code>rack</code>å­ç›®å½•å°±å¤„äºä½ å…ˆå‰æäº¤çš„ç¡®åˆ‡çŠ¶æ€äº†ã€‚å¦‚æœå¦å¤–ä¸€ä¸ªå¼€å‘è€…å˜æ›´äº† rack çš„ä»£ç å¹¶æäº¤ï¼Œä½ æ‹‰å–é‚£ä¸ªå¼•ç”¨ç„¶åå½’å¹¶ä¹‹ï¼Œå°†å¾—åˆ°ç¨æœ‰ç‚¹æ€ªå¼‚çš„ä¸œè¥¿ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git merge origin/master</span><br><span class="line">Updating 0550271..85a3eee</span><br><span class="line">Fast forward</span><br><span class="line"> rack |    2 +-</span><br><span class="line"> 1 files changed, 1 insertions(+), 1 deletions(-)</span><br><span class="line">[master*]$ git status</span><br><span class="line"># On branch master</span><br><span class="line"># Changes not staged for commit:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line">#</span><br><span class="line">#      modified:   rack</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>ä½ å½’å¹¶æ¥çš„ä»…ä»…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘ä½ çš„å­æ¨¡å—çš„æŒ‡é’ˆï¼›ä½†æ˜¯å®ƒå¹¶ä¸æ›´æ–°ä½ å­æ¨¡å—ç›®å½•é‡Œçš„ä»£ç ï¼Œæ‰€ä»¥çœ‹èµ·æ¥ä½ çš„å·¥ä½œç›®å½•å¤„äºä¸€ä¸ªä¸´æ—¶çŠ¶æ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --git a/rack b/rack</span><br><span class="line">index 6c5e70b..08d709f 160000</span><br><span class="line">--- a/rack</span><br><span class="line">+++ b/rack</span><br><span class="line">@@ -1 +1 @@</span><br><span class="line">-Subproject commit 6c5e70b984a60b3cecd395edd5b48a7575bf58e0</span><br><span class="line">+Subproject commit 08d709f78b8c5b0fbeb7821e37fa53e69afcf433</span><br></pre></td></tr></table></figure>

<p>äº‹æƒ…å°±æ˜¯è¿™æ ·ï¼Œå› ä¸ºä½ æ‰€æ‹¥æœ‰çš„æŒ‡å‘å­æ¨¡å—çš„æŒ‡é’ˆå’Œå­æ¨¡å—ç›®å½•çš„çœŸå®çŠ¶æ€å¹¶ä¸åŒ¹é…ã€‚ä¸ºäº†ä¿®å¤è¿™ä¸€ç‚¹ï¼Œä½ å¿…é¡»å†æ¬¡è¿è¡Œ<code>git submodule update</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update</span><br><span class="line">remote: Counting objects: 5, done.</span><br><span class="line">remote: Compressing objects: 100% (3/3), done.</span><br><span class="line">remote: Total 3 (delta 1), reused 2 (delta 0)</span><br><span class="line">Unpacking objects: 100% (3/3), done.</span><br><span class="line">From git@github.com:schacon/rack</span><br><span class="line">   08d709f..6c5e70b  master     -&gt; origin/master</span><br><span class="line">Submodule path &#x27;rack&#x27;: checked out &#x27;6c5e70b984a60b3cecd395edd5b48a7575bf58e0&#x27;</span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡ä½ ä»ä¸»é¡¹ç›®ä¸­æ‹‰å–ä¸€ä¸ªå­æ¨¡å—çš„å˜æ›´éƒ½å¿…é¡»è¿™æ ·åšã€‚çœ‹èµ·æ¥å¾ˆæ€ªä½†æ˜¯ç®¡ç”¨ã€‚</p>
<p>ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯å½“å¼€å‘è€…å¯¹å­æ¨¡å—åšäº†ä¸€ä¸ªæœ¬åœ°çš„å˜æ›´ä½†æ˜¯å¹¶æ²¡æœ‰æ¨é€åˆ°å…¬å…±æœåŠ¡å™¨ã€‚ç„¶åä»–ä»¬æäº¤äº†ä¸€ä¸ªæŒ‡å‘é‚£ä¸ªéå…¬å¼€çŠ¶æ€çš„æŒ‡é’ˆç„¶åæ¨é€ä¸Šå±‚é¡¹ç›®ã€‚å½“å…¶ä»–å¼€å‘è€…è¯•å›¾è¿è¡Œ<code>git submodule update</code>ï¼Œé‚£ä¸ªå­æ¨¡å—ç³»ç»Ÿä¼šæ‰¾ä¸åˆ°æ‰€å¼•ç”¨çš„æäº¤ï¼Œå› ä¸ºå®ƒåªå­˜åœ¨äºç¬¬ä¸€ä¸ªå¼€å‘è€…çš„ç³»ç»Ÿä¸­ã€‚å¦‚æœå‘ç”Ÿé‚£ç§æƒ…å†µï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule update</span><br><span class="line">fatal: reference isnâ€™t a tree: 6c5e70b984a60b3cecd395edd5b48a7575bf58e0</span><br><span class="line">Unable to checkout &#x27;6c5e70b984a60b3cecd395edd5ba7575bf58e0&#x27; in submodule path &#x27;rack&#x27;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¸å¾—ä¸å»æŸ¥çœ‹è°æœ€åå˜æ›´äº†å­æ¨¡å—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git log -1 rack</span><br><span class="line">commit 85a3eee996800fcfa91e2119372dd4172bf76678</span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Thu Apr 9 09:19:14 2009 -0700</span><br><span class="line"></span><br><span class="line">    added a submodule reference I will never make public. hahahahaha!</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œä½ ç»™é‚£ä¸ªå®¶ä¼™å‘ç”µå­é‚®ä»¶è¯´ä»–ä¸€é€šã€‚</p>
<h3 id="ä¸Šå±‚é¡¹ç›®"><a href="#ä¸Šå±‚é¡¹ç›®" class="headerlink" title="ä¸Šå±‚é¡¹ç›®"></a>ä¸Šå±‚é¡¹ç›®</h3><p>æœ‰æ—¶å€™ï¼Œå¼€å‘è€…æƒ³æŒ‰ç…§ä»–ä»¬çš„åˆ†ç»„è·å–ä¸€ä¸ªå¤§é¡¹ç›®çš„å­ç›®å½•çš„å­é›†ã€‚å¦‚æœä½ æ˜¯ä» CVS æˆ–è€… Subversion è¿ç§»è¿‡æ¥çš„è¯è¿™ä¸ªå¾ˆå¸¸è§ï¼Œåœ¨é‚£äº›ç³»ç»Ÿä¸­ä½ å·²ç»å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—æˆ–è€…å­ç›®å½•çš„é›†åˆï¼Œè€Œä½ æƒ³å»¶ç»­è¿™ç§ç±»å‹çš„å·¥ä½œæµç¨‹ã€‚</p>
<p>åœ¨ Git ä¸­å®ç°è¿™ä¸ªçš„ä¸€ä¸ªå¥½åŠæ³•æ˜¯ä½ å°†æ¯ä¸€ä¸ªå­ç›®å½•éƒ½åšæˆç‹¬ç«‹çš„ Git ä»“åº“ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªä¸Šå±‚é¡¹ç›®çš„ Git ä»“åº“åŒ…å«å¤šä¸ªå­æ¨¡å—ã€‚è¿™ä¸ªåŠæ³•çš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯ä½ å¯ä»¥åœ¨ä¸Šå±‚é¡¹ç›®ä¸­é€šè¿‡æ ‡ç­¾å’Œåˆ†æ”¯æ›´ä¸ºæ˜ç¡®åœ°å®šä¹‰é¡¹ç›®ä¹‹é—´çš„å…³ç³»ã€‚</p>
<h3 id="å­æ¨¡å—çš„é—®é¢˜"><a href="#å­æ¨¡å—çš„é—®é¢˜" class="headerlink" title="å­æ¨¡å—çš„é—®é¢˜"></a>å­æ¨¡å—çš„é—®é¢˜</h3><p>ä½¿ç”¨å­æ¨¡å—å¹¶éæ²¡æœ‰ä»»ä½•ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œä½ åœ¨å­æ¨¡å—ç›®å½•ä¸­å·¥ä½œæ—¶å¿…é¡»ç›¸å¯¹å°å¿ƒã€‚å½“ä½ è¿è¡Œ<code>git submodule update</code>ï¼Œå®ƒä¼šæ£€å‡ºé¡¹ç›®çš„æŒ‡å®šç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸åœ¨åˆ†æ”¯å†…ã€‚è¿™å«åšè·å¾—ä¸€ä¸ªåˆ†ç¦»çš„å¤´â€”â€”è¿™æ„å‘³ç€ HEAD æ–‡ä»¶ç›´æ¥æŒ‡å‘ä¸€æ¬¡æäº¤ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç¬¦å·å¼•ç”¨ã€‚é—®é¢˜åœ¨äºä½ é€šå¸¸å¹¶ä¸æƒ³åœ¨ä¸€ä¸ªåˆ†ç¦»çš„å¤´çš„ç¯å¢ƒä¸‹å·¥ä½œï¼Œå› ä¸ºå¤ªå®¹æ˜“ä¸¢å¤±å˜æ›´äº†ã€‚å¦‚æœä½ å…ˆæ‰§è¡Œäº†ä¸€æ¬¡<code>submodule update</code>ï¼Œç„¶ååœ¨é‚£ä¸ªå­æ¨¡å—ç›®å½•é‡Œä¸åˆ›å»ºåˆ†æ”¯å°±è¿›è¡Œæäº¤ï¼Œç„¶åå†æ¬¡ä»ä¸Šå±‚é¡¹ç›®é‡Œè¿è¡Œ<code>git submodule update</code>åŒæ—¶ä¸è¿›è¡Œæäº¤ï¼ŒGitä¼šæ¯«æ— æç¤ºåœ°è¦†ç›–ä½ çš„å˜æ›´ã€‚æŠ€æœ¯ä¸Šè®²ä½ ä¸ä¼šä¸¢å¤±å·¥ä½œï¼Œä½†æ˜¯ä½ å°†å¤±å»æŒ‡å‘å®ƒçš„åˆ†æ”¯ï¼Œå› æ­¤ä¼šå¾ˆéš¾å–åˆ°ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå½“ä½ åœ¨å­æ¨¡å—ç›®å½•é‡Œå·¥ä½œæ—¶åº”ä½¿ç”¨<code>git checkout -b work</code>åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚å½“ä½ å†æ¬¡åœ¨å­æ¨¡å—é‡Œæ›´æ–°çš„æ—¶å€™ï¼Œå®ƒä»ç„¶ä¼šè¦†ç›–ä½ çš„å·¥ä½œï¼Œä½†æ˜¯è‡³å°‘ä½ æ‹¥æœ‰ä¸€ä¸ªå¯ä»¥å›æº¯çš„æŒ‡é’ˆã€‚</p>
<p>åˆ‡æ¢å¸¦æœ‰å­æ¨¡å—çš„åˆ†æ”¯åŒæ ·ä¹Ÿå¾ˆæœ‰æŠ€å·§ã€‚å¦‚æœä½ åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œå¢åŠ äº†ä¸€ä¸ªå­æ¨¡å—ï¼Œç„¶ååˆ‡æ¢å›ä¸å¸¦è¯¥å­æ¨¡å—çš„åˆ†æ”¯ï¼Œä½ ä»ç„¶ä¼šæ‹¥æœ‰ä¸€ä¸ªæœªè¢«è¿½è¸ªçš„å­æ¨¡å—çš„ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b rack</span><br><span class="line">Switched to a new branch &quot;rack&quot;</span><br><span class="line">$ git submodule add git@github.com:schacon/rack.git rack</span><br><span class="line">Initialized empty Git repository in /opt/myproj/rack/.git/</span><br><span class="line">...</span><br><span class="line">Receiving objects: 100% (3184/3184), 677.42 KiB | 34 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1952/1952), done.</span><br><span class="line">$ git commit -am &#x27;added rack submodule&#x27;</span><br><span class="line">[rack cc49a69] added rack submodule</span><br><span class="line"> 2 files changed, 4 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 .gitmodules</span><br><span class="line"> create mode 160000 rack</span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &quot;master&quot;</span><br><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line"># Untracked files:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span><br><span class="line">#</span><br><span class="line">#      rack/</span><br></pre></td></tr></table></figure>

<p>ä½ å°†ä¸å¾—ä¸å°†å®ƒç§»èµ°æˆ–è€…åˆ é™¤ï¼Œè¿™æ ·çš„è¯å½“ä½ åˆ‡æ¢å›å»çš„æ—¶å€™å¿…é¡»é‡æ–°å…‹éš†å®ƒâ€”â€”ä½ å¯èƒ½ä¼šä¸¢å¤±ä½ æœªæ¨é€çš„æœ¬åœ°çš„å˜æ›´æˆ–åˆ†æ”¯ã€‚</p>
<p>æœ€åä¸€ä¸ªéœ€è¦å¼•èµ·æ³¨æ„çš„æ˜¯å…³äºä»å­ç›®å½•åˆ‡æ¢åˆ°å­æ¨¡å—çš„ã€‚å¦‚æœä½ å·²ç»è·Ÿè¸ªäº†ä½ é¡¹ç›®ä¸­çš„ä¸€äº›æ–‡ä»¶ä½†æ˜¯æƒ³æŠŠå®ƒä»¬ç§»åˆ°å­æ¨¡å—å»ï¼Œä½ å¿…é¡»éå¸¸å°å¿ƒï¼Œå¦åˆ™Gitä¼šç”Ÿä½ çš„æ°”ã€‚å‡è®¾ä½ çš„é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå­ç›®å½•é‡Œæ”¾äº† rack çš„æ–‡ä»¶ï¼Œç„¶åä½ æƒ³å°†å®ƒè½¬æ¢ä¸ºå­æ¨¡å—ã€‚å¦‚æœä½ åˆ é™¤å­ç›®å½•ç„¶åè¿è¡Œ<code>submodule add</code>ï¼ŒGitä¼šå‘ä½ å¤§å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ rm -Rf rack/</span><br><span class="line">$ git submodule add git@github.com:schacon/rack.git rack</span><br><span class="line">&#x27;rack&#x27; already exists in the index</span><br></pre></td></tr></table></figure>

<p>ä½ å¿…é¡»å…ˆå°†<code>rack</code>ç›®å½•æ’¤å›ã€‚ç„¶åä½ æ‰èƒ½åŠ å…¥å­æ¨¡å—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git rm -r rack</span><br><span class="line">$ git submodule add git@github.com:schacon/rack.git rack</span><br><span class="line">Initialized empty Git repository in /opt/testsub/rack/.git/</span><br><span class="line">remote: Counting objects: 3184, done.</span><br><span class="line">remote: Compressing objects: 100% (1465/1465), done.</span><br><span class="line">remote: Total 3184 (delta 1952), reused 2770 (delta 1675)</span><br><span class="line">Receiving objects: 100% (3184/3184), 677.42 KiB | 88 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1952/1952), done.</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å‡è®¾ä½ åœ¨ä¸€ä¸ªåˆ†æ”¯é‡Œé‚£æ ·åšäº†ã€‚å¦‚æœä½ å°è¯•åˆ‡æ¢å›ä¸€ä¸ªä»ç„¶åœ¨ç›®å½•é‡Œä¿ç•™é‚£äº›æ–‡ä»¶è€Œä¸æ˜¯å­æ¨¡å—çš„åˆ†æ”¯æ—¶â€”â€”ä½ ä¼šå¾—åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">error: Untracked working tree file &#x27;rack/AUTHORS&#x27; would be overwritten by merge.</span><br></pre></td></tr></table></figure>

<p>ä½ å¿…é¡»å…ˆç§»é™¤<code>rack</code>å­æ¨¡å—çš„ç›®å½•æ‰èƒ½åˆ‡æ¢åˆ°ä¸åŒ…å«å®ƒçš„åˆ†æ”¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mv rack /tmp/</span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &quot;master&quot;</span><br><span class="line">$ ls</span><br><span class="line">README	rack</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œå½“ä½ åˆ‡æ¢å›æ¥ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç©ºçš„<code>rack</code>ç›®å½•ã€‚ä½ å¯ä»¥è¿è¡Œ<code>git submodule update</code>é‡æ–°å…‹éš†ï¼Œä¹Ÿå¯ä»¥å°†<code>/tmp/rack</code>ç›®å½•é‡æ–°ç§»å›ç©ºç›®å½•ã€‚</p>
<h2 id="å­æ ‘åˆå¹¶"><a href="#å­æ ‘åˆå¹¶" class="headerlink" title="å­æ ‘åˆå¹¶"></a>å­æ ‘åˆå¹¶</h2><p>ç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†å­æ¨¡å—ç³»ç»Ÿçš„éº»çƒ¦ä¹‹å¤„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è§£å†³ç›¸åŒé—®é¢˜çš„å¦ä¸€é€”å¾„ã€‚å½“ Git å½’å¹¶æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥éœ€è¦å½’å¹¶çš„å†…å®¹ç„¶åé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å½’å¹¶ç­–ç•¥ã€‚å¦‚æœä½ å½’å¹¶çš„åˆ†æ”¯æ˜¯ä¸¤ä¸ªï¼ŒGitä½¿ç”¨ä¸€ä¸ª<em>é€’å½’</em>ç­–ç•¥ã€‚å¦‚æœä½ å½’å¹¶çš„åˆ†æ”¯è¶…è¿‡ä¸¤ä¸ªï¼ŒGité‡‡ç”¨<em>ç« é±¼</em>ç­–ç•¥ã€‚è¿™äº›ç­–ç•¥æ˜¯è‡ªåŠ¨é€‰æ‹©çš„ï¼Œå› ä¸ºé€’å½’ç­–ç•¥å¯ä»¥å¤„ç†å¤æ‚çš„ä¸‰è·¯å½’å¹¶æƒ…å†µâ€”â€”æ¯”å¦‚å¤šäºä¸€ä¸ªå…±åŒç¥–å…ˆçš„â€”â€”ä½†æ˜¯å®ƒåªèƒ½å¤„ç†ä¸¤ä¸ªåˆ†æ”¯çš„å½’å¹¶ã€‚ç« é±¼å½’å¹¶å¯ä»¥å¤„ç†å¤šä¸ªåˆ†æ”¯ä½†æ˜¯ä½†å¿…é¡»æ›´åŠ å°å¿ƒä»¥é¿å…å†²çªå¸¦æ¥çš„éº»çƒ¦ï¼Œå› æ­¤å®ƒè¢«é€‰ä¸­ä½œä¸ºå½’å¹¶ä¸¤ä¸ªä»¥ä¸Šåˆ†æ”¯çš„é»˜è®¤ç­–ç•¥ã€‚</p>
<p>å®é™…ä¸Šï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–ç­–ç•¥ã€‚å…¶ä¸­çš„ä¸€ä¸ªå°±æ˜¯<em>å­æ ‘</em>å½’å¹¶ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å¤„ç†å­é¡¹ç›®é—®é¢˜ã€‚è¿™é‡Œä½ ä¼šçœ‹åˆ°å¦‚ä½•æ¢ç”¨å­æ ‘å½’å¹¶çš„æ–¹æ³•æ¥å®ç°å‰ä¸€èŠ‚é‡Œæ‰€åšçš„ rack çš„åµŒå…¥ã€‚</p>
<p>å­æ ‘å½’å¹¶çš„æ€æƒ³æ˜¯ä½ æ‹¥æœ‰ä¸¤ä¸ªå·¥ç¨‹ï¼Œå…¶ä¸­ä¸€ä¸ªé¡¹ç›®æ˜ å°„åˆ°å¦å¤–ä¸€ä¸ªé¡¹ç›®çš„å­ç›®å½•ä¸­ï¼Œåè¿‡æ¥ä¹Ÿä¸€æ ·ã€‚å½“ä½ æŒ‡å®šä¸€ä¸ªå­æ ‘å½’å¹¶ï¼ŒGitå¯ä»¥èªæ˜åœ°æ¢çŸ¥å…¶ä¸­ä¸€ä¸ªæ˜¯å¦å¤–ä¸€ä¸ªçš„å­æ ‘ä»è€Œå®ç°æ­£ç¡®çš„å½’å¹¶â€”â€”è¿™ç›¸å½“ç¥å¥‡ã€‚</p>
<p>é¦–å…ˆä½ å°† Rack åº”ç”¨åŠ å…¥åˆ°é¡¹ç›®ä¸­ã€‚ä½ å°† Rack é¡¹ç›®å½“ä½œä½ é¡¹ç›®ä¸­çš„ä¸€ä¸ªè¿œç¨‹å¼•ç”¨ï¼Œç„¶åå°†å®ƒæ£€å‡ºåˆ°å®ƒè‡ªèº«çš„åˆ†æ”¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add rack_remote git@github.com:schacon/rack.git</span><br><span class="line">$ git fetch rack_remote</span><br><span class="line">warning: no common commits</span><br><span class="line">remote: Counting objects: 3184, done.</span><br><span class="line">remote: Compressing objects: 100% (1465/1465), done.</span><br><span class="line">remote: Total 3184 (delta 1952), reused 2770 (delta 1675)</span><br><span class="line">Receiving objects: 100% (3184/3184), 677.42 KiB | 4 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1952/1952), done.</span><br><span class="line">From git@github.com:schacon/rack</span><br><span class="line"> * [new branch]      build      -&gt; rack_remote/build</span><br><span class="line"> * [new branch]      master     -&gt; rack_remote/master</span><br><span class="line"> * [new branch]      rack-0.4   -&gt; rack_remote/rack-0.4</span><br><span class="line"> * [new branch]      rack-0.9   -&gt; rack_remote/rack-0.9</span><br><span class="line">$ git checkout -b rack_branch rack_remote/master</span><br><span class="line">Branch rack_branch set up to track remote branch refs/remotes/rack_remote/master.</span><br><span class="line">Switched to a new branch &quot;rack_branch&quot;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨åœ¨ä½ çš„<code>rack_branch</code>åˆ†æ”¯ä¸­å°±æœ‰äº†Racké¡¹ç›®çš„æ ¹ç›®å½•ï¼Œè€Œä½ è‡ªå·±çš„é¡¹ç›®åœ¨<code>master</code>åˆ†æ”¯ä¸­ã€‚å¦‚æœä½ å…ˆæ£€å‡ºå…¶ä¸­ä¸€ä¸ªç„¶åå¦å¤–ä¸€ä¸ªï¼Œä½ ä¼šçœ‹åˆ°å®ƒä»¬æœ‰ä¸åŒçš„é¡¹ç›®æ ¹ç›®å½•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br><span class="line">AUTHORS	       KNOWN-ISSUES   Rakefile      contrib	       lib</span><br><span class="line">COPYING	       README         bin           example	       test</span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch &quot;master&quot;</span><br><span class="line">$ ls</span><br><span class="line">README</span><br></pre></td></tr></table></figure>

<p>è¦å°† Rack é¡¹ç›®å½“ä½œå­ç›®å½•æ‹‰å–åˆ°ä½ çš„<code>master</code>é¡¹ç›®ä¸­ã€‚ä½ å¯ä»¥åœ¨ Git ä¸­ç”¨<code>git read-tree</code>æ¥å®ç°ã€‚ä½ ä¼šåœ¨ç¬¬9ç« å­¦åˆ°æ›´å¤šä¸<code>read-tree</code>å’Œå®ƒçš„æœ‹å‹ç›¸å…³çš„ä¸œè¥¿ï¼Œå½“å‰ä½ ä¼šçŸ¥é“å®ƒè¯»å–ä¸€ä¸ªåˆ†æ”¯çš„æ ¹ç›®å½•æ ‘åˆ°å½“å‰çš„æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•ã€‚ä½ åªè¦åˆ‡æ¢å›ä½ çš„<code>master</code>åˆ†æ”¯ï¼Œç„¶åæ‹‰å–<code>rack_branch</code>åˆ°ä½ ä¸»é¡¹ç›®çš„<code>master</code>åˆ†æ”¯çš„<code>rack</code>å­ç›®å½•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git read-tree --prefix=rack/ -u rack_branch</span><br></pre></td></tr></table></figure>

<p>å½“ä½ æäº¤çš„æ—¶å€™ï¼Œçœ‹èµ·æ¥å°±åƒä½ åœ¨é‚£ä¸ªå­ç›®å½•ä¸‹æ‹¥æœ‰Rackçš„æ–‡ä»¶â€”â€”å°±åƒä½ ä»ä¸€ä¸ªtarballé‡Œæ‹·è´çš„ä¸€æ ·ã€‚æœ‰æ„æ€çš„æ˜¯ä½ å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°å½’å¹¶å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯çš„å˜æ›´åˆ°å¦å¤–ä¸€ä¸ªã€‚å› æ­¤ï¼Œå¦‚æœ Rack é¡¹ç›®æ›´æ–°äº†ï¼Œä½ å¯ä»¥é€šè¿‡åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯å¹¶æ‰§è¡Œæ‹‰å–æ¥è·å¾—ä¸Šæ¸¸çš„å˜æ›´ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout rack_branch</span><br><span class="line">$ git pull</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œä½ å¯ä»¥å°†é‚£äº›å˜æ›´å½’å¹¶å›ä½ çš„ master åˆ†æ”¯ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>git merge -s subtree</code>ï¼Œå®ƒä¼šå·¥ä½œçš„å¾ˆå¥½ï¼›ä½†æ˜¯ Git åŒæ—¶ä¼šæŠŠå†å²å½’å¹¶åˆ°ä¸€èµ·ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚ä¸ºäº†æ‹‰å–å˜æ›´å¹¶é¢„ç½®æäº¤è¯´æ˜ï¼Œéœ€è¦åœ¨<code>-s subtree</code>ç­–ç•¥é€‰é¡¹çš„åŒæ—¶ä½¿ç”¨<code>--squash</code>å’Œ<code>--no-commit</code>é€‰é¡¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge --squash -s subtree --no-commit rack_branch</span><br><span class="line">Squash commit -- not updating HEAD</span><br><span class="line">Automatic merge went well; stopped before committing as requested</span><br></pre></td></tr></table></figure>

<p>æ‰€æœ‰ Rack é¡¹ç›®çš„å˜æ›´éƒ½è¢«å½’å¹¶å¹¶ä¸”å¯ä»¥è¿›è¡Œæœ¬åœ°æäº¤ã€‚ä½ ä¹Ÿå¯ä»¥åšç›¸åçš„äº‹æƒ…â€”â€”åœ¨ä½ ä¸»åˆ†æ”¯çš„<code>rack</code>ç›®å½•é‡Œè¿›è¡Œå˜æ›´ç„¶åå½’å¹¶å›<code>rack_branch</code>åˆ†æ”¯ï¼Œç„¶åå°†å®ƒä»¬æäº¤ç»™ç»´æŠ¤è€…æˆ–è€…æ¨é€åˆ°ä¸Šæ¸¸ã€‚</p>
<p>ä¸ºäº†å¾—åˆ°<code>rack</code>å­ç›®å½•å’Œä½ <code>rack_branch</code>åˆ†æ”¯çš„åŒºåˆ«â€”â€”ä»¥å†³å®šä½ æ˜¯å¦éœ€è¦å½’å¹¶å®ƒä»¬â€”â€”ä½ ä¸èƒ½ä½¿ç”¨ä¸€èˆ¬çš„<code>diff</code>å‘½ä»¤ã€‚è€Œæ˜¯å¯¹ä½ æƒ³æ¯”è¾ƒçš„åˆ†æ”¯è¿è¡Œ<code>git diff-tree</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff-tree -p rack_branch</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼Œä¸ºäº†æ¯”è¾ƒä½ çš„<code>rack</code>å­ç›®å½•å’ŒæœåŠ¡å™¨ä¸Šä½ æ‹‰å–æ—¶çš„<code>master</code>åˆ†æ”¯ï¼Œä½ å¯ä»¥è¿è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff-tree -p rack_remote/master</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/git/" rel="tag"># git</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/08/22/git/git-%E5%88%86%E5%B8%83%E5%BC%8Fgit/" rel="prev" title="git-åˆ†å¸ƒå¼git">
      <i class="fa fa-chevron-left"></i> git-åˆ†å¸ƒå¼git
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/08/23/git/git-git%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F/" rel="next" title="git-gitä¸å…¶ä»–ç³»ç»Ÿ">
      git-gitä¸å…¶ä»–ç³»ç»Ÿ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E8%AE%A2%E7%89%88%E6%9C%AC%EF%BC%88Revision%EF%BC%89%E9%80%89%E6%8B%A9"><span class="nav-number">1.</span> <span class="nav-text">ä¿®è®¢ç‰ˆæœ¬ï¼ˆRevisionï¼‰é€‰æ‹©</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%B8%AA%E4%BF%AE%E8%AE%A2%E7%89%88%E6%9C%AC"><span class="nav-number">1.1.</span> <span class="nav-text">å•ä¸ªä¿®è®¢ç‰ˆæœ¬</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E7%9F%AD%E7%9A%84SHA"><span class="nav-number">1.2.</span> <span class="nav-text">ç®€çŸ­çš„SHA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E-SHA-1-%E7%9A%84%E7%AE%80%E7%9F%AD%E8%AF%B4%E6%98%8E"><span class="nav-number">1.3.</span> <span class="nav-text">å…³äº SHA-1 çš„ç®€çŸ­è¯´æ˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E5%BC%95%E7%94%A8"><span class="nav-number">1.4.</span> <span class="nav-text">åˆ†æ”¯å¼•ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E7%94%A8%E6%97%A5%E5%BF%97%E9%87%8C%E7%9A%84%E7%AE%80%E7%A7%B0"><span class="nav-number">1.5.</span> <span class="nav-text">å¼•ç”¨æ—¥å¿—é‡Œçš„ç®€ç§°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A5%96%E5%85%88%E5%BC%95%E7%94%A8"><span class="nav-number">1.6.</span> <span class="nav-text">ç¥–å…ˆå¼•ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E4%BA%A4%E8%8C%83%E5%9B%B4"><span class="nav-number">1.7.</span> <span class="nav-text">æäº¤èŒƒå›´</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E7%82%B9"><span class="nav-number">1.7.1.</span> <span class="nav-text">åŒç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E7%82%B9"><span class="nav-number">1.7.2.</span> <span class="nav-text">å¤šç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%89%E7%82%B9"><span class="nav-number">1.7.3.</span> <span class="nav-text">ä¸‰ç‚¹</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%A4%E4%BA%92%E5%BC%8F%E6%9A%82%E5%AD%98"><span class="nav-number">2.</span> <span class="nav-text">äº¤äº’å¼æš‚å­˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9A%82%E5%AD%98%E5%92%8C%E6%92%A4%E5%9B%9E%E6%96%87%E4%BB%B6"><span class="nav-number">2.1.</span> <span class="nav-text">æš‚å­˜å’Œæ’¤å›æ–‡ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9A%82%E5%AD%98%E8%A1%A5%E4%B8%81"><span class="nav-number">2.2.</span> <span class="nav-text">æš‚å­˜è¡¥ä¸</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%82%A8%E8%97%8F%EF%BC%88Stashing%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">å‚¨è—ï¼ˆStashingï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%82%A8%E8%97%8F%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C"><span class="nav-number">3.1.</span> <span class="nav-text">å‚¨è—ä½ çš„å·¥ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%96%E6%B6%88%E5%82%A8%E8%97%8F-Un-applying-a-Stash"><span class="nav-number">3.2.</span> <span class="nav-text">å–æ¶ˆå‚¨è—(Un-applying a Stash)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E5%82%A8%E8%97%8F%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="nav-number">3.3.</span> <span class="nav-text">ä»å‚¨è—ä¸­åˆ›å»ºåˆ†æ”¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%86%99%E5%8E%86%E5%8F%B2"><span class="nav-number">4.</span> <span class="nav-text">é‡å†™å†å²</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%B9%E5%8F%98%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4"><span class="nav-number">4.1.</span> <span class="nav-text">æ”¹å˜æœ€è¿‘ä¸€æ¬¡æäº¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%A4%9A%E4%B8%AA%E6%8F%90%E4%BA%A4%E8%AF%B4%E6%98%8E"><span class="nav-number">4.2.</span> <span class="nav-text">ä¿®æ”¹å¤šä¸ªæäº¤è¯´æ˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E6%8E%92%E6%8F%90%E4%BA%A4"><span class="nav-number">4.3.</span> <span class="nav-text">é‡æ’æäº¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%8B%E5%88%B6-Squashing-%E6%8F%90%E4%BA%A4"><span class="nav-number">4.4.</span> <span class="nav-text">å‹åˆ¶(Squashing)æäº¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%86%E5%88%86%E6%8F%90%E4%BA%A4"><span class="nav-number">4.5.</span> <span class="nav-text">æ‹†åˆ†æäº¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BC%B9%E7%BA%A7%E9%80%89%E9%A1%B9-filter-branch"><span class="nav-number">4.6.</span> <span class="nav-text">æ ¸å¼¹çº§é€‰é¡¹: filter-branch</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%8E%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4%E4%B8%AD%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="nav-number">4.6.1.</span> <span class="nav-text">ä»æ‰€æœ‰æäº¤ä¸­åˆ é™¤ä¸€ä¸ªæ–‡ä»¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%86%E4%B8%80%E4%B8%AA%E5%AD%90%E7%9B%AE%E5%BD%95%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%96%B0%E7%9A%84%E6%A0%B9%E7%9B%AE%E5%BD%95"><span class="nav-number">4.6.2.</span> <span class="nav-text">å°†ä¸€ä¸ªå­ç›®å½•è®¾ç½®ä¸ºæ–°çš„æ ¹ç›®å½•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E6%80%A7%E5%9C%B0%E6%9B%B4%E6%8D%A2%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="nav-number">4.6.3.</span> <span class="nav-text">å…¨å±€æ€§åœ°æ›´æ¢ç”µå­é‚®ä»¶åœ°å€</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Git-%E8%B0%83%E8%AF%95"><span class="nav-number">5.</span> <span class="nav-text">ä½¿ç”¨ Git è°ƒè¯•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%A0%87%E6%B3%A8"><span class="nav-number">5.1.</span> <span class="nav-text">æ–‡ä»¶æ ‡æ³¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE"><span class="nav-number">5.2.</span> <span class="nav-text">äºŒåˆ†æŸ¥æ‰¾</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="nav-number">6.</span> <span class="nav-text">å­æ¨¡å—</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E5%88%9D%E6%AD%A5"><span class="nav-number">6.1.</span> <span class="nav-text">å­æ¨¡å—åˆæ­¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%8B%E9%9A%86%E4%B8%80%E4%B8%AA%E5%B8%A6%E5%AD%90%E6%A8%A1%E5%9D%97%E7%9A%84%E9%A1%B9%E7%9B%AE"><span class="nav-number">6.2.</span> <span class="nav-text">å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8A%E5%B1%82%E9%A1%B9%E7%9B%AE"><span class="nav-number">6.3.</span> <span class="nav-text">ä¸Šå±‚é¡¹ç›®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">6.4.</span> <span class="nav-text">å­æ¨¡å—çš„é—®é¢˜</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%A0%91%E5%90%88%E5%B9%B6"><span class="nav-number">7.</span> <span class="nav-text">å­æ ‘åˆå¹¶</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="CHENPENGBLOG"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">CHENPENGBLOG</p>
  <div class="site-description" itemprop="description">è®°å½•ï¼</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">97</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yourname" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail â†’ mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/yourname" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/yourname" title="StackOverflow â†’ https:&#x2F;&#x2F;stackoverflow.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CHENPENGBLOG</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
