<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chenpeng.pages.dev","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="åŸºäºæ³¨è§£çš„é…ç½®æ˜¯å¦æ¯” XMLâ€œæ›´å¥½â€ ï¼Ÿç®€çŸ­çš„å›ç­”æ˜¯â€œè§†æƒ…å†µè€Œå®šâ€ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="spring-annotation-based-container-configuration">
<meta property="og:url" content="https://chenpeng.pages.dev/2021/08/26/Java/spring/spring-annotation-based-container-configuration/index.html">
<meta property="og:site_name" content="é™ˆé¹çš„åšå®¢">
<meta property="og:description" content="åŸºäºæ³¨è§£çš„é…ç½®æ˜¯å¦æ¯” XMLâ€œæ›´å¥½â€ ï¼Ÿç®€çŸ­çš„å›ç­”æ˜¯â€œè§†æƒ…å†µè€Œå®šâ€ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-08-26T09:04:37.000Z">
<meta property="article:modified_time" content="2022-04-14T04:23:46.647Z">
<meta property="article:author" content="CHENPENGBLOG">
<meta property="article:tag" content="spring">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://chenpeng.pages.dev/2021/08/26/Java/spring/spring-annotation-based-container-configuration/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>spring-annotation-based-container-configuration | é™ˆé¹çš„åšå®¢</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">é™ˆé¹çš„åšå®¢</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ğŸ˜‰</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://chenpeng.pages.dev/2021/08/26/Java/spring/spring-annotation-based-container-configuration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="CHENPENGBLOG">
      <meta itemprop="description" content="è®°å½•ï¼">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆé¹çš„åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          spring-annotation-based-container-configuration
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-26 17:04:37" itemprop="dateCreated datePublished" datetime="2021-08-26T17:04:37+08:00">2021-08-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-04-14 12:23:46" itemprop="dateModified" datetime="2022-04-14T12:23:46+08:00">2022-04-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>åŸºäºæ³¨è§£çš„é…ç½®æ˜¯å¦æ¯” XMLâ€œæ›´å¥½â€ ï¼Ÿç®€çŸ­çš„å›ç­”æ˜¯â€œè§†æƒ…å†µè€Œå®šâ€ã€‚</p>
<span id="more"></span>

<p>é•¿çš„ç­”æ¡ˆæ˜¯æ¯ç§æ–¹æ³•éƒ½æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œé€šå¸¸ç”±å¼€å‘äººå‘˜å†³å®šå“ªç§ç­–ç•¥æ›´é€‚åˆä»–ä»¬ã€‚ç”±äºå®ƒä»¬çš„å®šä¹‰æ–¹å¼ï¼Œæ³¨è§£åœ¨å®ƒä»¬çš„å£°æ˜ä¸­æä¾›äº†å¾ˆå¤šä¸Šä¸‹æ–‡ï¼Œä»è€Œå¯¼è‡´æ›´çŸ­å’Œæ›´ç®€æ´çš„é…ç½®ã€‚ç„¶è€Œï¼ŒXML æ“…é•¿è¿æ¥ç»„ä»¶ï¼Œè€Œæ— éœ€æ¥è§¦å®ƒä»¬çš„æºä»£ç æˆ–é‡æ–°ç¼–è¯‘å®ƒä»¬ã€‚ä¸€äº›å¼€å‘äººå‘˜æ›´å–œæ¬¢å°†è£…é…é è¿‘æºç ï¼Œè€Œå…¶ä»–äººåˆ™è®¤ä¸ºå¸¦æ³¨è§£çš„ç±»ä¸å†æ˜¯ POJOï¼Œè€Œä¸”é…ç½®å˜å¾—åˆ†æ•£ä¸”æ›´éš¾æ§åˆ¶ã€‚</p>
<p>æ— è®ºé€‰æ‹©å“ªç§ï¼ŒSpring éƒ½å¯ä»¥å®¹çº³è¿™ä¸¤ç§é£æ ¼ï¼Œç”šè‡³å¯ä»¥å°†å®ƒä»¬æ··åˆåœ¨ä¸€èµ·ã€‚å€¼å¾—æŒ‡å‡ºçš„æ˜¯ï¼Œé€šè¿‡å…¶ JavaConfig é€‰é¡¹ï¼ŒSpring å…è®¸ä»¥éä¾µå…¥æ€§æ–¹å¼ä½¿ç”¨æ³¨è§£ï¼Œè€Œæ— éœ€è§¦åŠç›®æ ‡ç»„ä»¶æºä»£ç ï¼Œå¹¶ä¸”åœ¨å·¥å…·æ–¹é¢ï¼ŒSpring Tools for Eclipse æ”¯æŒæ‰€æœ‰é…ç½®æ ·å¼ã€‚</p>
<p>åŸºäºæ³¨è§£çš„é…ç½®ï¼Œä¾èµ–å­—èŠ‚ç å…ƒæ•°æ®æ¥è¿æ¥ç»„ä»¶è€Œä¸æ˜¯å°–æ‹¬å·å£°æ˜ã€‚å¼€å‘äººå‘˜ä¸ä½¿ç”¨ XML æ¥æè¿° bean è¿æ¥ï¼Œè€Œæ˜¯é€šè¿‡åœ¨ç›¸å…³ç±»ã€æ–¹æ³•æˆ–å­—æ®µå£°æ˜ä¸Šä½¿ç”¨æ³¨è§£å°†é…ç½®ç§»åŠ¨åˆ°ç»„ä»¶ç±»æœ¬èº«ä¸­ã€‚å¦‚ç¤ºä¾‹ï¼š<code>AutowiredAnnotationBeanPostProcessor</code> ä¸­æ‰€è¿°ï¼Œå°† <code>BeanPostProcessor </code>ä¸æ³¨è§£ç»“åˆä½¿ç”¨æ˜¯æ‰©å±• Spring IoC å®¹å™¨çš„å¸¸ç”¨æ–¹æ³•ã€‚ä¾‹å¦‚ï¼ŒSpring 2.0 å¼•å…¥äº†ä½¿ç”¨ <code>@Required </code>æ³¨è§£å¼ºåˆ¶æ‰§è¡Œå¿…éœ€å±æ€§çš„å¯èƒ½æ€§ã€‚ Spring 2.5 ä½¿å¾—éµå¾ªç›¸åŒçš„é€šç”¨æ–¹æ³•æ¥é©±åŠ¨ Spring çš„ä¾èµ–æ³¨å…¥æˆä¸ºå¯èƒ½ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œ<code>@Autowired</code> æ³¨è§£æä¾›äº†ä¸<code> Autowiring Collaborators</code> ä¸­æè¿°çš„ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†å…·æœ‰æ›´ç»†ç²’åº¦çš„æ§åˆ¶å’Œæ›´å¹¿æ³›çš„é€‚ç”¨æ€§ã€‚ Spring 2.5 è¿˜æ·»åŠ äº†å¯¹ JSR-250 æ³¨è§£çš„æ”¯æŒï¼Œä¾‹å¦‚<code> @PostConstruct</code> å’Œ <code>@PreDestroy</code>ã€‚ Spring 3.0 æ·»åŠ äº†å¯¹åŒ…å«åœ¨ javax.inject åŒ…ä¸­çš„ JSR-330ï¼ˆJava ä¾èµ–æ³¨å…¥ï¼‰æ³¨è§£çš„æ”¯æŒï¼Œä¾‹å¦‚ <code>@Inject</code> å’Œ <code>@Named</code>ã€‚</p>
<p>æ³¨è§£æ³¨å…¥åœ¨ XML æ³¨å…¥ä¹‹å‰æ‰§è¡Œã€‚å› æ­¤ï¼ŒXML é…ç½®ä¼šè¦†ç›–é€šè¿‡è¿™ä¸¤ç§æ–¹æ³•è¿æ¥çš„å±æ€§çš„æ³¨é‡Šã€‚</p>
<p>å¯ä»¥å°†post-processorsæ³¨å†Œä¸ºå•ç‹¬çš„ bean å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨åŸºäº XML çš„ Spring é…ç½®ä¸­åŒ…å«ä»¥ä¸‹æ ‡è®°æ¥éšå¼æ³¨å†Œå®ƒä»¬ï¼ˆæ³¨æ„åŒ…å«ä¸Šä¸‹æ–‡å‘½åç©ºé—´ï¼‰ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="context:annotation-config/">context:annotation-config/</a> å…ƒç´ éšå¼æ³¨å†Œä»¥ä¸‹åå¤„ç†å™¨ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.3.10-SNAPSHOT/javadoc-api/org/springframework/context/annotation/ConfigurationClassPostProcessor.html"><code>ConfigurationClassPostProcessor</code></a></li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.3.10-SNAPSHOT/javadoc-api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html"><code>AutowiredAnnotationBeanPostProcessor</code></a></li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.3.10-SNAPSHOT/javadoc-api/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.html"><code>CommonAnnotationBeanPostProcessor</code></a></li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.3.10-SNAPSHOT/javadoc-api/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.html"><code>PersistenceAnnotationBeanPostProcessor</code></a></li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/5.3.10-SNAPSHOT/javadoc-api/org/springframework/context/event/EventListenerMethodProcessor.html"><code>EventListenerMethodProcessor</code></a></li>
</ul>
<p><a href="context:annotation-config/">context:annotation-config/</a> ä»…åœ¨å®šä¹‰å®ƒçš„åŒä¸€åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ bean ä¸Šçš„æ³¨é‡Šã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨å°† <a href="context:annotation-config/">context:annotation-config/</a> æ”¾åœ¨ DispatcherServlet çš„ WebApplicationContext ä¸­ï¼Œå®ƒåªä¼šæ£€æŸ¥æ§åˆ¶å™¨ä¸­çš„ @Autowired beanï¼Œè€Œä¸æ£€æŸ¥æ‚¨çš„æœåŠ¡ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… DispatcherServletã€‚</p>
<h2 id="Required"><a href="#Required" class="headerlink" title="@Required"></a>@Required</h2><p>@Required æ³¨é‡Šé€‚ç”¨äº bean å±æ€§ setter æ–¹æ³•ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Required</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieFinder</span><span class="params">(MovieFinder movieFinder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ³¨é‡Šè¡¨æ˜å¿…é¡»åœ¨é…ç½®æ—¶é€šè¿‡ bean å®šä¹‰ä¸­çš„æ˜¾å¼å±æ€§å€¼æˆ–é€šè¿‡è‡ªåŠ¨è£…é…æ¥å¡«å……å—å½±å“çš„ bean å±æ€§ã€‚å¦‚æœå°šæœªå¡«å……å—å½±å“çš„ bean å±æ€§ï¼Œåˆ™å®¹å™¨å°†å¼•å‘å¼‚å¸¸ã€‚è¿™å…è®¸æ€¥åˆ‡å’Œæ˜¾å¼å¤±è´¥ï¼Œé¿å…ä»¥åå‡ºç° NullPointerException å®ä¾‹ç­‰ã€‚æˆ‘ä»¬ä»ç„¶å»ºè®®æ‚¨å°†æ–­è¨€æ”¾å…¥ bean ç±»æœ¬èº«ï¼ˆä¾‹å¦‚ï¼Œæ”¾å…¥ init æ–¹æ³•ï¼‰ã€‚è¿™æ ·åšä¼šå¼ºåˆ¶æ‰§è¡Œé‚£äº›å¿…éœ€çš„å¼•ç”¨å’Œå€¼ï¼Œå³ä½¿æ‚¨åœ¨å®¹å™¨å¤–éƒ¨ä½¿ç”¨è¯¥ç±»ã€‚</p>
<p>RequiredAnnotationBeanPostProcessor å¿…é¡»æ³¨å†Œä¸º bean æ‰èƒ½å¯ç”¨å¯¹ @Required æ³¨é‡Šçš„æ”¯æŒã€‚</p>
<p>@Required annotation å’Œ RequiredAnnotationBeanPostProcessor ä» Spring Framework 5.1 å¼€å§‹æ­£å¼å¼ƒç”¨ï¼Œèµæˆä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥è¿›è¡Œæ‰€éœ€è®¾ç½®ï¼ˆæˆ– InitializingBean.afterPropertiesSet() çš„è‡ªå®šä¹‰å®ç°æˆ–è‡ªå®šä¹‰ @PostConstruct æ–¹æ³•ä»¥åŠ bean å±æ€§ setter æ–¹æ³•ï¼‰ã€‚</p>
<h2 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a><code>@Autowired</code></h2><p>JSR 330 çš„ @Inject æ³¨è§£å¯ä»¥ç”¨æ¥ä»£æ›¿ Spring çš„ @Autowired æ³¨è§£åœ¨æœ¬èŠ‚åŒ…å«çš„ç¤ºä¾‹ä¸­ã€‚è¯·å‚é˜…æ­¤å¤„äº†è§£æ›´å¤šè¯¦æƒ…ã€‚</p>
<p>æ‚¨å¯ä»¥å°† @Autowired æ³¨é‡Šåº”ç”¨äºæ„é€ å‡½æ•°ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">(CustomerPreferenceDao customerPreferenceDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä» Spring Framework 4.3 å¼€å§‹ï¼Œå¦‚æœç›®æ ‡ bean ä»…å®šä¹‰äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåˆ™ä¸å†éœ€è¦åœ¨æ­¤ç±»æ„é€ å‡½æ•°ä¸Šæ·»åŠ  @Autowired æ³¨é‡Šã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªæ„é€ å‡½æ•°å¯ç”¨å¹¶ä¸”æ²¡æœ‰ä¸»/é»˜è®¤æ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»è‡³å°‘ç”¨ @Autowired æ³¨é‡Šæ„é€ å‡½æ•°ä¹‹ä¸€ï¼Œä»¥ä¾¿æŒ‡ç¤ºå®¹å™¨ä½¿ç”¨å“ªä¸ªæ„é€ å‡½æ•°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³æ„é€ å‡½æ•°è§£æçš„è®¨è®ºã€‚</p>
<p>æ‚¨è¿˜å¯ä»¥å°† @Autowired æ³¨é‡Šåº”ç”¨äºä¼ ç»Ÿçš„ setter æ–¹æ³•ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieFinder</span><span class="params">(MovieFinder movieFinder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‚¨è¿˜å¯ä»¥å°†æ³¨é‡Šåº”ç”¨äºå…·æœ‰ä»»æ„åç§°å’Œå¤šä¸ªå‚æ•°çš„æ–¹æ³•ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">(MovieCatalog movieCatalog,</span></span></span><br><span class="line"><span class="params"><span class="function">            CustomerPreferenceDao customerPreferenceDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieCatalog = movieCatalog;</span><br><span class="line">        <span class="keyword">this</span>.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‚¨ä¹Ÿå¯ä»¥å°† @Autowired åº”ç”¨äºå­—æ®µï¼Œç”šè‡³å°†å…¶ä¸æ„é€ å‡½æ•°æ··åˆä½¿ç”¨ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">(CustomerPreferenceDao customerPreferenceDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¡®ä¿æ‚¨çš„ç›®æ ‡ç»„ä»¶ï¼ˆä¾‹å¦‚ï¼ŒMovieCatalog æˆ– CustomerPreferenceDaoï¼‰ç”±æ‚¨ç”¨äº @Autowired-annotated æ³¨å…¥ç‚¹çš„ç±»å‹ä¸€è‡´å£°æ˜ã€‚å¦åˆ™ï¼Œæ³¨å…¥å¯èƒ½ä¼šå› è¿è¡Œæ—¶â€œæœªæ‰¾åˆ°ç±»å‹åŒ¹é…â€é”™è¯¯è€Œå¤±è´¥ã€‚<br>å¯¹äºé€šè¿‡ç±»è·¯å¾„æ‰«ææ‰¾åˆ°çš„ XML å®šä¹‰çš„ bean æˆ–ç»„ä»¶ç±»ï¼Œå®¹å™¨é€šå¸¸é¢„å…ˆçŸ¥é“å…·ä½“ç±»å‹ã€‚ä½†æ˜¯ï¼Œå¯¹äº@Bean å·¥å‚æ–¹æ³•ï¼Œæ‚¨éœ€è¦ç¡®ä¿å£°æ˜çš„è¿”å›ç±»å‹å…·æœ‰è¶³å¤Ÿçš„è¡¨ç°åŠ›ã€‚å¯¹äºå®ç°å¤šä¸ªæ¥å£çš„ç»„ä»¶æˆ–ç”±å…¶å®ç°ç±»å‹å¯èƒ½å¼•ç”¨çš„ç»„ä»¶ï¼Œè¯·è€ƒè™‘åœ¨æ‚¨çš„å·¥å‚æ–¹æ³•ä¸­å£°æ˜æœ€å…·ä½“çš„è¿”å›ç±»å‹ï¼ˆè‡³å°‘ä¸å¼•ç”¨æ‚¨çš„ bean çš„æ³¨å…¥ç‚¹è¦æ±‚çš„ä¸€æ ·å…·ä½“ï¼‰ã€‚</p>
<p>æ‚¨è¿˜å¯ä»¥é€šè¿‡å°† @Autowired æ³¨é‡Šæ·»åŠ åˆ°éœ€è¦è¯¥ç±»å‹æ•°ç»„çš„å­—æ®µæˆ–æ–¹æ³•æ¥æŒ‡ç¤º Spring ä» ApplicationContext æä¾›ç‰¹å®šç±»å‹çš„æ‰€æœ‰ beanï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog[] movieCatalogs;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™åŒæ ·é€‚ç”¨äºç±»å‹åŒ–é›†åˆï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Set&lt;MovieCatalog&gt; movieCatalogs;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieCatalogs</span><span class="params">(Set&lt;MovieCatalog&gt; movieCatalogs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieCatalogs = movieCatalogs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ‚¨å¸Œæœ›æ•°ç»„æˆ–åˆ—è¡¨ä¸­çš„é¡¹ç›®æŒ‰ç‰¹å®šé¡ºåºæ’åºï¼Œæ‚¨çš„ç›®æ ‡ bean å¯ä»¥å®ç° org.springframework.core.Ordered æ¥å£æˆ–ä½¿ç”¨ @Order æˆ–æ ‡å‡† @Priority æ³¨é‡Šã€‚å¦åˆ™ï¼Œå®ƒä»¬çš„é¡ºåºéµå¾ªå®¹å™¨ä¸­ç›¸åº”ç›®æ ‡ bean å®šä¹‰çš„æ³¨å†Œé¡ºåºã€‚<br>æ‚¨å¯ä»¥åœ¨ç›®æ ‡ç±»çº§åˆ«å’Œ @Bean æ–¹æ³•ä¸Šå£°æ˜ @Order æ³¨é‡Šï¼Œå¯èƒ½ç”¨äºå•ä¸ª bean å®šä¹‰ï¼ˆåœ¨å¤šä¸ªå®šä¹‰ä½¿ç”¨ç›¸åŒ bean ç±»çš„æƒ…å†µä¸‹ï¼‰ã€‚ @Order å€¼å¯èƒ½ä¼šå½±å“æ³¨å…¥ç‚¹çš„ä¼˜å…ˆçº§ï¼Œä½†è¯·æ³¨æ„ï¼Œå®ƒä»¬ä¸ä¼šå½±å“å•ä¾‹å¯åŠ¨é¡ºåºï¼Œè¿™æ˜¯ç”±ä¾èµ–å…³ç³»å’Œ @DependsOn å£°æ˜å†³å®šçš„æ­£äº¤é—®é¢˜ã€‚<br>è¯·æ³¨æ„ï¼Œæ ‡å‡† javax.annotation.Priority æ³¨é‡Šåœ¨ @Bean çº§åˆ«ä¸å¯ç”¨ï¼Œå› ä¸ºå®ƒä¸èƒ½åœ¨æ–¹æ³•ä¸Šå£°æ˜ã€‚å®ƒçš„è¯­ä¹‰å¯ä»¥é€šè¿‡@Order å€¼ç»“åˆ@Primary åœ¨æ¯ä¸ªç±»å‹çš„å•ä¸ªbean ä¸Šå»ºæ¨¡ã€‚</p>
<p>åªè¦é¢„æœŸçš„é”®ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œå³ä½¿æ˜¯ç±»å‹åŒ–çš„ Map å®ä¾‹ä¹Ÿå¯ä»¥è‡ªåŠ¨è£…é…ã€‚æ˜ å°„å€¼åŒ…å«é¢„æœŸç±»å‹çš„æ‰€æœ‰ beanï¼Œé”®åŒ…å«ç›¸åº”çš„ bean åç§°ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, MovieCatalog&gt; movieCatalogs;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieCatalogs</span><span class="params">(Map&lt;String, MovieCatalog&gt; movieCatalogs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieCatalogs = movieCatalogs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç»™å®šæ³¨å…¥ç‚¹æ²¡æœ‰åŒ¹é…çš„å€™é€‰ bean æ—¶ï¼Œè‡ªåŠ¨è£…é…å¤±è´¥ã€‚å¯¹äºå£°æ˜çš„æ•°ç»„ã€é›†åˆæˆ–æ˜ å°„ï¼Œè‡³å°‘éœ€è¦ä¸€ä¸ªåŒ¹é…å…ƒç´ ã€‚<br>é»˜è®¤è¡Œä¸ºæ˜¯å°†å¸¦æ³¨é‡Šçš„æ–¹æ³•å’Œå­—æ®µè§†ä¸ºæŒ‡ç¤ºæ‰€éœ€çš„ä¾èµ–é¡¹ã€‚æ‚¨å¯ä»¥æ›´æ”¹æ­¤è¡Œä¸ºï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼Œé€šè¿‡å°†ä¸å¯æ»¡è¶³çš„æ³¨å…¥ç‚¹æ ‡è®°ä¸ºéå¿…éœ€ï¼ˆå³ï¼Œé€šè¿‡å°† @Autowired ä¸­çš„ required å±æ€§è®¾ç½®ä¸º falseï¼‰ï¼Œä½¿æ¡†æ¶èƒ½å¤Ÿè·³è¿‡ä¸å¯æ»¡è¶³çš„æ³¨å…¥ç‚¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieFinder</span><span class="params">(MovieFinder movieFinder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœéå¿…éœ€æ–¹æ³•çš„ä¾èµ–é¡¹ï¼ˆæˆ–å…¶ä¾èµ–é¡¹ä¹‹ä¸€ï¼Œå¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼‰ä¸å¯ç”¨ï¼Œåˆ™æ ¹æœ¬ä¸ä¼šè°ƒç”¨å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ¹æœ¬ä¸ä¼šå¡«å……éå¿…å¡«å­—æ®µï¼Œè€Œæ˜¯ä¿ç•™å…¶é»˜è®¤å€¼ã€‚<br>æ³¨å…¥çš„æ„é€ å‡½æ•°å’Œå·¥å‚æ–¹æ³•å‚æ•°æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå› ä¸ºç”±äº Spring çš„æ„é€ å‡½æ•°è§£æç®—æ³•å¯èƒ½æ½œåœ¨åœ°å¤„ç†å¤šä¸ªæ„é€ å‡½æ•°ï¼Œ@Autowired ä¸­çš„ required å±æ€§å…·æœ‰ä¸€äº›ä¸åŒçš„å«ä¹‰ã€‚æ„é€ å‡½æ•°å’Œå·¥å‚æ–¹æ³•å‚æ•°åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯æœ‰æ•ˆçš„ï¼Œä½†åœ¨å•æ„é€ å‡½æ•°åœºæ™¯ä¸­æœ‰ä¸€äº›ç‰¹æ®Šè§„åˆ™ï¼Œä¾‹å¦‚å¤šå…ƒç´ æ³¨å…¥ç‚¹ï¼ˆæ•°ç»„ã€é›†åˆã€æ˜ å°„ï¼‰åœ¨æ²¡æœ‰åŒ¹é…çš„ bean å¯ç”¨æ—¶è§£æä¸ºç©ºå®ä¾‹ã€‚è¿™å…è®¸ä¸€ç§é€šç”¨çš„å®ç°æ¨¡å¼ï¼Œå…¶ä¸­æ‰€æœ‰ä¾èµ–é¡¹éƒ½å¯ä»¥åœ¨å”¯ä¸€çš„å¤šå‚æ•°æ„é€ å‡½æ•°ä¸­å£°æ˜â€”â€”ä¾‹å¦‚ï¼Œå£°æ˜ä¸ºæ²¡æœ‰ @Autowired æ³¨é‡Šçš„å•ä¸ªå…¬å…±æ„é€ å‡½æ•°ã€‚</p>
<p>ä»»ä½•ç»™å®šçš„ bean ç±»åªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥å£°æ˜ @Autowired å¹¶å°† required å±æ€§è®¾ç½®ä¸º trueï¼ŒæŒ‡ç¤ºå½“ç”¨ä½œ Spring bean æ—¶è‡ªåŠ¨è£…é…çš„æ„é€ å‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æœ required å±æ€§ä¿ç•™å…¶é»˜è®¤å€¼ trueï¼Œåˆ™åªèƒ½ä½¿ç”¨ @Autowired æ³¨é‡Šå•ä¸ªæ„é€ å‡½æ•°ã€‚å¦‚æœå¤šä¸ªæ„é€ å‡½æ•°å£°æ˜äº†æ³¨é‡Šï¼Œå®ƒä»¬éƒ½å¿…é¡»å£°æ˜ required=false æ‰èƒ½è¢«è§†ä¸ºè‡ªåŠ¨è£…é…çš„å€™é€‰å¯¹è±¡ï¼ˆç±»ä¼¼äº XML ä¸­çš„ autowire=constructorï¼‰ã€‚å°†é€‰æ‹©é€šè¿‡åŒ¹é… Spring å®¹å™¨ä¸­çš„ bean å¯ä»¥æ»¡è¶³çš„ä¾èµ–é¡¹æ•°é‡æœ€å¤šçš„æ„é€ å‡½æ•°ã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªå€™é€‰å¯ä»¥æ»¡è¶³ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ä¸»/é»˜è®¤æ„é€ å‡½æ•°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœä¸€ä¸ªç±»å£°æ˜äº†å¤šä¸ªæ„é€ å‡½æ•°ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªç”¨ @Autowired æ³¨é‡Šï¼Œåˆ™å°†ä½¿ç”¨ä¸»/é»˜è®¤æ„é€ å‡½æ•°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚å¦‚æœä¸€ä¸ªç±»åªå£°æ˜ä¸€ä¸ªæ„é€ å‡½æ•°å¼€å§‹ï¼Œå®ƒå°†å§‹ç»ˆè¢«ä½¿ç”¨ï¼Œå³ä½¿æ²¡æœ‰æ³¨é‡Šã€‚è¯·æ³¨æ„ï¼Œå¸¦æ³¨é‡Šçš„æ„é€ å‡½æ•°ä¸å¿…æ˜¯å…¬å…±çš„ã€‚<br>æ¨èä½¿ç”¨ @Autowired çš„ required å±æ€§ï¼Œè€Œä¸æ˜¯ setter æ–¹æ³•ä¸Šå·²å¼ƒç”¨çš„ @Required æ³¨é‡Šã€‚å°† required å±æ€§è®¾ç½®ä¸º false è¡¨ç¤ºè‡ªåŠ¨è£…é…ä¸éœ€è¦è¯¥å±æ€§ï¼Œå¦‚æœä¸èƒ½è‡ªåŠ¨è£…é…ï¼Œåˆ™å¿½ç•¥è¯¥å±æ€§ã€‚å¦ä¸€æ–¹é¢ï¼Œ@Required æ›´å¼ºå¤§ï¼Œå› ä¸ºå®ƒå¼ºåˆ¶é€šè¿‡å®¹å™¨æ”¯æŒçš„ä»»ä½•æ–¹å¼è®¾ç½®å±æ€§ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰å€¼ï¼Œåˆ™ä¼šå¼•å‘ç›¸åº”çš„å¼‚å¸¸ã€‚</p>
<p>æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€šè¿‡ Java 8 çš„ java.util.Optional è¡¨è¾¾ç‰¹å®šä¾èµ–é¡¹çš„éå¿…éœ€æ€§è´¨ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieFinder</span><span class="params">(Optional&lt;MovieFinder&gt; movieFinder)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä» Spring Framework 5.0 å¼€å§‹ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ @Nullable æ³¨é‡Šï¼ˆä»»ä½•åŒ…ä¸­çš„ä»»ä½•ç±»å‹ â€” ä¾‹å¦‚ï¼Œæ¥è‡ª JSR-305 çš„ javax.annotation.Nullableï¼‰æˆ–ä»…åˆ©ç”¨ Kotlin å†…ç½®çš„ç©ºå®‰å…¨æ”¯æŒï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieFinder</span><span class="params">(<span class="meta">@Nullable</span> MovieFinder movieFinder)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‚¨è¿˜å¯ä»¥å°† @Autowired ç”¨äºä¼—æ‰€å‘¨çŸ¥çš„å¯è§£æä¾èµ–é¡¹çš„æ¥å£ï¼šBeanFactoryã€ApplicationContextã€Environmentã€ResourceLoaderã€ApplicationEventPublisher å’Œ MessageSourceã€‚è¿™äº›æ¥å£åŠå…¶æ‰©å±•æ¥å£ï¼ˆä¾‹å¦‚ ConfigurableApplicationContext æˆ– ResourcePatternResolverï¼‰ä¼šè‡ªåŠ¨è§£æï¼Œæ— éœ€ç‰¹æ®Šè®¾ç½®ã€‚ä»¥ä¸‹ç¤ºä¾‹è‡ªåŠ¨è£…é… ApplicationContext å¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Autowiredã€@Injectã€@Value å’Œ @Resource æ³¨é‡Šç”± Spring BeanPostProcessor å®ç°å¤„ç†ã€‚è¿™æ„å‘³ç€æ‚¨ä¸èƒ½åœ¨è‡ªå·±çš„ BeanPostProcessor æˆ– BeanFactoryPostProcessor ç±»å‹ï¼ˆå¦‚æœæœ‰ï¼‰ä¸­åº”ç”¨è¿™äº›æ³¨é‡Šã€‚è¿™äº›ç±»å‹å¿…é¡»ä½¿ç”¨ XML æˆ– Spring @Bean æ–¹æ³•æ˜¾å¼â€œè¿æ¥â€ã€‚</p>
<h2 id="ä½¿ç”¨-Primary-å¾®è°ƒåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…"><a href="#ä½¿ç”¨-Primary-å¾®è°ƒåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…" class="headerlink" title="ä½¿ç”¨@Primary å¾®è°ƒåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…"></a>ä½¿ç”¨@Primary å¾®è°ƒåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…</h2><p>ç”±äºæŒ‰ç±»å‹è‡ªåŠ¨è£…é…å¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªå€™é€‰å¯¹è±¡ï¼Œå› æ­¤é€šå¸¸éœ€è¦å¯¹é€‰æ‹©è¿‡ç¨‹è¿›è¡Œæ›´å¤šæ§åˆ¶ã€‚å®ç°æ­¤ç›®çš„çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ Spring çš„ @Primary æ³¨é‡Šã€‚ @Primary è¡¨ç¤ºå½“å¤šä¸ª bean æ˜¯è‡ªåŠ¨è£…é…åˆ°å•å€¼ä¾èµ–é¡¹çš„å€™é€‰è€…æ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘ç‰¹å®š beanã€‚å¦‚æœå€™é€‰ä¸­æ°å¥½å­˜åœ¨ä¸€ä¸ªä¸»è¦ beanï¼Œåˆ™å®ƒæˆä¸ºè‡ªåŠ¨è£…é…çš„å€¼ã€‚<br>è€ƒè™‘ä»¥ä¸‹å°† firstMovieCatalog å®šä¹‰ä¸ºä¸»è¦ MovieCatalog çš„é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MovieCatalog <span class="title">firstMovieCatalog</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MovieCatalog <span class="title">secondMovieCatalog</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä¸Šè¿°é…ç½®ï¼Œä»¥ä¸‹ MovieRecommender è‡ªåŠ¨è£…é…åˆ° firstMovieCatalogï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸åº”çš„beanå®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span> <span class="attr">primary</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;movieRecommender&quot;</span> <span class="attr">class</span>=<span class="string">&quot;example.MovieRecommender&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨é™å®šç¬¦å¾®è°ƒåŸºäºæ³¨é‡Šçš„è‡ªåŠ¨è£…é…"><a href="#ä½¿ç”¨é™å®šç¬¦å¾®è°ƒåŸºäºæ³¨é‡Šçš„è‡ªåŠ¨è£…é…" class="headerlink" title="ä½¿ç”¨é™å®šç¬¦å¾®è°ƒåŸºäºæ³¨é‡Šçš„è‡ªåŠ¨è£…é…"></a>ä½¿ç”¨é™å®šç¬¦å¾®è°ƒåŸºäºæ³¨é‡Šçš„è‡ªåŠ¨è£…é…</h2><p>@Primary æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå½“å¯ä»¥ç¡®å®šä¸€ä¸ªä¸»è¦å€™é€‰å¯¹è±¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å¤šä¸ªå®ä¾‹æŒ‰ç±»å‹ä½¿ç”¨è‡ªåŠ¨è£…é…ã€‚å½“æ‚¨éœ€è¦å¯¹é€‰æ‹©è¿‡ç¨‹è¿›è¡Œæ›´å¤šæ§åˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Spring çš„ @Qualifier æ³¨è§£ã€‚æ‚¨å¯ä»¥å°†é™å®šç¬¦å€¼ä¸ç‰¹å®šå‚æ•°ç›¸å…³è”ï¼Œç¼©å°ç±»å‹åŒ¹é…çš„èŒƒå›´ï¼Œä»¥ä¾¿ä¸ºæ¯ä¸ªå‚æ•°é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„ beanã€‚åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œè¿™å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„æè¿°æ€§å€¼ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;main&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‚¨è¿˜å¯ä»¥åœ¨å•ä¸ªæ„é€ å‡½æ•°å‚æ•°æˆ–æ–¹æ³•å‚æ•°ä¸ŠæŒ‡å®š @Qualifier æ³¨é‡Šï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">(<span class="meta">@Qualifier(&quot;main&quot;)</span> MovieCatalog movieCatalog,</span></span></span><br><span class="line"><span class="params"><span class="function">            CustomerPreferenceDao customerPreferenceDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieCatalog = movieCatalog;</span><br><span class="line">        <span class="keyword">this</span>.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†ç›¸åº”çš„ bean å®šä¹‰ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">value</span>=<span class="string">&quot;main&quot;</span>/&gt;</span> 1</span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">value</span>=<span class="string">&quot;action&quot;</span>/&gt;</span> 2</span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;movieRecommender&quot;</span> <span class="attr">class</span>=<span class="string">&quot;example.MovieRecommender&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å…·æœ‰ä¸»è¦é™å®šç¬¦å€¼çš„ bean ä¸æ„é€ å‡½æ•°å‚æ•°ç›¸è¿å…·æœ‰ç›¸åŒçš„å€¼ã€‚</li>
<li>å…·æœ‰æ“ä½œé™å®šç¬¦å€¼çš„ bean ä¸æ„é€ å‡½æ•°å‚æ•°ç›¸è¿å…·æœ‰ç›¸åŒçš„å€¼ã€‚</li>
</ul>
<p>å¯¹äºå›é€€åŒ¹é…ï¼Œbean åç§°è¢«è§†ä¸ºé»˜è®¤é™å®šç¬¦å€¼ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ main çš„ id è€Œä¸æ˜¯åµŒå¥—çš„ qualifier å…ƒç´ æ¥å®šä¹‰ beanï¼Œä»è€Œå¯¼è‡´ç›¸åŒçš„åŒ¹é…ç»“æœã€‚ä½†æ˜¯ï¼Œå°½ç®¡æ‚¨å¯ä»¥ä½¿ç”¨æ­¤çº¦å®šæŒ‰åç§°å¼•ç”¨ç‰¹å®š beanï¼Œä½† @Autowired ä»æ ¹æœ¬ä¸Šè®²æ˜¯å…³äºå¸¦æœ‰å¯é€‰è¯­ä¹‰é™å®šç¬¦çš„ç±»å‹é©±åŠ¨æ³¨å…¥ã€‚è¿™æ„å‘³ç€é™å®šç¬¦å€¼ï¼Œå³ä½¿ä½¿ç”¨ bean åç§°å›é€€ï¼Œåœ¨ç±»å‹åŒ¹é…é›†ä¸­å§‹ç»ˆå…·æœ‰ç¼©å°è¯­ä¹‰ã€‚å®ƒä»¬ä¸ä¼šåœ¨è¯­ä¹‰ä¸Šè¡¨è¾¾å¯¹å”¯ä¸€ bean id çš„å¼•ç”¨ã€‚å¥½çš„é™å®šç¬¦å€¼æ˜¯ main æˆ– EMEA æˆ–persistentï¼Œè¡¨ç¤ºç‹¬ç«‹äº bean id çš„ç‰¹å®šç»„ä»¶çš„ç‰¹å¾ï¼Œåœ¨åŒ¿å bean å®šä¹‰ï¼ˆä¾‹å¦‚å‰é¢ç¤ºä¾‹ä¸­çš„å®šä¹‰ï¼‰çš„æƒ…å†µä¸‹å¯ä»¥è‡ªåŠ¨ç”Ÿæˆã€‚</p>
<p>é™å®šç¬¦ä¹Ÿé€‚ç”¨äºç±»å‹åŒ–é›†åˆï¼Œå¦‚å‰æ‰€è¿° â€” ä¾‹å¦‚ï¼Œé€‚ç”¨äº Set<MovieCatalog>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ¹æ®å£°æ˜çš„é™å®šç¬¦ï¼Œæ‰€æœ‰åŒ¹é…çš„ bean ä½œä¸ºé›†åˆæ³¨å…¥ã€‚è¿™æ„å‘³ç€é™å®šç¬¦ä¸å¿…æ˜¯å”¯ä¸€çš„ã€‚ç›¸åï¼Œå®ƒä»¬æ„æˆè¿‡æ»¤æ ‡å‡†ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„é™å®šç¬¦å€¼â€œactionâ€å®šä¹‰å¤šä¸ª MovieCatalog beanï¼Œæ‰€æœ‰è¿™äº› bean éƒ½è¢«æ³¨å…¥åˆ°ä¸€ä¸ªç”¨ @Qualifier(â€œactionâ€) æ³¨é‡Šçš„ Set<MovieCatalog> ä¸­ã€‚</MovieCatalog></MovieCatalog></p>
<p>åœ¨ç±»å‹åŒ¹é…çš„å€™é€‰ä¸­ï¼Œè®©é™å®šç¬¦å€¼æ ¹æ®ç›®æ ‡ bean åç§°è¿›è¡Œé€‰æ‹©ï¼Œä¸éœ€è¦åœ¨æ³¨å…¥ç‚¹ä½¿ç”¨ @Qualifier æ³¨é‡Šã€‚å¦‚æœæ²¡æœ‰å…¶ä»–è§£ææŒ‡ç¤ºç¬¦ï¼ˆä¾‹å¦‚é™å®šç¬¦æˆ–ä¸»æ ‡è®°ï¼‰ï¼Œå¯¹äºéå”¯ä¸€ä¾èµ–çš„æƒ…å†µï¼ŒSpring å°†æ³¨å…¥ç‚¹åç§°ï¼ˆå³å­—æ®µåç§°æˆ–å‚æ•°åç§°ï¼‰ä¸ç›®æ ‡ bean åç§°è¿›è¡ŒåŒ¹é…å¹¶é€‰æ‹©åŒåå€™é€‰äººï¼Œå¦‚æœæœ‰çš„è¯ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ‚¨æ‰“ç®—æŒ‰åç§°è¡¨è¾¾æ³¨è§£é©±åŠ¨çš„æ³¨å…¥ï¼Œè¯·ä¸è¦ä¸»è¦ä½¿ç”¨ @Autowiredï¼Œå³ä½¿å®ƒèƒ½å¤Ÿåœ¨ç±»å‹åŒ¹é…çš„å€™é€‰ä¸­æŒ‰ bean åç§°è¿›è¡Œé€‰æ‹©ã€‚ç›¸åï¼Œè¯·ä½¿ç”¨ JSR-250 @Resource æ³¨é‡Šï¼Œè¯¥æ³¨é‡Šåœ¨è¯­ä¹‰ä¸Šå®šä¹‰ä¸ºé€šè¿‡å…¶å”¯ä¸€åç§°æ ‡è¯†ç‰¹å®šç›®æ ‡ç»„ä»¶ï¼Œå£°æ˜çš„ç±»å‹ä¸åŒ¹é…è¿‡ç¨‹æ— å…³ã€‚ @Autowired æœ‰ç›¸å½“ä¸åŒçš„è¯­ä¹‰ï¼šæŒ‰ç±»å‹é€‰æ‹©å€™é€‰ bean åï¼ŒæŒ‡å®šçš„ String é™å®šç¬¦å€¼ä»…åœ¨é‚£äº›ç±»å‹é€‰æ‹©çš„å€™é€‰ä¸­è€ƒè™‘ï¼ˆä¾‹å¦‚ï¼Œå°†å¸æˆ·é™å®šç¬¦ä¸æ ‡è®°æœ‰ç›¸åŒé™å®šç¬¦æ ‡ç­¾çš„ bean åŒ¹é…ï¼‰ã€‚</p>
<p>å¯¹äºæœ¬èº«å®šä¹‰ä¸ºé›†åˆã€æ˜ å°„æˆ–æ•°ç»„ç±»å‹çš„ beanï¼Œ@Resource æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å”¯ä¸€åç§°å¼•ç”¨ç‰¹å®šçš„é›†åˆæˆ–æ•°ç»„ beanã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä» 4.3 å¼€å§‹ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ Spring çš„ @Autowired ç±»å‹åŒ¹é…ç®—æ³•åŒ¹é…é›†åˆã€Map å’Œæ•°ç»„ç±»å‹ï¼Œåªè¦å…ƒç´ ç±»å‹ä¿¡æ¯ä¿ç•™åœ¨ @Bean è¿”å›ç±»å‹ç­¾åæˆ–é›†åˆç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸­å³å¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é™å®šç¬¦å€¼åœ¨ç›¸åŒç±»å‹çš„é›†åˆä¸­è¿›è¡Œé€‰æ‹©ï¼Œå¦‚ä¸Šä¸€æ®µæ‰€è¿°ã€‚</p>
<p>ä» 4.3 å¼€å§‹ï¼Œ@Autowired è¿˜è€ƒè™‘æ³¨å…¥çš„è‡ªå¼•ç”¨ï¼ˆå³å¯¹å½“å‰æ³¨å…¥çš„ bean çš„å¼•ç”¨ï¼‰ã€‚è¯·æ³¨æ„ï¼Œè‡ªæ³¨å…¥æ˜¯ä¸€ç§åå¤‡æ–¹æ³•ã€‚å¯¹å…¶ä»–ç»„ä»¶çš„å¸¸è§„ä¾èµ–å§‹ç»ˆå…·æœ‰ä¼˜å…ˆçº§ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œè‡ªæˆ‘æ¨èä¸å‚ä¸å¸¸è§„çš„å€™é€‰äººé€‰æ‹©ï¼Œå› æ­¤ç‰¹åˆ«æ˜¯ä»ä¸ä¸»è¦ã€‚ç›¸åï¼Œå®ƒä»¬æ€»æ˜¯ä»¥æœ€ä½çš„ä¼˜å…ˆçº§ç»“æŸã€‚åœ¨å®è·µä¸­ï¼Œæ‚¨åº”è¯¥ä»…å°†è‡ªå¼•ç”¨ç”¨ä½œæœ€åçš„æ‰‹æ®µï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ bean çš„äº‹åŠ¡ä»£ç†è°ƒç”¨åŒä¸€å®ä¾‹ä¸Šçš„å…¶ä»–æ–¹æ³•ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè€ƒè™‘å°†å—å½±å“çš„æ–¹æ³•åˆ†è§£ä¸ºå•ç‹¬çš„å§”æ‰˜ beanã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨@Resourceï¼Œå®ƒå¯ä»¥é€šè¿‡å…¶å”¯ä¸€åç§°è·å–è¿”å›å½“å‰ bean çš„ä»£ç†ã€‚</p>
<p>å°è¯•å°† @Bean æ–¹æ³•çš„ç»“æœæ³¨å…¥åŒä¸€é…ç½®ç±»ä¹Ÿæ˜¯ä¸€ç§æœ‰æ•ˆçš„è‡ªå¼•ç”¨åœºæ™¯ã€‚è¦ä¹ˆåœ¨å®é™…éœ€è¦çš„æ–¹æ³•ç­¾åä¸­å»¶è¿Ÿè§£ææ­¤ç±»å¼•ç”¨ï¼ˆè€Œä¸æ˜¯é…ç½®ç±»ä¸­çš„è‡ªåŠ¨è£…é…å­—æ®µï¼‰ï¼Œè¦ä¹ˆå°†å—å½±å“çš„@Bean æ–¹æ³•å£°æ˜ä¸ºé™æ€æ–¹æ³•ï¼Œå°†å®ƒä»¬ä¸åŒ…å«çš„é…ç½®ç±»å®ä¾‹åŠå…¶ç”Ÿå‘½å‘¨æœŸåˆ†ç¦»ã€‚å¦åˆ™ï¼Œä»…åœ¨å›é€€é˜¶æ®µè€ƒè™‘æ­¤ç±» beanï¼Œè€Œå°†å…¶ä»–é…ç½®ç±»ä¸Šçš„åŒ¹é… bean é€‰ä¸ºä¸»è¦å€™é€‰å¯¹è±¡ï¼ˆå¦‚æœå¯ç”¨ï¼‰ã€‚</p>
<p>@Autowired é€‚ç”¨äºå­—æ®µã€æ„é€ å‡½æ•°å’Œå¤šå‚æ•°æ–¹æ³•ï¼Œå…è®¸é€šè¿‡å‚æ•°çº§åˆ«çš„é™å®šç¬¦æ³¨é‡Šæ¥ç¼©å°èŒƒå›´ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ@Resource ä»…æ”¯æŒå¸¦æœ‰å•ä¸ªå‚æ•°çš„å­—æ®µå’Œ bean å±æ€§ setter æ–¹æ³•ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨çš„æ³¨å…¥ç›®æ ‡æ˜¯æ„é€ å‡½æ•°æˆ–å¤šå‚æ•°æ–¹æ³•ï¼Œæ‚¨åº”è¯¥åšæŒä½¿ç”¨é™å®šç¬¦ã€‚<br>æ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰é™å®šç¬¦æ³¨é‡Šã€‚ä¸ºæ­¤ï¼Œè¯·å®šä¹‰æ³¨é‡Šå¹¶åœ¨å®šä¹‰ä¸­æä¾› @Qualifier æ³¨é‡Šï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.PARAMETER&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Qualifier</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Genre &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨è‡ªåŠ¨è£…é…çš„å­—æ®µå’Œå‚æ•°ä¸Šæä¾›è‡ªå®šä¹‰é™å®šç¬¦ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Genre(&quot;Action&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog actionCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog comedyCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setComedyCatalog</span><span class="params">(<span class="meta">@Genre(&quot;Comedy&quot;)</span> MovieCatalog comedyCatalog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.comedyCatalog = comedyCatalog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œæ‚¨å¯ä»¥æä¾›å€™é€‰ bean å®šä¹‰çš„ä¿¡æ¯ã€‚æ‚¨å¯ä»¥æ·»åŠ  <qualifier> æ ‡ç­¾ä½œä¸º <bean> æ ‡ç­¾çš„å­å…ƒç´ ï¼Œç„¶åæŒ‡å®šç±»å‹å’Œå€¼ä»¥åŒ¹é…æ‚¨çš„è‡ªå®šä¹‰é™å®šç¬¦æ³¨é‡Šã€‚è¯¥ç±»å‹ä¸æ³¨é‡Šçš„å®Œå…¨é™å®šç±»ååŒ¹é…ã€‚æˆ–è€…ï¼Œå¦‚æœä¸å­˜åœ¨åç§°å†²çªçš„é£é™©ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨çŸ­ç±»åç§°ã€‚ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†è¿™ä¸¤ç§æ–¹æ³•ï¼š</bean></qualifier></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">type</span>=<span class="string">&quot;Genre&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Action&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">type</span>=<span class="string">&quot;example.Genre&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Comedy&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;movieRecommender&quot;</span> <span class="attr">class</span>=<span class="string">&quot;example.MovieRecommender&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ Classpath Scanning å’Œ Managed Components ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ä¸€ç§åŸºäºæ³¨é‡Šçš„æ›¿ä»£æ–¹æ¡ˆï¼Œä»¥åœ¨ XML ä¸­æä¾›é™å®šç¬¦å…ƒæ•°æ®ã€‚å…·ä½“æ¥è¯´ï¼Œè¯·å‚é˜…æä¾›å¸¦æœ‰æ³¨é‡Šçš„é™å®šç¬¦å…ƒæ•°æ®ã€‚<br>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ²¡æœ‰å€¼çš„æ³¨é‡Šå¯èƒ½å°±è¶³å¤Ÿäº†ã€‚å½“æ³¨é‡Šç”¨äºæ›´é€šç”¨çš„ç›®çš„å¹¶ä¸”å¯ä»¥åº”ç”¨äºå¤šç§ä¸åŒç±»å‹çš„ä¾èµ–é¡¹æ—¶ï¼Œè¿™å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æä¾›ä¸€ä¸ªç¦»çº¿ç›®å½•ï¼Œå½“æ²¡æœ‰å¯ç”¨çš„ Internet è¿æ¥æ—¶å¯ä»¥æœç´¢è¯¥ç›®å½•ã€‚é¦–å…ˆï¼Œå®šä¹‰ç®€å•çš„æ³¨è§£ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.PARAMETER&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Qualifier</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Offline &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°†æ³¨è§£æ·»åŠ åˆ°è¦è‡ªåŠ¨è£…é…çš„å­—æ®µæˆ–å±æ€§ä¸­ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Offline</span> </span><br><span class="line">    <span class="keyword">private</span> MovieCatalog offlineCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ bean å®šä¹‰åªéœ€è¦ä¸€ä¸ªé™å®šç¬¦ç±»å‹ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">type</span>=<span class="string">&quot;Offline&quot;</span>/&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é™¤äº†ç®€å•å€¼å±æ€§ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å®šä¹‰è‡ªå®šä¹‰é™å®šç¬¦æ³¨é‡Šï¼Œè¿™äº›æ³¨é‡Šæ¥å—å‘½åå±æ€§ã€‚å¦‚æœéšååœ¨è¦è‡ªåŠ¨è£…é…çš„å­—æ®µæˆ–å‚æ•°ä¸ŠæŒ‡å®šäº†å¤šä¸ªå±æ€§å€¼ï¼Œåˆ™ bean å®šä¹‰å¿…é¡»åŒ¹é…æ‰€æœ‰æ­¤ç±»å±æ€§å€¼æ‰èƒ½è¢«è§†ä¸ºè‡ªåŠ¨è£…é…å€™é€‰è€…ã€‚ä¾‹å¦‚ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹æ³¨é‡Šå®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.PARAMETER&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Qualifier</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MovieQualifier &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">genre</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Format <span class="title">format</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ç§æƒ…å†µä¸‹ Format æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Format</span> </span>&#123;</span><br><span class="line">    VHS, DVD, BLURAY</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¦è‡ªåŠ¨è£…é…çš„å­—æ®µä½¿ç”¨è‡ªå®šä¹‰é™å®šç¬¦è¿›è¡Œæ³¨é‡Šï¼Œå¹¶åŒ…å«ä¸¤ä¸ªå±æ€§çš„å€¼ï¼šæµæ´¾å’Œæ ¼å¼ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@MovieQualifier(format=Format.VHS, genre=&quot;Action&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog actionVhsCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@MovieQualifier(format=Format.VHS, genre=&quot;Comedy&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog comedyVhsCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@MovieQualifier(format=Format.DVD, genre=&quot;Action&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog actionDvdCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@MovieQualifier(format=Format.BLURAY, genre=&quot;Comedy&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog comedyBluRayCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œbean å®šä¹‰åº”è¯¥åŒ…å«åŒ¹é…çš„é™å®šç¬¦å€¼ã€‚æ­¤ç¤ºä¾‹è¿˜æ¼”ç¤ºäº†æ‚¨å¯ä»¥ä½¿ç”¨ bean å…ƒå±æ€§ä»£æ›¿ <qualifier> å…ƒç´ ã€‚å¦‚æœå¯ç”¨ï¼Œåˆ™ <qualifier> å…ƒç´ åŠå…¶å±æ€§ä¼˜å…ˆï¼Œä½†å¦‚æœä¸å­˜åœ¨æ­¤ç±»é™å®šç¬¦ï¼Œåˆ™è‡ªåŠ¨è£…é…æœºåˆ¶å°†å›é€€åˆ° <meta> æ ‡ç­¾ä¸­æä¾›çš„å€¼ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„æœ€åä¸¤ä¸ª bean å®šä¹‰ï¼š</qualifier></qualifier></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">type</span>=<span class="string">&quot;MovieQualifier&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">key</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;VHS&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">key</span>=<span class="string">&quot;genre&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Action&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">qualifier</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">type</span>=<span class="string">&quot;MovieQualifier&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">key</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;VHS&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">key</span>=<span class="string">&quot;genre&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Comedy&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">qualifier</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">key</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;DVD&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">key</span>=<span class="string">&quot;genre&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Action&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">key</span>=<span class="string">&quot;format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BLURAY&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">key</span>=<span class="string">&quot;genre&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Comedy&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨æ³›å‹ä½œä¸ºè‡ªåŠ¨è£…é…é™å®šç¬¦"><a href="#ä½¿ç”¨æ³›å‹ä½œä¸ºè‡ªåŠ¨è£…é…é™å®šç¬¦" class="headerlink" title="ä½¿ç”¨æ³›å‹ä½œä¸ºè‡ªåŠ¨è£…é…é™å®šç¬¦"></a>ä½¿ç”¨æ³›å‹ä½œä¸ºè‡ªåŠ¨è£…é…é™å®šç¬¦</h2><p>é™¤äº†@Qualifier æ³¨é‡Šä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ Java æ³›å‹ç±»å‹ä½œä¸ºé™å®šçš„éšå¼å½¢å¼ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æœ‰ä»¥ä¸‹é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StringStore <span class="title">stringStore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> StringStore();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IntegerStore <span class="title">integerStore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> IntegerStore();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡è®¾å‰é¢çš„beanå®ç°äº†ä¸€ä¸ªæ³›å‹æ¥å£ï¼Œï¼ˆå³Store<String>å’ŒStore<Integer>ï¼‰ï¼Œä½ å¯ä»¥@Autowire Storeæ¥å£ï¼Œå¹¶ä½¿ç”¨æ³›å‹ä½œä¸ºé™å®šç¬¦ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</Integer></String></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Store&lt;String&gt; s1; <span class="comment">// &lt;String&gt; qualifier, injects the stringStore bean</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Store&lt;Integer&gt; s2; <span class="comment">// &lt;Integer&gt; qualifier, injects the integerStore bean</span></span><br></pre></td></tr></table></figure>

<p>é€šç”¨é™å®šç¬¦ä¹Ÿé€‚ç”¨äºè‡ªåŠ¨è£…é…åˆ—è¡¨ã€Map å®ä¾‹å’Œæ•°ç»„ã€‚ä»¥ä¸‹ç¤ºä¾‹è‡ªåŠ¨è£…é…é€šç”¨åˆ—è¡¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Inject all Store beans as long as they have an &lt;Integer&gt; generic</span></span><br><span class="line"><span class="comment">// Store&lt;String&gt; beans will not appear in this list</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Store&lt;Integer&gt;&gt; s;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨-CustomAutowireConfigurer"><a href="#ä½¿ç”¨-CustomAutowireConfigurer" class="headerlink" title="ä½¿ç”¨ CustomAutowireConfigurer"></a>ä½¿ç”¨ CustomAutowireConfigurer</h2><p>CustomAutowireConfigurer æ˜¯ä¸€ä¸ª BeanFactoryPostProcessorï¼Œå®ƒå…è®¸æ‚¨æ³¨å†Œè‡ªå·±çš„è‡ªå®šä¹‰é™å®šç¬¦æ³¨è§£ç±»å‹ï¼Œå³ä½¿å®ƒä»¬æ²¡æœ‰ä½¿ç”¨ Spring çš„ @Qualifier æ³¨è§£è¿›è¡Œæ³¨è§£ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ CustomAutowireConfigurerï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;customAutowireConfigurer&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.springframework.beans.factory.annotation.CustomAutowireConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;customQualifierTypes&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>example.CustomQualifier<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>AutowireCandidateResolver é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¡®å®šè‡ªåŠ¨è£…é…å€™é€‰è€…ï¼š</p>
<ul>
<li>æ¯ä¸ª bean å®šä¹‰çš„è‡ªåŠ¨è£…é…å€™é€‰å€¼</li>
<li><beans> å…ƒç´ ä¸Šå¯ç”¨çš„ä»»ä½• default-autowire-candidates æ¨¡å¼</beans></li>
<li>@Qualifier æ³¨é‡Šå’Œå‘ CustomAutowireConfigurer æ³¨å†Œçš„ä»»ä½•è‡ªå®šä¹‰æ³¨é‡Šçš„å­˜åœ¨</li>
</ul>
<p>å½“å¤šä¸ª bean æœ‰èµ„æ ¼ä½œä¸ºè‡ªåŠ¨è£…é…å€™é€‰æ—¶ï¼Œâ€œä¸»è¦â€çš„ç¡®å®šå¦‚ä¸‹ï¼šå¦‚æœå€™é€‰ä¸­æ°å¥½æœ‰ä¸€ä¸ª bean å®šä¹‰çš„ä¸»è¦å±æ€§è®¾ç½®ä¸º trueï¼Œåˆ™é€‰æ‹©å®ƒã€‚</p>
<h2 id="ä½¿ç”¨-Resource-æ³¨å…¥"><a href="#ä½¿ç”¨-Resource-æ³¨å…¥" class="headerlink" title="ä½¿ç”¨@Resource æ³¨å…¥"></a>ä½¿ç”¨@Resource æ³¨å…¥</h2><p>Spring è¿˜é€šè¿‡åœ¨å­—æ®µæˆ– bean å±æ€§ setter æ–¹æ³•ä¸Šä½¿ç”¨ JSR-250 @Resource æ³¨é‡Š (javax.annotation.Resource) æ¥æ”¯æŒæ³¨å…¥ã€‚è¿™æ˜¯ Java EE ä¸­çš„å¸¸è§æ¨¡å¼ï¼šä¾‹å¦‚ï¼Œåœ¨ JSF ç®¡ç†çš„ bean å’Œ JAX-WS ç«¯ç‚¹ä¸­ã€‚å¯¹äº Spring ç®¡ç†çš„å¯¹è±¡ï¼ŒSpring ä¹Ÿæ”¯æŒè¿™ç§æ¨¡å¼ã€‚<br>@Resource é‡‡ç”¨ name å±æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å°†è¯¥å€¼è§£é‡Šä¸ºè¦æ³¨å…¥çš„ bean åç§°ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒéµå¾ªæŒ‰åç§°è¯­ä¹‰ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name=&quot;myMovieFinder&quot;)</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieFinder</span><span class="params">(MovieFinder movieFinder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœªæ˜ç¡®æŒ‡å®šåç§°ï¼Œåˆ™é»˜è®¤åç§°æºè‡ªå­—æ®µåç§°æˆ– setter æ–¹æ³•ã€‚å¦‚æœæ˜¯å­—æ®µï¼Œåˆ™é‡‡ç”¨å­—æ®µåç§°ã€‚åœ¨ setter æ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œå®ƒé‡‡ç”¨ bean å±æ€§åç§°ã€‚ä¸‹é¢çš„ä¾‹å­å°†æŠŠåä¸º movieFinder çš„ bean æ³¨å…¥åˆ°å®ƒçš„ setter æ–¹æ³•ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovieFinder</span><span class="params">(MovieFinder movieFinder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éšæ³¨é‡Šæä¾›çš„åç§°ç”± CommonAnnotationBeanPostProcessor çŸ¥é“çš„ ApplicationContext è§£æä¸º bean åç§°ã€‚å¦‚æœæ˜¾å¼é…ç½® Spring çš„ SimpleJndiBeanFactoryï¼Œåˆ™å¯ä»¥é€šè¿‡ JNDI è§£æåç§°ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä¾èµ–é»˜è®¤è¡Œä¸ºå¹¶ä½¿ç”¨ Spring çš„ JNDI æŸ¥æ‰¾åŠŸèƒ½æ¥ä¿ç•™é—´æ¥çº§åˆ«ã€‚</p>
<p>åœ¨æ²¡æœ‰æŒ‡å®šæ˜¾å¼åç§°çš„ @Resource ç”¨æ³•çš„å”¯ä¸€æƒ…å†µä¸‹ï¼Œä¸ @Autowired ç±»ä¼¼ï¼Œ@Resource æŸ¥æ‰¾ä¸»è¦ç±»å‹åŒ¹é…è€Œä¸æ˜¯ç‰¹å®šçš„å‘½å bean å¹¶è§£æä¼—æ‰€å‘¨çŸ¥çš„å¯è§£æä¾èµ–é¡¹ï¼šBeanFactoryã€ApplicationContextã€ResourceLoaderã€ApplicationEventPublisher å’Œæ¶ˆæ¯æºæ¥å£ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼ŒcustomerPreferenceDao å­—æ®µé¦–å…ˆæŸ¥æ‰¾åä¸ºâ€œcustomerPreferenceDaoâ€çš„ beanï¼Œç„¶åå›é€€åˆ° CustomerPreferenceDao ç±»å‹çš„ä¸»è¦ç±»å‹åŒ¹é…ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext context; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨-Value"><a href="#ä½¿ç”¨-Value" class="headerlink" title="ä½¿ç”¨@Value"></a>ä½¿ç”¨@Value</h2><p>@Value é€šå¸¸ç”¨äºæ³¨å…¥å¤–åŒ–å±æ€§ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String catalog;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">(<span class="meta">@Value(&quot;$&#123;catalog.name&#125;&quot;)</span> String catalog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.catalog = catalog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:application.properties&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥åŠä»¥ä¸‹ application.properties æ–‡ä»¶ï¼š</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">catalog.name</span>=<span class="string">MovieCatalog</span></span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›®å½•å‚æ•°å’Œå­—æ®µå°†ç­‰äº MovieCatalog å€¼ã€‚<br>Spring æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å®½æ¾åµŒå…¥å€¼è§£æå™¨ã€‚å®ƒå°†å°è¯•è§£æå±æ€§å€¼ï¼Œå¦‚æœæ— æ³•è§£æï¼Œåˆ™å±æ€§åç§°ï¼ˆä¾‹å¦‚ ${catalog.name}ï¼‰å°†ä½œä¸ºå€¼æ³¨å…¥ã€‚å¦‚æœä½ æƒ³å¯¹ä¸å­˜åœ¨çš„å€¼ä¿æŒä¸¥æ ¼çš„æ§åˆ¶ï¼Œä½ åº”è¯¥å£°æ˜ä¸€ä¸ª PropertySourcesPlaceholderConfigurer beanï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">     <span class="meta">@Bean</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PropertySourcesPlaceholderConfigurer <span class="title">propertyPlaceholderConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">new</span> PropertySourcesPlaceholderConfigurer();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ JavaConfig é…ç½® PropertySourcesPlaceholderConfigurer æ—¶ï¼Œ@Bean æ–¹æ³•å¿…é¡»æ˜¯é™æ€çš„ã€‚</p>
<p>å¦‚æœæ— æ³•è§£æä»»ä½• ${} å ä½ç¬¦ï¼Œåˆ™ä½¿ç”¨ä¸Šè¿°é…ç½®å¯ç¡®ä¿ Spring åˆå§‹åŒ–å¤±è´¥ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ setPlaceholderPrefixã€setPlaceholderSuffix æˆ– setValueSeparator ç­‰æ–¹æ³•æ¥è‡ªå®šä¹‰å ä½ç¬¦ã€‚</p>
<p>Spring Boot é»˜è®¤é…ç½®ä¸€ä¸ª PropertySourcesPlaceholderConfigurer beanï¼Œå®ƒå°†ä» application.properties å’Œ application.yml æ–‡ä»¶ä¸­è·å–å±æ€§ã€‚</p>
<p>Spring æä¾›çš„å†…ç½®è½¬æ¢å™¨æ”¯æŒå…è®¸è‡ªåŠ¨å¤„ç†ç®€å•çš„ç±»å‹è½¬æ¢ï¼ˆä¾‹å¦‚åˆ° Integer æˆ– intï¼‰ã€‚å¤šä¸ªé€—å·åˆ†éš”çš„å€¼å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸º String æ•°ç»„ï¼Œæ— éœ€é¢å¤–çš„åŠªåŠ›ã€‚<br>å¯ä»¥æä¾›å¦‚ä¸‹é»˜è®¤å€¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String catalog;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">(<span class="meta">@Value(&quot;$&#123;catalog.name:defaultCatalog&#125;&quot;)</span> String catalog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.catalog = catalog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Spring BeanPostProcessor åœ¨å¹•åä½¿ç”¨ ConversionService æ¥å¤„ç†å°† @Value ä¸­çš„ String å€¼è½¬æ¢ä¸ºç›®æ ‡ç±»å‹çš„è¿‡ç¨‹ã€‚å¦‚æœæ‚¨æƒ³ä¸ºæ‚¨è‡ªå·±çš„è‡ªå®šä¹‰ç±»å‹æä¾›è½¬æ¢æ”¯æŒï¼Œæ‚¨å¯ä»¥æä¾›æ‚¨è‡ªå·±çš„ ConversionService bean å®ä¾‹ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConversionService <span class="title">conversionService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DefaultFormattingConversionService conversionService = <span class="keyword">new</span> DefaultFormattingConversionService();</span><br><span class="line">        conversionService.addConverter(<span class="keyword">new</span> MyCustomConverter());</span><br><span class="line">        <span class="keyword">return</span> conversionService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ @Value åŒ…å« SpEL è¡¨è¾¾å¼æ—¶ï¼Œè¯¥å€¼å°†åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¡ç®—ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String catalog;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">(<span class="meta">@Value(&quot;#&#123;systemProperties[&#x27;user.catalog&#x27;] + &#x27;Catalog&#x27; &#125;&quot;)</span> String catalog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.catalog = catalog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SpEL è¿˜æ”¯æŒä½¿ç”¨æ›´å¤æ‚çš„æ•°æ®ç»“æ„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieRecommender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Integer&gt; countOfMoviesPerCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieRecommender</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@Value(&quot;#&#123;&#123;&#x27;Thriller&#x27;: 100, &#x27;Comedy&#x27;: 300&#125;&#125;&quot;)</span> Map&lt;String, Integer&gt; countOfMoviesPerCatalog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.countOfMoviesPerCatalog = countOfMoviesPerCatalog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨-PostConstruct-å’Œ-PreDestroy"><a href="#ä½¿ç”¨-PostConstruct-å’Œ-PreDestroy" class="headerlink" title="ä½¿ç”¨@PostConstruct å’Œ@PreDestroy"></a>ä½¿ç”¨@PostConstruct å’Œ@PreDestroy</h2><p>CommonAnnotationBeanPostProcessor ä¸ä»…å¯ä»¥è¯†åˆ« @Resource æ³¨é‡Šï¼Œè¿˜å¯ä»¥è¯†åˆ« JSR-250 ç”Ÿå‘½å‘¨æœŸæ³¨é‡Šï¼šjavax.annotation.PostConstruct å’Œ javax.annotation.PreDestroyã€‚åœ¨ Spring 2.5 ä¸­å¼•å…¥ï¼Œå¯¹è¿™äº›æ³¨è§£çš„æ”¯æŒæä¾›äº†åˆå§‹åŒ–å›è°ƒå’Œé”€æ¯å›è°ƒä¸­æè¿°çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæœºåˆ¶çš„æ›¿ä»£æ–¹æ¡ˆã€‚å‡è®¾ CommonAnnotationBeanPostProcessor å·²åœ¨ Spring ApplicationContext ä¸­æ³¨å†Œï¼Œåˆ™åœ¨ç”Ÿå‘½å‘¨æœŸä¸­ä¸ç›¸åº”çš„ Spring ç”Ÿå‘½å‘¨æœŸæ¥å£æ–¹æ³•æˆ–æ˜¾å¼å£°æ˜çš„å›è°ƒæ–¹æ³•ç›¸åŒçš„ç‚¹è°ƒç”¨å¸¦æœ‰è¿™äº›æ³¨é‡Šä¹‹ä¸€çš„æ–¹æ³•ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œç¼“å­˜åœ¨åˆå§‹åŒ–æ—¶é¢„å¡«å……å¹¶åœ¨é”€æ¯æ—¶æ¸…é™¤ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CachingMovieLister</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">populateMovieCache</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// populates the movie cache upon initialization...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearMovieCache</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// clears the movie cache upon destruction...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å„ç§ç”Ÿå‘½å‘¨æœŸæœºåˆ¶ç»„åˆçš„æ•ˆæœè¯·å‚è§ç”Ÿå‘½å‘¨æœŸæœºåˆ¶ç»„åˆã€‚</p>
<p>ä¸@Resource ä¸€æ ·ï¼Œ@PostConstruct å’Œ @PreDestroy æ³¨é‡Šç±»å‹æ˜¯ JDK 6 åˆ° 8 çš„æ ‡å‡† Java åº“çš„ä¸€éƒ¨åˆ†ã€‚ ç„¶è€Œï¼Œæ•´ä¸ª javax.annotation åŒ…åœ¨ JDK 9 ä¸­ä¸æ ¸å¿ƒ Java æ¨¡å—åˆ†ç¦»ï¼Œæœ€ç»ˆåœ¨ JDK 11 ä¸­åˆ é™¤. å¦‚æœéœ€è¦ï¼Œç°åœ¨éœ€è¦é€šè¿‡ Maven Central è·å– javax.annotation-api å·¥ä»¶ï¼Œåªéœ€åƒä»»ä½•å…¶ä»–åº“ä¸€æ ·å°†å…¶æ·»åŠ åˆ°åº”ç”¨ç¨‹åºçš„ç±»è·¯å¾„ä¸­å³å¯ã€‚</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/spring/" rel="tag"># spring</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/08/26/Java/spring/spring-container-extension-points/" rel="prev" title="spring-container-extension-points">
      <i class="fa fa-chevron-left"></i> spring-container-extension-points
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/08/26/Java/spring/spring-classpath-scanning-and-managed-components/" rel="next" title="spring-classpath-scanning-and-managed-components">
      spring-classpath-scanning-and-managed-components <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Required"><span class="nav-number">1.</span> <span class="nav-text">@Required</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Autowired"><span class="nav-number">2.</span> <span class="nav-text">@Autowired</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Primary-%E5%BE%AE%E8%B0%83%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="nav-number">3.</span> <span class="nav-text">ä½¿ç”¨@Primary å¾®è°ƒåŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%99%90%E5%AE%9A%E7%AC%A6%E5%BE%AE%E8%B0%83%E5%9F%BA%E4%BA%8E%E6%B3%A8%E9%87%8A%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="nav-number">4.</span> <span class="nav-text">ä½¿ç”¨é™å®šç¬¦å¾®è°ƒåŸºäºæ³¨é‡Šçš„è‡ªåŠ¨è£…é…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%B3%9B%E5%9E%8B%E4%BD%9C%E4%B8%BA%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E9%99%90%E5%AE%9A%E7%AC%A6"><span class="nav-number">5.</span> <span class="nav-text">ä½¿ç”¨æ³›å‹ä½œä¸ºè‡ªåŠ¨è£…é…é™å®šç¬¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-CustomAutowireConfigurer"><span class="nav-number">6.</span> <span class="nav-text">ä½¿ç”¨ CustomAutowireConfigurer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Resource-%E6%B3%A8%E5%85%A5"><span class="nav-number">7.</span> <span class="nav-text">ä½¿ç”¨@Resource æ³¨å…¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Value"><span class="nav-number">8.</span> <span class="nav-text">ä½¿ç”¨@Value</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-PostConstruct-%E5%92%8C-PreDestroy"><span class="nav-number">9.</span> <span class="nav-text">ä½¿ç”¨@PostConstruct å’Œ@PreDestroy</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="CHENPENGBLOG"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">CHENPENGBLOG</p>
  <div class="site-description" itemprop="description">è®°å½•ï¼</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">97</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yourname" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail â†’ mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/yourname" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/yourname" title="StackOverflow â†’ https:&#x2F;&#x2F;stackoverflow.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CHENPENGBLOG</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
